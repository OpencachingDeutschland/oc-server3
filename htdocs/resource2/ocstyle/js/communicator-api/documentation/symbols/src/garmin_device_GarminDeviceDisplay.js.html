<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"> <style>
	.KEYW {color: #933;}
	.COMM {color: #bbb; font-style: italic;}
	.NUMB {color: #393;}
	.STRN {color: #393;}
	.REGX {color: #339;}
	.line {border-right: 1px dotted #666; color: #666; font-style: normal;}
	</style></head><body><pre><span class='line'>  1</span> <span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">Garmin</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">undefined</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">Garmin</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>  2</span> </span><span class="COMM">/** Copyright &copy; 2007-2010 Garmin Ltd. or its subsidiaries.
<span class='line'>  3</span>  *
<span class='line'>  4</span>  * Licensed under the Apache License, Version 2.0 (the 'License')
<span class='line'>  5</span>  * you may not use this file except in compliance with the License.
<span class='line'>  6</span>  * You may obtain a copy of the License at
<span class='line'>  7</span>  *
<span class='line'>  8</span>  *    http://www.apache.org/licenses/LICENSE-2.0
<span class='line'>  9</span>  *
<span class='line'> 10</span>  * Unless required by applicable law or agreed to in writing, software
<span class='line'> 11</span>  * distributed under the License is distributed on an 'AS IS' BASIS,
<span class='line'> 12</span>  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
<span class='line'> 13</span>  * See the License for the specific language governing permissions and
<span class='line'> 14</span>  * limitations under the License.
<span class='line'> 15</span>  * 
<span class='line'> 16</span>  * A high-level UI widget for talking with Garmin Devices.
<span class='line'> 17</span>  * 
<span class='line'> 18</span>  * @fileoverview GarminDeviceDisplay.js  
<span class='line'> 19</span>  * @version 1.10
<span class='line'> 20</span>  */</span><span class="WHIT">
<span class='line'> 21</span> </span><span class="WHIT"> </span><span class="WHIT">
<span class='line'> 22</span> </span><span class="COMM">/** Provides the easiest avenue for getting a working instance of the plug-in onto your page.
<span class='line'> 23</span>  * Generates the UI elements and places them on the page.
<span class='line'> 24</span>  *
<span class='line'> 25</span>  * @class Garmin.DeviceDisplay
<span class='line'> 26</span>  * 
<span class='line'> 27</span>  * requires Prototype
<span class='line'> 28</span>  * @requires Garmin.DeviceControl 
<span class='line'> 29</span>  * @param {String|Element} mainElement - id of the element (or DOM element itself) in which to generate the contents
<span class='line'> 30</span>  * @param {Object} options - Object with options (see {@link Garmin.DeviceDisplayDefaultOptions} for descriptions of possible options).
<span class='line'> 31</span>  */</span><span class="WHIT">
<span class='line'> 32</span> </span><span class="NAME">Garmin.DeviceDisplay</span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">mainElement</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">options</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">//just here for jsdoc</span><span class="WHIT">
<span class='line'> 33</span> </span><span class="NAME">Garmin.DeviceDisplay</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Class.create</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 34</span> </span><span class="NAME">Garmin.DeviceDisplay.prototype</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'> 35</span> 
<span class='line'> 36</span> </span><span class="WHIT">    </span><span class="COMM">/** Constructor.
<span class='line'> 37</span> 	 * @private
<span class='line'> 38</span>      */</span><span class="WHIT">
<span class='line'> 39</span> </span><span class="WHIT">	</span><span class="NAME">initialize</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">mainElement</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">options</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'> 40</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="KEYW">typeof</span><span class="PUNC">(</span><span class="NAME">mainElement</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="STRN">"string"</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'> 41</span> </span><span class="WHIT">			</span><span class="NAME">this.mainElement</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">$</span><span class="PUNC">(</span><span class="NAME">mainElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 42</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'> 43</span> </span><span class="WHIT">			</span><span class="NAME">this.mainElement</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">mainElement</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 44</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'> 45</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'> 46</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.mainElement</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'> 47</span> </span><span class="WHIT">			</span><span class="NAME">this.options</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 48</span> </span><span class="WHIT">			</span><span class="NAME">this.setOptions</span><span class="PUNC">(</span><span class="NAME">options</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 49</span> 
<span class='line'> 50</span> </span><span class="WHIT">			</span><span class="NAME">this.garminController</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 51</span> </span><span class="WHIT">			</span><span class="NAME">this.garminRemoteTransfer</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 52</span> </span><span class="WHIT">			</span><span class="NAME">this.activities</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Array</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 53</span> </span><span class="WHIT">			</span><span class="NAME">this.devices</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Array</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 54</span> </span><span class="WHIT">			</span><span class="NAME">this.factory</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 55</span> </span><span class="WHIT">        	</span><span class="NAME">this.tracks</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 56</span> </span><span class="WHIT">	        </span><span class="NAME">this.waypoints</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 57</span> 
<span class='line'> 58</span> </span><span class="WHIT">			</span><span class="NAME">this.activityDirectory</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT"> 					</span><span class="COMM">// Array of activity ID strings in the directory</span><span class="WHIT">
<span class='line'> 59</span> </span><span class="WHIT">			</span><span class="NAME">this.activityQueue</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT"> 						</span><span class="COMM">// Queue of activity IDs to sync events</span><span class="WHIT">
<span class='line'> 60</span> </span><span class="WHIT">			</span><span class="NAME">this.numQueuedActivities</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">                </span><span class="COMM">// Number of total queued activities for status reporting </span><span class="WHIT">
<span class='line'> 61</span> </span><span class="WHIT">			</span><span class="NAME">this.uploadData</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">                         </span><span class="COMM">// Payload element for upload data</span><span class="WHIT">
<span class='line'> 62</span> </span><span class="WHIT">			</span><span class="NAME">this.activityMatcher</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">                    </span><span class="COMM">// The activity filter for synchronizing activities</span><span class="WHIT">
<span class='line'> 63</span> </span><span class="WHIT">			</span><span class="WHIT">
<span class='line'> 64</span> </span><span class="WHIT">			</span><span class="NAME">this.currentActivity</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT"> 					</span><span class="COMM">// The top of the activity queue and/or the activity being processed.</span><span class="WHIT">
<span class='line'> 65</span> </span><span class="WHIT">			</span><span class="NAME">this.finishedFirstActivity</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 66</span> </span><span class="WHIT">			</span><span class="NAME">this.xhr</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">                                </span><span class="COMM">// The XHR object (see GarminRemoteTransfer)</span><span class="WHIT">
<span class='line'> 67</span> </span><span class="WHIT">			</span><span class="NAME">this.advancedUploadMode</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">                 </span><span class="COMM">// Internal option to show the activity selection table on upload</span><span class="WHIT">
<span class='line'> 68</span> </span><span class="WHIT">			</span><span class="WHIT">
<span class='line'> 69</span> </span><span class="WHIT">			</span><span class="NAME">this.error</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 70</span> </span><span class="WHIT">			</span><span class="WHIT">
<span class='line'> 71</span> </span><span class="WHIT">			</span><span class="NAME">this._generateElements</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 72</span> </span><span class="WHIT">			</span><span class="WHIT">
<span class='line'> 73</span> </span><span class="WHIT">			</span><span class="NAME">this.originalFileTypeRead</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 74</span> </span><span class="WHIT">			</span><span class="WHIT">
<span class='line'> 75</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.options.unlockOnPageLoad</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'> 76</span> </span><span class="WHIT">				</span><span class="NAME">this.getController</span><span class="PUNC">(</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 77</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'> 78</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this.error</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">this.options.autoFindDevices</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'> 79</span> </span><span class="WHIT">				</span><span class="NAME">this.startFindDevices</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 80</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'> 81</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'> 82</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'> 83</span> 
<span class='line'> 84</span> </span><span class="WHIT">    </span><span class="COMM">////////////////////////// UI GENERATION METHODS ///////////////////////////</span><span class="WHIT">
<span class='line'> 85</span> </span><span class="WHIT">    </span><span class="WHIT">
<span class='line'> 86</span> </span><span class="WHIT">    </span><span class="COMM">/* Primary UI build method.
<span class='line'> 87</span>      * @private  
<span class='line'> 88</span>      */</span><span class="WHIT">
<span class='line'> 89</span> </span><span class="WHIT">	</span><span class="NAME">_generateElements</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'> 90</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">BrowserSupport.isBrowserSupported</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="NAME">this.options.hideIfBrowserNotSupported</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'> 91</span> </span><span class="WHIT">			</span><span class="NAME">this._generateStatusElement</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 92</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.options.showFindDevicesElement</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'> 93</span> </span><span class="WHIT">				</span><span class="NAME">this._generateFindDevicesElement</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 94</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'> 95</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.options.showReadDataElement</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'> 96</span> </span><span class="WHIT">				</span><span class="NAME">this._generateReadDataElement</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 97</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'> 98</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.options.showActivityDirectoryElement</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'> 99</span> </span><span class="WHIT">				</span><span class="NAME">this._generateActivityDirectoryElement</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>100</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>101</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.options.showWriteDataElement</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>102</span> </span><span class="WHIT">				</span><span class="NAME">this._generateWriteDataElement</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>103</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>104</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.options.showSendDataElement</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>105</span> </span><span class="WHIT">				</span><span class="NAME">this._generateSendDataElement</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>106</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>107</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.options.showAboutElement</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>108</span> </span><span class="WHIT">    			</span><span class="NAME">this._generateAboutElement</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>109</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>110</span> </span><span class="WHIT">			</span><span class="NAME">this.resetUI</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>111</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>112</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>113</span> 
<span class='line'>114</span> </span><span class="WHIT">    </span><span class="COMM">/** Resets UI widgets based on state of application.
<span class='line'>115</span>      */</span><span class="WHIT"> </span><span class="WHIT">
<span class='line'>116</span> </span><span class="WHIT">	</span><span class="NAME">resetUI</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>117</span> </span><span class="WHIT">	    </span><span class="NAME">this.hideProgressBar</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>118</span> </span><span class="WHIT">	    </span><span class="WHIT">
<span class='line'>119</span> </span><span class="WHIT">		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">noDevicesAvailable</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.garminController</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.getController</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">numDevices</span><span class="PUNC">==</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>120</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.options.showFindDevicesElement</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>121</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.findDevicesButton</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>122</span> </span><span class="WHIT">				</span><span class="NAME">this.findDevicesButton.disabled</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>123</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.deviceSelectInput</span><span class="PUNC">)</span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>124</span> </span><span class="WHIT">				</span><span class="NAME">this.deviceSelectInput.disabled</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">noDevicesAvailable</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>125</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.cancelFindDevicesButton</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>126</span> </span><span class="WHIT">				</span><span class="NAME">this.cancelFindDevicesButton.disabled</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>127</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.readDataTypesSelect</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="WHIT">
<span class='line'>128</span> </span><span class="WHIT">				</span><span class="NAME">this.readDataTypesSelect.disabled</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>129</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>130</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.options.showReadDataElement</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>131</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.readDataButton</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="WHIT">
<span class='line'>132</span> </span><span class="WHIT">				</span><span class="NAME">this.readDataButton.disabled</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">noDevicesAvailable</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>133</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.cancelReadDataButton</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>134</span> </span><span class="WHIT">				</span><span class="NAME">this.cancelReadDataButton.disabled</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>135</span> </span><span class="WHIT">    		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.loadingContentElement</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>136</span> </span><span class="WHIT">    		    </span><span class="NAME">this.loadingContentElement.hide</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>137</span> </span><span class="WHIT">    		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>138</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>139</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.options.showWriteDataElement</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>140</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.writeDataButton</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>141</span> </span><span class="WHIT">				</span><span class="NAME">this.writeDataButton.disabled</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">noDevicesAvailable</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>142</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.cancelWriteDataButton</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>143</span> </span><span class="WHIT">				</span><span class="NAME">this.cancelWriteDataButton.disabled</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>144</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>145</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>146</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>147</span> 
<span class='line'>148</span> </span><span class="WHIT">    </span><span class="COMM">/* Build status UI components.
<span class='line'>149</span>      * @private
<span class='line'>150</span>      */</span><span class="WHIT">
<span class='line'>151</span> </span><span class="WHIT">	</span><span class="NAME">_generateStatusElement</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>152</span> </span><span class="WHIT">		</span><span class="NAME">this.statusElement</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">"div"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>153</span> </span><span class="WHIT">		</span><span class="NAME">Element.extend</span><span class="PUNC">(</span><span class="NAME">this.statusElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>154</span> </span><span class="WHIT">		</span><span class="NAME">this.statusElement.id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.statusElementId</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>155</span> </span><span class="WHIT">		</span><span class="NAME">this.statusElement.addClassName</span><span class="PUNC">(</span><span class="NAME">this.options.elementClassName</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>156</span> </span><span class="WHIT">		</span><span class="NAME">this.mainElement.appendChild</span><span class="PUNC">(</span><span class="NAME">this.statusElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>157</span> 
<span class='line'>158</span> </span><span class="WHIT">		</span><span class="COMM">// Status text</span><span class="WHIT">
<span class='line'>159</span> </span><span class="WHIT">		</span><span class="NAME">this.statusText</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">"div"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>160</span> </span><span class="WHIT">		</span><span class="NAME">Element.extend</span><span class="PUNC">(</span><span class="NAME">this.statusText</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>161</span> </span><span class="WHIT">		</span><span class="NAME">this.statusText.id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.statusTextId</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>162</span> </span><span class="WHIT">		</span><span class="NAME">this.statusElement.appendChild</span><span class="PUNC">(</span><span class="NAME">this.statusText</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>163</span> 
<span class='line'>164</span> </span><span class="WHIT">        </span><span class="COMM">// Progress bars</span><span class="WHIT">
<span class='line'>165</span> </span><span class="WHIT">        </span><span class="NAME">this._generateProgressBars</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>166</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>167</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>168</span> </span><span class="WHIT">	</span><span class="COMM">/* Build status progress bar UI components.
<span class='line'>169</span> 	 * @private
<span class='line'>170</span> 	 */</span><span class="WHIT">
<span class='line'>171</span> </span><span class="WHIT">	</span><span class="NAME">_generateProgressBars</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>172</span> </span><span class="WHIT">		</span><span class="COMM">// Device transfer progress bar</span><span class="WHIT">
<span class='line'>173</span> </span><span class="WHIT">		</span><span class="NAME">this.progressBar</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">"div"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>174</span> </span><span class="WHIT">		</span><span class="NAME">Element.extend</span><span class="PUNC">(</span><span class="NAME">this.progressBar</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>175</span> </span><span class="WHIT">		</span><span class="NAME">this.progressBar.id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.progressBarId</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>176</span> </span><span class="WHIT">		</span><span class="NAME">this.progressBar.className</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.progressBarClass</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>177</span> </span><span class="WHIT">		</span><span class="NAME">this.progressBarBack</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">"div"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>178</span> </span><span class="WHIT">		</span><span class="NAME">Element.extend</span><span class="PUNC">(</span><span class="NAME">this.progressBarBack</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>179</span> </span><span class="WHIT">		</span><span class="NAME">this.progressBarBack.id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.progressBarBackId</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>180</span> </span><span class="WHIT">		</span><span class="NAME">this.progressBarBack.addClassName</span><span class="PUNC">(</span><span class="NAME">this.options.progressBarBackClass</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>181</span> </span><span class="WHIT">		</span><span class="NAME">this.progressBarBack.innerHTML</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'&lt;span/>'</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>182</span> </span><span class="WHIT">		</span><span class="NAME">this.progressBar.appendChild</span><span class="PUNC">(</span><span class="NAME">this.progressBarBack</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>183</span> </span><span class="WHIT">		</span><span class="NAME">this.progressBarDisplay</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">"div"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>184</span> </span><span class="WHIT">		</span><span class="NAME">Element.extend</span><span class="PUNC">(</span><span class="NAME">this.progressBarDisplay</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>185</span> </span><span class="WHIT">		</span><span class="NAME">this.progressBarDisplay.id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.progressBarDisplayId</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>186</span> </span><span class="WHIT">		</span><span class="NAME">this.progressBarDisplay.addClassName</span><span class="PUNC">(</span><span class="NAME">this.options.progressBarDisplayClass</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>187</span> </span><span class="WHIT">		</span><span class="NAME">this.progressBarDisplay.innerHTML</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'&lt;span/>'</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>188</span> </span><span class="WHIT">		</span><span class="NAME">this.progressBar.appendChild</span><span class="PUNC">(</span><span class="NAME">this.progressBarDisplay</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>189</span> </span><span class="WHIT">		</span><span class="NAME">this.progressBar.hide</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>190</span> </span><span class="WHIT">		</span><span class="NAME">this.statusElement.appendChild</span><span class="PUNC">(</span><span class="NAME">this.progressBar</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>191</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>192</span> </span><span class="WHIT">		</span><span class="COMM">// Device transfer progress bar text</span><span class="WHIT">
<span class='line'>193</span> </span><span class="WHIT">		</span><span class="NAME">this.progressBarText</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">"div"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>194</span> </span><span class="WHIT">		</span><span class="NAME">Element.extend</span><span class="PUNC">(</span><span class="NAME">this.progressBarText</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>195</span> </span><span class="WHIT">		</span><span class="NAME">this.progressBarText.id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.progressBarTextId</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>196</span> </span><span class="WHIT">		</span><span class="NAME">this.progressBarText.className</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.progressBarTextClass</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>197</span> </span><span class="WHIT">		</span><span class="NAME">this.progressBar.appendChild</span><span class="PUNC">(</span><span class="NAME">this.progressBarText</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>198</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>199</span> </span><span class="WHIT">		</span><span class="COMM">// Upload progress bar</span><span class="WHIT">
<span class='line'>200</span> </span><span class="WHIT">		</span><span class="NAME">this.uploadProgressBar</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">"div"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>201</span> </span><span class="WHIT">		</span><span class="NAME">Element.extend</span><span class="PUNC">(</span><span class="NAME">this.uploadProgressBar</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>202</span> </span><span class="WHIT">		</span><span class="NAME">this.uploadProgressBar.id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.uploadProgressBarId</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>203</span> </span><span class="WHIT">		</span><span class="NAME">this.uploadProgressBar.className</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.uploadProgressBarClass</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>204</span> </span><span class="WHIT">		</span><span class="NAME">this.uploadProgressBarBack</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">"div"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>205</span> </span><span class="WHIT">		</span><span class="NAME">Element.extend</span><span class="PUNC">(</span><span class="NAME">this.uploadProgressBarBack</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>206</span> </span><span class="WHIT">		</span><span class="NAME">this.uploadProgressBarBack.id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.uploadProgressBarBackId</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>207</span> </span><span class="WHIT">		</span><span class="NAME">this.uploadProgressBarBack.addClassName</span><span class="PUNC">(</span><span class="NAME">this.options.uploadProgressBarBackClass</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>208</span> </span><span class="WHIT">		</span><span class="NAME">this.uploadProgressBarBack.innerHTML</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'&lt;span/>'</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>209</span> </span><span class="WHIT">		</span><span class="NAME">this.uploadProgressBar.appendChild</span><span class="PUNC">(</span><span class="NAME">this.uploadProgressBarBack</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>210</span> </span><span class="WHIT">		</span><span class="NAME">this.uploadProgressBarDisplay</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">"div"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>211</span> </span><span class="WHIT">		</span><span class="NAME">Element.extend</span><span class="PUNC">(</span><span class="NAME">this.uploadProgressBarDisplay</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>212</span> </span><span class="WHIT">		</span><span class="NAME">this.uploadProgressBarDisplay.id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.uploadProgressBarDisplayId</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>213</span> </span><span class="WHIT">		</span><span class="NAME">this.uploadProgressBarDisplay.addClassName</span><span class="PUNC">(</span><span class="NAME">this.options.uploadProgressBarDisplayClass</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>214</span> </span><span class="WHIT">		</span><span class="NAME">this.uploadProgressBarDisplay.innerHTML</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'&lt;span/>'</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>215</span> </span><span class="WHIT">		</span><span class="NAME">this.uploadProgressBar.appendChild</span><span class="PUNC">(</span><span class="NAME">this.uploadProgressBarDisplay</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>216</span> </span><span class="WHIT">		</span><span class="NAME">this.uploadProgressBar.hide</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>217</span> </span><span class="WHIT">		</span><span class="NAME">this.statusElement.appendChild</span><span class="PUNC">(</span><span class="NAME">this.uploadProgressBar</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>218</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>219</span> </span><span class="WHIT">		</span><span class="COMM">// Upload progress bar text</span><span class="WHIT">
<span class='line'>220</span> </span><span class="WHIT">		</span><span class="NAME">this.uploadProgressBarText</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">"div"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>221</span> </span><span class="WHIT">		</span><span class="NAME">Element.extend</span><span class="PUNC">(</span><span class="NAME">this.uploadProgressBarText</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>222</span> </span><span class="WHIT">		</span><span class="NAME">this.uploadProgressBarText.id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.uploadProgressBarTextId</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>223</span> </span><span class="WHIT">		</span><span class="NAME">this.uploadProgressBarText.className</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.uploadProgressBarTextClass</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>224</span> </span><span class="WHIT">		</span><span class="NAME">this.uploadProgressBar.appendChild</span><span class="PUNC">(</span><span class="NAME">this.uploadProgressBarText</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>225</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>226</span> </span><span class="WHIT">		</span><span class="COMM">//TODO This is totally the wrong place to put this.  Move this out somewhere.</span><span class="WHIT">
<span class='line'>227</span> </span><span class="WHIT">		</span><span class="NAME">this.cancelUploadButton</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Element</span><span class="PUNC">(</span><span class="NAME">this.options.useLinks</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="STRN">'div'</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'input'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>228</span> </span><span class="WHIT">		    </span><span class="NAME">id</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this.options.cancelUploadButtonId</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>229</span> </span><span class="WHIT">		    </span><span class="NAME">className</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this.options.cancelUploadButtonClass</span><span class="WHIT">
<span class='line'>230</span> </span><span class="WHIT">		    </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>231</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.options.useLinks</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>232</span> </span><span class="WHIT">			</span><span class="NAME">this.cancelUploadButton.update</span><span class="PUNC">(</span><span class="STRN">'&lt;a href="#">'</span><span class="PUNC">+</span><span class="NAME">this.options.cancelUploadButtonText</span><span class="PUNC">+</span><span class="STRN">'&lt;/a>'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>233</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>234</span> </span><span class="WHIT">			</span><span class="NAME">this.cancelUploadButton.type</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"button"</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>235</span> </span><span class="WHIT">			</span><span class="NAME">this.cancelUploadButton.value</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.cancelUploadButtonText</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>236</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>237</span> </span><span class="WHIT">        </span><span class="NAME">this.cancelUploadButton.onclick</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>238</span> </span><span class="WHIT">        	</span><span class="NAME">this.resetUI</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>239</span> </span><span class="WHIT">         	</span><span class="NAME">this.hideProgressBar</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>240</span> </span><span class="WHIT">         	</span><span class="WHIT">
<span class='line'>241</span> </span><span class="WHIT">         	</span><span class="COMM">// Kill the string of event handlers</span><span class="WHIT">
<span class='line'>242</span> </span><span class="WHIT">        	</span><span class="NAME">this.garminRemoteTransfer.abortRequest</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">  </span><span class="WHIT">
<span class='line'>243</span> </span><span class="WHIT">    	    </span><span class="WHIT">
<span class='line'>244</span> </span><span class="WHIT">    	    </span><span class="KEYW">try</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>245</span> </span><span class="WHIT">            	</span><span class="COMM">// Update the status of the active upload.</span><span class="WHIT">
<span class='line'>246</span> </span><span class="WHIT">                </span><span class="NAME">this.options.afterFinishSendData.call</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="WHIT">
<span class='line'>247</span> </span><span class="WHIT">                    </span><span class="NAME">this.xhr</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="WHIT">
<span class='line'>248</span> </span><span class="WHIT">                    </span><span class="NAME">this.currentActivityStatusElement</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>249</span> </span><span class="WHIT">                    </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>250</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">catch</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">error</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>251</span> </span><span class="WHIT">		        </span><span class="NAME">this.handleException</span><span class="PUNC">(</span><span class="NAME">error</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>252</span> </span><span class="WHIT">	        </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>253</span> </span><span class="WHIT">        	</span><span class="WHIT">
<span class='line'>254</span> </span><span class="WHIT">        	</span><span class="COMM">// Clear the queue.  Affects cancel and progress.</span><span class="WHIT">
<span class='line'>255</span> </span><span class="WHIT">            </span><span class="NAME">this.activityQueue</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>256</span> </span><span class="COMM">//         	this.clearActivityQueue();  // Clearing does not work for whatever reason... timing/async</span><span class="WHIT">
<span class='line'>257</span> </span><span class="WHIT">        	</span><span class="WHIT">
<span class='line'>258</span> </span><span class="WHIT">	        </span><span class="COMM">// Go to the finished screen</span><span class="WHIT">
<span class='line'>259</span> </span><span class="WHIT">        	</span><span class="NAME">this.getController</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">_broadcaster.dispatch</span><span class="PUNC">(</span><span class="STRN">"onFinishUploads"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="NAME">display</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="WHIT"> </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>260</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="PUNC">.</span><span class="NAME">bind</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>261</span> </span><span class="WHIT">		</span><span class="NAME">this.uploadProgressBar.insert</span><span class="PUNC">(</span><span class="NAME">this.cancelUploadButton</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>262</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>263</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>264</span> </span><span class="WHIT">	</span><span class="NAME">_createElement</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">id</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">text</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">type</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">parent</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>265</span> </span><span class="WHIT">		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">elem</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="NAME">type</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>266</span> </span><span class="WHIT">		</span><span class="NAME">Element.extend</span><span class="PUNC">(</span><span class="NAME">elem</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>267</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">type</span><span class="PUNC">==</span><span class="STRN">"a"</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>268</span> </span><span class="WHIT">			</span><span class="NAME">elem.href</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">location</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>269</span> </span><span class="WHIT">			</span><span class="NAME">elem.innerHTML</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">text</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>270</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">type</span><span class="PUNC">==</span><span class="STRN">"button"</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>271</span> </span><span class="WHIT">			</span><span class="NAME">elem.type</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">type</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>272</span> </span><span class="WHIT">			</span><span class="NAME">elem.value</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">text</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>273</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>274</span> </span><span class="WHIT">		</span><span class="NAME">elem.id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">id</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>275</span> </span><span class="WHIT">		</span><span class="NAME">parent.appendChild</span><span class="PUNC">(</span><span class="NAME">elem</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>276</span> </span><span class="WHIT">		</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">elem</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>277</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>278</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>279</span> </span><span class="WHIT">	</span><span class="COMM">/** Build device browser list, a singleton.  This list will be juxtaposed with the activity directory.
<span class='line'>280</span> 	 * This is a different list than the default device select drop down.  It adds on the computer file browser
<span class='line'>281</span> 	 * as well.
<span class='line'>282</span> 	 * @private
<span class='line'>283</span> 	 */</span><span class="WHIT">
<span class='line'>284</span> </span><span class="WHIT">	</span><span class="NAME">generateDeviceBrowserElement</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">devices</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>285</span> </span><span class="WHIT">	    </span><span class="WHIT">
<span class='line'>286</span> </span><span class="WHIT">	    </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.deviceBrowserElement</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>287</span> </span><span class="WHIT">	        </span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Error</span><span class="PUNC">(</span><span class="STRN">"Unable to generate device browser because an instance already exists."</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>288</span> </span><span class="WHIT">	    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>289</span> </span><span class="WHIT">        </span><span class="WHIT">
<span class='line'>290</span> </span><span class="WHIT">        </span><span class="NAME">this.deviceBrowserElement</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Element</span><span class="PUNC">(</span><span class="STRN">'div'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="WHIT">
<span class='line'>291</span> </span><span class="WHIT">            </span><span class="NAME">id</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this.options.deviceBrowserElementId</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>292</span> </span><span class="WHIT">            </span><span class="NAME">className</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this.options.deviceBrowserElementClass</span><span class="WHIT"> </span><span class="WHIT">
<span class='line'>293</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>294</span> </span><span class="WHIT">        </span><span class="NAME">this.deviceBrowserLabel</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Element</span><span class="PUNC">(</span><span class="STRN">'div'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="WHIT">
<span class='line'>295</span> </span><span class="WHIT">            </span><span class="NAME">id</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this.options.deviceBrowserLabelId</span><span class="PUNC">,</span><span class="WHIT">            </span><span class="WHIT">
<span class='line'>296</span> </span><span class="WHIT">            </span><span class="NAME">className</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this.options.deviceBrowserLabelClass</span><span class="WHIT">
<span class='line'>297</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">update</span><span class="PUNC">(</span><span class="NAME">this.options.deviceBrowserLabel</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>298</span> </span><span class="WHIT">        </span><span class="NAME">this.deviceBrowserElement.insert</span><span class="PUNC">(</span><span class="NAME">this.deviceBrowserLabel</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>299</span> </span><span class="WHIT">    </span><span class="WHIT">
<span class='line'>300</span> </span><span class="WHIT">		</span><span class="NAME">this.deviceBrowserList</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">"ul"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>301</span> </span><span class="WHIT">		</span><span class="NAME">Element.extend</span><span class="PUNC">(</span><span class="NAME">this.deviceBrowserList</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>302</span> </span><span class="WHIT">		</span><span class="NAME">this.deviceBrowserList.id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.deviceBrowserListId</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>303</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>304</span> </span><span class="WHIT">		</span><span class="NAME">this.deviceBrowserElement.appendChild</span><span class="PUNC">(</span><span class="NAME">this.deviceBrowserList</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>305</span> </span><span class="WHIT">		</span><span class="NAME">this.deviceBrowserElement.hide</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>306</span> </span><span class="WHIT">		</span><span class="NAME">this.mainElement.appendChild</span><span class="PUNC">(</span><span class="NAME">this.deviceBrowserElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>307</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>308</span> </span><span class="WHIT">		</span><span class="COMM">// Fill up the list with real data</span><span class="WHIT">
<span class='line'>309</span> </span><span class="WHIT">		</span><span class="NAME">this._populateDeviceList</span><span class="PUNC">(</span><span class="NAME">this.deviceBrowserList</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.options.afterSelectDevice</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">this.options.afterSelectDevice</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="WHIT">
<span class='line'>310</span> </span><span class="WHIT">            </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">selectedDeviceNumber</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">devices</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">deviceXml</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>311</span> </span><span class="WHIT">    		    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.options.readDataTypes</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>312</span> </span><span class="WHIT">            		</span><span class="NAME">this.readFromDevice</span><span class="PUNC">(</span><span class="NAME">this.options.readDataTypes</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>313</span> </span><span class="WHIT">            	</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="WHIT">
<span class='line'>314</span> </span><span class="WHIT">    		</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>315</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>316</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.options.uploadSelectedActivities</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">this.options.showBrowseComputer</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>317</span> </span><span class="WHIT">    		</span><span class="NAME">this._generateBrowseComputerElement</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>318</span> </span><span class="WHIT">    		</span><span class="WHIT">
<span class='line'>319</span> </span><span class="WHIT">    		</span><span class="COMM">// Add My Computer to the list</span><span class="WHIT">
<span class='line'>320</span> </span><span class="WHIT">    		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">itemLink</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>321</span> </span><span class="WHIT">    	    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">listItem</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>322</span> </span><span class="WHIT">            </span><span class="NAME">listItem</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">"li"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>323</span> </span><span class="WHIT">            </span><span class="NAME">Element.extend</span><span class="PUNC">(</span><span class="NAME">listItem</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>324</span> </span><span class="WHIT">            </span><span class="NAME">listItem.className</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"unselected"</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>325</span> </span><span class="WHIT">            </span><span class="NAME">itemLink</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">"a"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>326</span> </span><span class="WHIT">            </span><span class="NAME">Element.extend</span><span class="PUNC">(</span><span class="NAME">itemLink</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>327</span> </span><span class="WHIT">            </span><span class="NAME">itemLink.href</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"#"</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>328</span> </span><span class="WHIT">            </span><span class="NAME">itemLink.innerHTML</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.browseComputerLabel</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>329</span> </span><span class="WHIT">            </span><span class="NAME">itemLink.onclick</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">deviceListElement</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>330</span> </span><span class="WHIT">                </span><span class="NAME">this._displayBrowseComputer</span><span class="PUNC">(</span><span class="NAME">deviceListElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>331</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="PUNC">.</span><span class="NAME">bind</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.deviceBrowserList</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>332</span> </span><span class="WHIT">            </span><span class="NAME">listItem.appendChild</span><span class="PUNC">(</span><span class="NAME">itemLink</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>333</span> </span><span class="WHIT">            </span><span class="NAME">this.deviceBrowserList.appendChild</span><span class="PUNC">(</span><span class="NAME">listItem</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>334</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>335</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>336</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>337</span> </span><span class="WHIT">	</span><span class="COMM">/* Displays the Browse Computer element and updates the device list accordingly.
<span class='line'>338</span> 	 * @private
<span class='line'>339</span> 	 * @param deviceListElement {Element}
<span class='line'>340</span> 	 */</span><span class="WHIT">
<span class='line'>341</span> </span><span class="WHIT">	</span><span class="NAME">_displayBrowseComputer</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">deviceListElement</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>342</span> </span><span class="WHIT">	    </span><span class="COMM">// Mark My Computer as selected</span><span class="WHIT">
<span class='line'>343</span> </span><span class="WHIT">        </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">browseComputerItem</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">deviceListElement.childNodes</span><span class="PUNC">[</span><span class="NAME">this.devices.length</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>344</span> </span><span class="WHIT">        </span><span class="NAME">browseComputerItem.className</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"selected"</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>345</span> </span><span class="WHIT">        </span><span class="WHIT">
<span class='line'>346</span> </span><span class="WHIT">        </span><span class="COMM">// Stop any existing reads and hide stuffs</span><span class="WHIT">
<span class='line'>347</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.getController</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">this.isUnlocked</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="COMM">// browsing computer does not require valid plugin</span><span class="WHIT">
<span class='line'>348</span> </span><span class="WHIT">            </span><span class="NAME">this.getController</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">cancelReadFromDevice</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>349</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>350</span> </span><span class="WHIT">        </span><span class="WHIT">
<span class='line'>351</span> </span><span class="WHIT">        </span><span class="COMM">// Mark all the rest of the devices as unselected</span><span class="WHIT">
<span class='line'>352</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.devices</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>353</span> </span><span class="WHIT">            </span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">j</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">j</span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">this.devices.length</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">j</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>354</span> </span><span class="WHIT">               </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">listItem</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">deviceListElement.childNodes</span><span class="PUNC">[</span><span class="NAME">j</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>355</span> </span><span class="WHIT">               </span><span class="NAME">listItem.className</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"unselected"</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>356</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>357</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>358</span> </span><span class="WHIT">        </span><span class="WHIT">
<span class='line'>359</span> </span><span class="WHIT">        </span><span class="COMM">// The callback function has to take the parameter!  Even if it ignores it.</span><span class="WHIT">
<span class='line'>360</span> </span><span class="WHIT">        </span><span class="NAME">this.activityDirectoryElement.hide</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>361</span> </span><span class="WHIT">        </span><span class="NAME">this.statusElement.hide</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>362</span> </span><span class="WHIT">        </span><span class="NAME">this.browseComputerElement.show</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>363</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>364</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>365</span> </span><span class="WHIT">	</span><span class="COMM">/* Generates the browse computer element, an iframe that contains
<span class='line'>366</span> 	 * the manual upload page.
<span class='line'>367</span> 	 * @private 
<span class='line'>368</span> 	 */</span><span class="WHIT">
<span class='line'>369</span> </span><span class="WHIT">	</span><span class="NAME">_generateBrowseComputerElement</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>370</span> </span><span class="WHIT">	    </span><span class="NAME">this.browseComputerElement</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">"div"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>371</span> </span><span class="WHIT">        </span><span class="NAME">Element.extend</span><span class="PUNC">(</span><span class="NAME">this.browseComputerElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>372</span> </span><span class="WHIT">        </span><span class="NAME">this.browseComputerElement.id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.browseComputerElementId</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>373</span> </span><span class="WHIT">        </span><span class="NAME">this.browseComputerElement.className</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.browseComputerElementClass</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>374</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>375</span> </span><span class="WHIT">		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">browseComputerTitle</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">"div"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>376</span> </span><span class="WHIT">		</span><span class="NAME">browseComputerTitle.id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'manualUploadTitle'</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>377</span> </span><span class="WHIT">		</span><span class="NAME">browseComputerTitle.innerHTML</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.browseComputerLabel</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>378</span> </span><span class="WHIT">		</span><span class="NAME">this.browseComputerElement.appendChild</span><span class="PUNC">(</span><span class="NAME">browseComputerTitle</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>379</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>380</span> </span><span class="WHIT">		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">browseComputerContent</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">"iframe"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>381</span> </span><span class="WHIT">		</span><span class="NAME">Element.extend</span><span class="PUNC">(</span><span class="NAME">browseComputerContent</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>382</span> </span><span class="WHIT">		</span><span class="NAME">browseComputerContent.id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">browseComputerContent.name</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.browseComputerElementId</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">'Contents'</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>383</span> </span><span class="WHIT">		</span><span class="NAME">browseComputerContent.src</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.browseComputerContentUrl</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>384</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>385</span> </span><span class="WHIT">		</span><span class="NAME">this.browseComputerElement.appendChild</span><span class="PUNC">(</span><span class="NAME">browseComputerContent</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>386</span> </span><span class="WHIT">		</span><span class="NAME">this.browseComputerElement.hide</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>387</span> </span><span class="WHIT">		</span><span class="NAME">this.mainElement.appendChild</span><span class="PUNC">(</span><span class="NAME">this.browseComputerElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>388</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>389</span> </span><span class="WHIT">		</span><span class="COMM">// Have to set these after append for IE :E</span><span class="WHIT">
<span class='line'>390</span> </span><span class="WHIT">		</span><span class="COMM">// This doesn't work anyway!! I hate IE!!</span><span class="WHIT">
<span class='line'>391</span> </span><span class="WHIT">		</span><span class="NAME">browseComputerContent.setAttribute</span><span class="PUNC">(</span><span class="STRN">'frameborder'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">'0'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="WHIT">
<span class='line'>392</span> </span><span class="WHIT">		</span><span class="NAME">browseComputerContent.setAttribute</span><span class="PUNC">(</span><span class="STRN">'allowtransparency'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">'true'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>393</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>394</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>395</span> </span><span class="WHIT">	</span><span class="COMM">/* Generates the loading screen as the passed in element is loading.
<span class='line'>396</span> 	 * @private 
<span class='line'>397</span> 	 */</span><span class="WHIT">
<span class='line'>398</span> </span><span class="WHIT">	</span><span class="NAME">_generateLoadingContent</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">loadingElement</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>399</span> </span><span class="WHIT">	    </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.loadingContentElement</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>400</span> </span><span class="WHIT">	        </span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Error</span><span class="PUNC">(</span><span class="STRN">"Unable to generate loading screen because an instance already exists."</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>401</span> </span><span class="WHIT">	    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>402</span> </span><span class="WHIT">	    </span><span class="COMM">// 'Loading' display</span><span class="WHIT">
<span class='line'>403</span> </span><span class="WHIT">        </span><span class="NAME">this.loadingContentElement</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">"div"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>404</span> </span><span class="WHIT">        </span><span class="NAME">Element.extend</span><span class="PUNC">(</span><span class="NAME">this.loadingContentElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>405</span> </span><span class="WHIT">        </span><span class="NAME">this.loadingContentElement.className</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"shortStatus"</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>406</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.fileTypeRead</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.fitHealthData</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>407</span> </span><span class="WHIT">        	</span><span class="NAME">this.loadingContentElement.innerHTML</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.evaluateTemplate</span><span class="PUNC">(</span><span class="NAME">this.options.loadingHealthContentText</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">deviceName</span><span class="PUNC">:</span><span class="NAME">this.getShortDeviceName</span><span class="PUNC">(</span><span class="NAME">this.getCurrentDevice</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>408</span> </span><span class="WHIT">        </span><span class="KEYW">else</span><span class="WHIT">
<span class='line'>409</span> </span><span class="WHIT">        	</span><span class="NAME">this.loadingContentElement.innerHTML</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.evaluateTemplate</span><span class="PUNC">(</span><span class="NAME">this.options.loadingContentText</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">deviceName</span><span class="PUNC">:</span><span class="NAME">this.getShortDeviceName</span><span class="PUNC">(</span><span class="NAME">this.getCurrentDevice</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>410</span> </span><span class="WHIT">        </span><span class="NAME">loadingElement.appendChild</span><span class="PUNC">(</span><span class="NAME">this.loadingContentElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>411</span> </span><span class="WHIT">        </span><span class="WHIT">
<span class='line'>412</span> </span><span class="WHIT">        </span><span class="NAME">this.showProgressBar</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>413</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>414</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>415</span> </span><span class="WHIT">	</span><span class="COMM">/* Update the content inside of the loading content element and display it.
<span class='line'>416</span>      * @private 
<span class='line'>417</span> 	 */</span><span class="WHIT">
<span class='line'>418</span> </span><span class="WHIT">	</span><span class="NAME">_updateLoadingContent</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">content</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>419</span> </span><span class="WHIT">	    </span><span class="COMM">// Update the device name displayed</span><span class="WHIT">
<span class='line'>420</span> </span><span class="WHIT">	    </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.loadingContentElement</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>421</span> </span><span class="WHIT">            </span><span class="NAME">this.loadingContentElement.update</span><span class="PUNC">(</span><span class="NAME">content</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>422</span> </span><span class="WHIT">            </span><span class="NAME">this.loadingContentElement.show</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>423</span> </span><span class="WHIT">	    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>424</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>425</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>426</span> </span><span class="WHIT">    </span><span class="COMM">/* Build find device UI components.
<span class='line'>427</span>      * @private 
<span class='line'>428</span>      */</span><span class="WHIT">
<span class='line'>429</span> </span><span class="WHIT">	</span><span class="NAME">_generateFindDevicesElement</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>430</span> </span><span class="WHIT">		</span><span class="NAME">this.findDevicesElement</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">"div"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>431</span> </span><span class="WHIT">		</span><span class="NAME">Element.extend</span><span class="PUNC">(</span><span class="NAME">this.findDevicesElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>432</span> </span><span class="WHIT">		</span><span class="NAME">this.findDevicesElement.id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.findDevicesElementId</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>433</span> </span><span class="WHIT">		</span><span class="NAME">this.findDevicesElement.addClassName</span><span class="PUNC">(</span><span class="NAME">this.options.elementClassName</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>434</span> </span><span class="WHIT">		</span><span class="NAME">this.mainElement.appendChild</span><span class="PUNC">(</span><span class="NAME">this.findDevicesElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>435</span> 
<span class='line'>436</span> </span><span class="WHIT">		</span><span class="COMM">// Find devices button</span><span class="WHIT">
<span class='line'>437</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.options.showFindDevicesButton</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>438</span> </span><span class="WHIT">			</span><span class="NAME">this.findDevicesButton</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.options.useLinks</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="STRN">"div"</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"input"</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>439</span> </span><span class="WHIT">			</span><span class="NAME">Element.extend</span><span class="PUNC">(</span><span class="NAME">this.findDevicesButton</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>440</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.options.useLinks</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>441</span> </span><span class="WHIT">				</span><span class="NAME">this.findDevicesButton.innerHTML</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'&lt;a href="#">'</span><span class="PUNC">+</span><span class="NAME">this.options.findDevicesButtonText</span><span class="PUNC">+</span><span class="STRN">'&lt;/a>'</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>442</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>443</span> </span><span class="WHIT">				</span><span class="NAME">this.findDevicesButton.type</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"button"</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>444</span> </span><span class="WHIT">				</span><span class="NAME">this.findDevicesButton.value</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.findDevicesButtonText</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>445</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>446</span> </span><span class="WHIT">			</span><span class="NAME">this.findDevicesButton.id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.findDevicesButtonId</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>447</span> </span><span class="WHIT">			</span><span class="NAME">this.findDevicesButton.addClassName</span><span class="PUNC">(</span><span class="NAME">this.options.actionButtonClassName</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>448</span> </span><span class="WHIT">			</span><span class="NAME">this.findDevicesElement.appendChild</span><span class="PUNC">(</span><span class="NAME">this.findDevicesButton</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>449</span> </span><span class="WHIT">	        </span><span class="NAME">this.findDevicesButton.onclick</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>450</span> </span><span class="WHIT">	        	</span><span class="NAME">this.startFindDevices</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>451</span> </span><span class="WHIT">	        </span><span class="PUNC">}</span><span class="PUNC">.</span><span class="NAME">bind</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>452</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>453</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>454</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this.options.showFindDevicesElementOnLoad</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>455</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.findDevicesElement</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>456</span> </span><span class="WHIT">				</span><span class="NAME">Element.hide</span><span class="PUNC">(</span><span class="NAME">this.findDevicesElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>457</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>458</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>459</span> 
<span class='line'>460</span> </span><span class="WHIT">		</span><span class="COMM">// Cancel Find devices button</span><span class="WHIT">
<span class='line'>461</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.options.showCancelFindDevicesButton</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>462</span> </span><span class="WHIT">			</span><span class="NAME">this.cancelFindDevicesButton</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.options.useLinks</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="STRN">"div"</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"input"</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>463</span> </span><span class="WHIT">			</span><span class="NAME">Element.extend</span><span class="PUNC">(</span><span class="NAME">this.cancelFindDevicesButton</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>464</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.options.useLinks</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>465</span> </span><span class="WHIT">				</span><span class="NAME">this.cancelFindDevicesButton.innerHTML</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'&lt;a href="#">'</span><span class="PUNC">+</span><span class="NAME">this.options.cancelFindDevicesButtonText</span><span class="PUNC">+</span><span class="STRN">'&lt;/a>'</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>466</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>467</span> </span><span class="WHIT">				</span><span class="NAME">this.cancelFindDevicesButton.type</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"button"</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>468</span> </span><span class="WHIT">				</span><span class="NAME">this.cancelFindDevicesButton.value</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.cancelFindDevicesButtonText</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>469</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>470</span> </span><span class="WHIT">			</span><span class="NAME">this.cancelFindDevicesButton.id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.cancelFindDevicesButtonId</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>471</span> </span><span class="WHIT">			</span><span class="NAME">this.cancelFindDevicesButton.addClassName</span><span class="PUNC">(</span><span class="NAME">this.options.actionButtonClassName</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>472</span> </span><span class="WHIT">			</span><span class="NAME">this.cancelFindDevicesButton.disabled</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>473</span> </span><span class="WHIT">	        </span><span class="NAME">this.cancelFindDevicesButton.onclick</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>474</span> </span><span class="WHIT">	        	</span><span class="NAME">this.cancelFindDevices</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>475</span> </span><span class="WHIT">	        </span><span class="PUNC">}</span><span class="PUNC">.</span><span class="NAME">bind</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>476</span> </span><span class="WHIT">			</span><span class="NAME">this.findDevicesElement.appendChild</span><span class="PUNC">(</span><span class="NAME">this.cancelFindDevicesButton</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>477</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>478</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>479</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this.options.showDeviceButtonsOnLoad</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>480</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.findDevicesButton</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>481</span> </span><span class="WHIT">				</span><span class="NAME">Element.hide</span><span class="PUNC">(</span><span class="NAME">this.findDevicesButton</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>482</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>483</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.cancelFindDevicesButton</span><span class="PUNC">)</span><span class="WHIT">				</span><span class="WHIT">
<span class='line'>484</span> </span><span class="WHIT">				</span><span class="NAME">Element.hide</span><span class="PUNC">(</span><span class="NAME">this.cancelFindDevicesButton</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">			</span><span class="WHIT">
<span class='line'>485</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>486</span> 
<span class='line'>487</span> </span><span class="WHIT">		</span><span class="COMM">// Device select drop-down list</span><span class="WHIT">
<span class='line'>488</span> </span><span class="WHIT">		</span><span class="NAME">this.deviceSelectElement</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">"div"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>489</span> </span><span class="WHIT">		</span><span class="NAME">Element.extend</span><span class="PUNC">(</span><span class="NAME">this.deviceSelectElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>490</span> </span><span class="WHIT">		</span><span class="NAME">this.deviceSelectElement.id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.deviceSelectElementId</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>491</span> </span><span class="WHIT">		</span><span class="NAME">this.deviceSelectElement.innerHTML</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'&lt;div id="'</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">this.options.deviceSelectLabelId</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">'">'</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">this.options.deviceSelectLabel</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">'&lt;/div>'</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>492</span> </span><span class="WHIT">		</span><span class="NAME">this.findDevicesElement.appendChild</span><span class="PUNC">(</span><span class="NAME">this.deviceSelectElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>493</span> 
<span class='line'>494</span> </span><span class="WHIT">		</span><span class="NAME">this.deviceSelectInput</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.options.useDeviceSelectList</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="STRN">"ul"</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"select"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>495</span> </span><span class="WHIT">		</span><span class="NAME">Element.extend</span><span class="PUNC">(</span><span class="NAME">this.deviceSelectInput</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>496</span> </span><span class="WHIT">		</span><span class="NAME">this.deviceSelectInput.id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.deviceSelectId</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>497</span> </span><span class="WHIT">		</span><span class="NAME">this.deviceSelectInput.disabled</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>498</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>499</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this.options.showDeviceSelectOnLoad</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="NAME">this.options.showDeviceSelectOnSingle</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">this.options.autoSelectFirstDevice</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>500</span> </span><span class="WHIT">			</span><span class="NAME">Element.hide</span><span class="PUNC">(</span><span class="NAME">this.deviceSelectElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>501</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>502</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>503</span> </span><span class="WHIT">		</span><span class="COMM">/* Browse computer */</span><span class="WHIT">
<span class='line'>504</span> </span><span class="WHIT">        </span><span class="NAME">this.browseComputerButton</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Element</span><span class="PUNC">(</span><span class="NAME">this.options.useLinks</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="STRN">"div"</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"input"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>505</span> </span><span class="WHIT">            </span><span class="NAME">id</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this.options.browseComputerButtonId</span><span class="WHIT">
<span class='line'>506</span> </span><span class="WHIT">            </span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">className</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this.options.browseComputerButtonClass</span><span class="WHIT">
<span class='line'>507</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>508</span> </span><span class="WHIT">        </span><span class="NAME">this.browseComputerButton.onclick</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>509</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.deviceBrowserList</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>510</span> </span><span class="WHIT">                </span><span class="NAME">this.generateDeviceBrowserElement</span><span class="PUNC">(</span><span class="NAME">this.devices</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>511</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>512</span> </span><span class="WHIT">            </span><span class="NAME">this.findDevicesElement.hide</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>513</span> </span><span class="WHIT">            </span><span class="NAME">this.readDataElement.hide</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>514</span> </span><span class="WHIT">            </span><span class="NAME">this.deviceBrowserElement.show</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">         </span><span class="WHIT">
<span class='line'>515</span> </span><span class="WHIT">            </span><span class="NAME">this._displayBrowseComputer</span><span class="PUNC">(</span><span class="NAME">this.deviceBrowserList</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>516</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="PUNC">.</span><span class="NAME">bind</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>517</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.options.useLinks</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>518</span> </span><span class="WHIT">			</span><span class="NAME">this.browseComputerButton.innerHTML</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'&lt;a href="#" title="'</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">this.options.browseComputerButtonTitleText</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">'">'</span><span class="PUNC">+</span><span class="NAME">this.options.browseComputerButtonText</span><span class="PUNC">+</span><span class="STRN">'&lt;/a>'</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>519</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>520</span> </span><span class="WHIT">			</span><span class="NAME">this.browseComputerButton.type</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"button"</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>521</span> </span><span class="WHIT">			</span><span class="NAME">this.browseComputerButton.value</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.browseComputerButtonText</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>522</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>523</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this.options.uploadSelectedActivities</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="NAME">this.options.showBrowseComputer</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>524</span> </span><span class="WHIT">            </span><span class="NAME">this.browseComputerButton.hide</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>525</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>526</span> </span><span class="WHIT">		</span><span class="NAME">this.findDevicesElement.appendChild</span><span class="PUNC">(</span><span class="NAME">this.browseComputerButton</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>527</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>528</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>529</span> </span><span class="WHIT">	</span><span class="NAME">_generateSendDataElement</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>530</span> </span><span class="WHIT">		</span><span class="NAME">this.sendDataElement</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">"div"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>531</span> </span><span class="WHIT">		</span><span class="NAME">Element.extend</span><span class="PUNC">(</span><span class="NAME">this.sendDataElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>532</span> </span><span class="WHIT">		</span><span class="NAME">this.sendDataElement.id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.sendDataElementId</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>533</span> </span><span class="WHIT">		</span><span class="NAME">this.sendDataElement.addClassName</span><span class="PUNC">(</span><span class="NAME">this.options.elementClassName</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>534</span> </span><span class="WHIT">		</span><span class="NAME">this.mainElement.appendChild</span><span class="PUNC">(</span><span class="NAME">this.sendDataElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>535</span> 
<span class='line'>536</span> </span><span class="WHIT">		</span><span class="NAME">this.sendDataButton</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.options.useLinks</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="STRN">"div"</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"input"</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>537</span> </span><span class="WHIT">		</span><span class="NAME">Element.extend</span><span class="PUNC">(</span><span class="NAME">this.sendDataButton</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>538</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.options.useLinks</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>539</span> </span><span class="WHIT">			</span><span class="NAME">this.sendDataButton.innerHTML</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'&lt;a href="#">'</span><span class="PUNC">+</span><span class="NAME">this.options.sendDataButtonText</span><span class="PUNC">+</span><span class="STRN">'&lt;/a>'</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>540</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>541</span> </span><span class="WHIT">			</span><span class="NAME">this.sendDataButton.type</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"button"</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>542</span> </span><span class="WHIT">			</span><span class="NAME">this.sendDataButton.value</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.sendDataButtonText</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>543</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>544</span> </span><span class="WHIT">		</span><span class="NAME">this.sendDataButton.id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.sendDataButtonId</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>545</span> </span><span class="WHIT">		</span><span class="NAME">this.sendDataButton.addClassName</span><span class="PUNC">(</span><span class="NAME">this.options.actionButtonClassName</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>546</span> </span><span class="WHIT">        </span><span class="NAME">this.sendDataButton.onclick</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>547</span> </span><span class="WHIT">        	</span><span class="NAME">this.setStatus</span><span class="PUNC">(</span><span class="WHIT">    </span><span class="WHIT">
<span class='line'>548</span> </span><span class="WHIT">        	   </span><span class="NAME">this.evaluateTemplate</span><span class="PUNC">(</span><span class="WHIT">
<span class='line'>549</span> </span><span class="WHIT">        	       </span><span class="NAME">this.options.sendingDataToServer</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="WHIT">
<span class='line'>550</span> </span><span class="WHIT">        	       </span><span class="PUNC">{</span><span class="NAME">deviceName</span><span class="PUNC">:</span><span class="NAME">this.getShortDeviceName</span><span class="PUNC">(</span><span class="NAME">this.getCurrentDevice</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>551</span> </span><span class="WHIT">        	   </span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>552</span> </span><span class="WHIT">	        </span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>553</span> </span><span class="WHIT">        	</span><span class="NAME">Element.hide</span><span class="PUNC">(</span><span class="NAME">this.findDevicesElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>554</span> </span><span class="WHIT">	        </span><span class="NAME">Element.hide</span><span class="PUNC">(</span><span class="NAME">this.sendDataElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>555</span> </span><span class="WHIT">        	</span><span class="NAME">this.showProgressBar</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>556</span> </span><span class="WHIT">	        </span><span class="WHIT">
<span class='line'>557</span> </span><span class="WHIT">	        </span><span class="NAME">setTimeout</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this.postToServer</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">.</span><span class="NAME">bind</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NUMB">1000</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>558</span> </span><span class="WHIT">	        </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>559</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="PUNC">.</span><span class="NAME">bind</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>560</span> </span><span class="WHIT">		</span><span class="NAME">this.sendDataElement.appendChild</span><span class="PUNC">(</span><span class="NAME">this.sendDataButton</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>561</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>562</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.options.showSendDataElementOnDeviceFound</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>563</span> </span><span class="WHIT">			</span><span class="NAME">Element.hide</span><span class="PUNC">(</span><span class="NAME">this.sendDataElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>564</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>565</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>566</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>567</span> </span><span class="WHIT">	</span><span class="COMM">/** Post data to an external server.  Request options should be provided by the 
<span class='line'>568</span> 	 * parameters element in {@link Garmin.DeviceDisplayDefaultOptions.sendDataOptions} 
<span class='line'>569</span> 	 * 
<span class='line'>570</span> 	 * @see Garmin.DeviceDisplayDefaultOptions.sendDataOptions 
<span class='line'>571</span> 	 * @see Garmin.DeviceDisplay#handleException
<span class='line'>572</span> 	 * @version 1.6
<span class='line'>573</span> 	 * @param {function} callback function executed after onSuccess of the AJAX request.  If failure, exception is thrown {@link Garmin.DeviceDisplay#handleException}
<span class='line'>574</span> 	 */</span><span class="WHIT">
<span class='line'>575</span> </span><span class="WHIT">	</span><span class="NAME">postToServer</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">callback</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>576</span> </span><span class="WHIT">    	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">error</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>577</span> </span><span class="WHIT">    	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">exceptionName</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'RemoteTransferException'</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>578</span> </span><span class="WHIT">    	</span><span class="WHIT">
<span class='line'>579</span> </span><span class="WHIT">    	</span><span class="COMM">// getSendOptions overwrites those already set in sendDataOptions</span><span class="WHIT">
<span class='line'>580</span> </span><span class="WHIT">    	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.options.sendDataOptions</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>581</span> </span><span class="WHIT">    	    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.options.getSendOptions</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>582</span> </span><span class="WHIT">    	        </span><span class="NAME">this.options.sendDataOptions</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.getSendOptions.call</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.options.sendDataOptions</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.garminController.getCurrentDeviceXml</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.readDataString</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>583</span> </span><span class="WHIT">    	    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>584</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>585</span> </span><span class="WHIT">    	</span><span class="WHIT">
<span class='line'>586</span> </span><span class="WHIT">		</span><span class="NAME">this.options.sendDataOptions.onSuccess</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">xhr</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>587</span> </span><span class="WHIT">			</span><span class="NAME">this.xhr</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">xhr</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>588</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.options.afterFinishSendData</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>589</span> </span><span class="WHIT">				</span><span class="KEYW">try</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>590</span> </span><span class="WHIT">					</span><span class="NAME">this.options.afterFinishSendData.call</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="WHIT">
<span class='line'>591</span> </span><span class="WHIT">						</span><span class="NAME">this.xhr</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="WHIT">
<span class='line'>592</span> </span><span class="WHIT">						</span><span class="NAME">this.currentActivityStatusElement</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>593</span> </span><span class="WHIT">						</span><span class="NAME">this.activityDirectory</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="WHIT">
<span class='line'>594</span> </span><span class="WHIT">						</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>595</span> </span><span class="WHIT">				</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">catch</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">error</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>596</span> </span><span class="WHIT">					</span><span class="NAME">this.handleException</span><span class="PUNC">(</span><span class="NAME">error</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>597</span> </span><span class="WHIT">				</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>598</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>599</span> </span><span class="WHIT">			</span><span class="NAME">callback.call</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>600</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="PUNC">.</span><span class="NAME">bind</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>601</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>602</span> </span><span class="WHIT">		</span><span class="NAME">this.options.sendDataOptions.onComplete</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">xhr</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>603</span> </span><span class="WHIT">			</span><span class="COMM">// Cross domain...</span><span class="WHIT">
<span class='line'>604</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">xhr</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>605</span> </span><span class="WHIT">				</span><span class="NAME">error</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Error</span><span class="PUNC">(</span><span class="NAME">Garmin.RemoteTransfer.MESSAGES.generalException</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>606</span> </span><span class="WHIT">				</span><span class="NAME">error.name</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">exceptionName</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>607</span> </span><span class="WHIT">				</span><span class="NAME">error.xhr</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">xhr</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>608</span> </span><span class="WHIT">				</span><span class="NAME">this.handleException</span><span class="PUNC">(</span><span class="NAME">error</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>609</span> </span><span class="WHIT">				</span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Error</span><span class="PUNC">(</span><span class="NAME">Garmin.RemoteTransfer.MESSAGES.noResponseException</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>610</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>611</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="PUNC">.</span><span class="NAME">bind</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>612</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>613</span> </span><span class="WHIT">		</span><span class="NAME">this.options.sendDataOptions.onFailure</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">xhr</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>614</span> </span><span class="WHIT">			</span><span class="NAME">error</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Error</span><span class="PUNC">(</span><span class="NAME">xhr.statusText</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>615</span> </span><span class="WHIT">			</span><span class="NAME">error.name</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">exceptionName</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>616</span> </span><span class="WHIT">			</span><span class="NAME">error.xhr</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">xhr</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>617</span> </span><span class="WHIT">			</span><span class="NAME">this.handleException</span><span class="PUNC">(</span><span class="NAME">error</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>618</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="PUNC">.</span><span class="NAME">bind</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>619</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>620</span> </span><span class="WHIT">		</span><span class="COMM">// Make the request</span><span class="WHIT">
<span class='line'>621</span> </span><span class="WHIT">		</span><span class="NAME">this.apiResponse</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.garminRemoteTransfer.openRequest</span><span class="PUNC">(</span><span class="NAME">this.options.sendDataUrl</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.options.sendDataOptions</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>622</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>623</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>624</span> </span><span class="WHIT">    </span><span class="COMM">/* Build read data UI components.
<span class='line'>625</span>      * @private
<span class='line'>626</span>      */</span><span class="WHIT">
<span class='line'>627</span> </span><span class="WHIT">	</span><span class="NAME">_generateReadDataElement</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>628</span> </span><span class="WHIT">		</span><span class="NAME">this.readDataElement</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">"div"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>629</span> </span><span class="WHIT">		</span><span class="NAME">Element.extend</span><span class="PUNC">(</span><span class="NAME">this.readDataElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>630</span> </span><span class="WHIT">		</span><span class="NAME">this.readDataElement.id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.readDataElementId</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>631</span> </span><span class="WHIT">		</span><span class="NAME">this.readDataElement.addClassName</span><span class="PUNC">(</span><span class="NAME">this.options.elementClassName</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>632</span> </span><span class="WHIT">		</span><span class="NAME">this.mainElement.appendChild</span><span class="PUNC">(</span><span class="NAME">this.readDataElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>633</span> 
<span class='line'>634</span> </span><span class="WHIT">		</span><span class="NAME">this.readDataButton</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.options.useLinks</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="STRN">"div"</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"input"</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>635</span> </span><span class="WHIT">		</span><span class="NAME">Element.extend</span><span class="PUNC">(</span><span class="NAME">this.readDataButton</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>636</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.options.useLinks</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>637</span> </span><span class="WHIT">			</span><span class="NAME">this.readDataButton.innerHTML</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'&lt;a href="#" title="'</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">this.options.readDataButtonTitleText</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">'">'</span><span class="PUNC">+</span><span class="NAME">this.options.readDataButtonText</span><span class="PUNC">+</span><span class="STRN">'&lt;/a>'</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>638</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>639</span> </span><span class="WHIT">			</span><span class="NAME">this.readDataButton.type</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"button"</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>640</span> </span><span class="WHIT">			</span><span class="NAME">this.readDataButton.value</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.readDataButtonText</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>641</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>642</span> </span><span class="WHIT">		</span><span class="NAME">this.readDataButton.id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.readDataButtonId</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>643</span> </span><span class="WHIT">		</span><span class="NAME">this.readDataButton.addClassName</span><span class="PUNC">(</span><span class="NAME">this.options.actionButtonClassName</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>644</span> </span><span class="WHIT">		</span><span class="NAME">this.readDataButton.disabled</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>645</span> </span><span class="WHIT">        </span><span class="NAME">this.readDataButton.onclick</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>646</span> </span><span class="WHIT">            </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">isSupportedDevice</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>647</span> </span><span class="WHIT">        	</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.options.restrictByDevice.length</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>648</span> </span><span class="WHIT">				</span><span class="NAME">isSupportedDevice</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._restrictByDevice</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>649</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">						</span><span class="WHIT">
<span class='line'>650</span> </span><span class="WHIT">			</span><span class="WHIT">
<span class='line'>651</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">isSupportedDevice</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>652</span> </span><span class="WHIT">            	</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.options.autoHideUnusedElements</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>653</span> </span><span class="WHIT">            		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.findDevicesElement</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">Element.hide</span><span class="PUNC">(</span><span class="NAME">this.findDevicesElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>654</span> </span><span class="WHIT">            		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.readDataElement</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">Element.hide</span><span class="PUNC">(</span><span class="NAME">this.readDataElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>655</span> </span><span class="WHIT">            		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.deviceSelectElement</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">Element.hide</span><span class="PUNC">(</span><span class="NAME">this.deviceSelectElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>656</span> </span><span class="WHIT">            		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.activityDirectoryElement</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">Element.hide</span><span class="PUNC">(</span><span class="NAME">this.activityDirectoryElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>657</span> </span><span class="WHIT">            	</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>658</span> </span><span class="WHIT">            	</span><span class="NAME">this.readDataButton.disabled</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>659</span> </span><span class="WHIT">            	</span><span class="NAME">this.cancelReadDataButton.disabled</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>660</span> </span><span class="WHIT">            	</span><span class="NAME">this.showProgressBar</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>661</span> </span><span class="WHIT">            	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.options.showReadDataTypesSelect</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>662</span> </span><span class="WHIT">            		</span><span class="NAME">this.readSpecificTypeFromDevice</span><span class="PUNC">(</span><span class="NAME">this.readDataTypesSelect.value</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>663</span> </span><span class="WHIT">            	</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.options.readDataTypes</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">				</span><span class="WHIT">
<span class='line'>664</span> </span><span class="WHIT">					</span><span class="NAME">this.readFromDevice</span><span class="PUNC">(</span><span class="NAME">this.options.readDataTypes</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">					</span><span class="WHIT">
<span class='line'>665</span> </span><span class="WHIT">            	</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>666</span> </span><span class="WHIT">					</span><span class="NAME">this.readFromDevice</span><span class="PUNC">(</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Array</span><span class="PUNC">(</span><span class="NAME">this.options.readDataType</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>667</span> </span><span class="WHIT">				</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>668</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>669</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="PUNC">.</span><span class="NAME">bind</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>670</span> </span><span class="WHIT">		</span><span class="NAME">this.readDataElement.appendChild</span><span class="PUNC">(</span><span class="NAME">this.readDataButton</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>671</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this.options.showReadDataButton</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>672</span> </span><span class="WHIT">            </span><span class="NAME">Element.hide</span><span class="PUNC">(</span><span class="NAME">this.readDataButton</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>673</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>674</span> 
<span class='line'>675</span> </span><span class="WHIT">		</span><span class="NAME">this.cancelReadDataButton</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.options.useLinks</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="STRN">"div"</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"input"</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>676</span> </span><span class="WHIT">		</span><span class="NAME">Element.extend</span><span class="PUNC">(</span><span class="NAME">this.cancelReadDataButton</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>677</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.options.useLinks</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>678</span> </span><span class="WHIT">			</span><span class="NAME">this.cancelReadDataButton.innerHTML</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'&lt;a href="#">'</span><span class="PUNC">+</span><span class="NAME">this.options.cancelReadDataButtonText</span><span class="PUNC">+</span><span class="STRN">'&lt;/a>'</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>679</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>680</span> </span><span class="WHIT">			</span><span class="NAME">this.cancelReadDataButton.type</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"button"</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>681</span> </span><span class="WHIT">			</span><span class="NAME">this.cancelReadDataButton.value</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.cancelReadDataButtonText</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>682</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>683</span> </span><span class="WHIT">		</span><span class="NAME">this.cancelReadDataButton.id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.cancelReadDataButtonId</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>684</span> </span><span class="WHIT">		</span><span class="NAME">this.cancelReadDataButton.addClassName</span><span class="PUNC">(</span><span class="NAME">this.options.actionButtonClassName</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>685</span> </span><span class="WHIT">		</span><span class="NAME">this.cancelReadDataButton.disabled</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>686</span> </span><span class="WHIT">        </span><span class="NAME">this.cancelReadDataButton.onclick</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>687</span> </span><span class="WHIT">        	</span><span class="NAME">this.resetUI</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>688</span> </span><span class="WHIT">         	</span><span class="NAME">this.hideProgressBar</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>689</span> </span><span class="WHIT">        	</span><span class="NAME">this.getController</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">cancelReadFromDevice</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>690</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="PUNC">.</span><span class="NAME">bind</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>691</span> </span><span class="WHIT">		</span><span class="NAME">this.readDataElement.appendChild</span><span class="PUNC">(</span><span class="NAME">this.cancelReadDataButton</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>692</span> 
<span class='line'>693</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this.options.showCancelReadDataButton</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>694</span> </span><span class="WHIT">			</span><span class="NAME">Element.hide</span><span class="PUNC">(</span><span class="NAME">this.cancelReadDataButton</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>695</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>696</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>697</span> </span><span class="WHIT">		</span><span class="COMM">/* Upload without showing selection table */</span><span class="WHIT">
<span class='line'>698</span> </span><span class="WHIT">		</span><span class="NAME">this.uploadNewButton</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.options.useLinks</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="STRN">"div"</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"input"</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>699</span> </span><span class="WHIT">		</span><span class="NAME">Element.extend</span><span class="PUNC">(</span><span class="NAME">this.uploadNewButton</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>700</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.options.useLinks</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>701</span> </span><span class="WHIT">			</span><span class="NAME">this.uploadNewButton.innerHTML</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'&lt;a href="#" title="'</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">this.options.uploadNewButtonTitleText</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">'">'</span><span class="PUNC">+</span><span class="NAME">this.options.uploadNewButtonText</span><span class="PUNC">+</span><span class="STRN">'&lt;/a>'</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>702</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>703</span> </span><span class="WHIT">			</span><span class="NAME">this.uploadNewButton.type</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"button"</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>704</span> </span><span class="WHIT">			</span><span class="NAME">this.uploadNewButton.value</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.uploadNewButtonText</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>705</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>706</span> </span><span class="WHIT">		</span><span class="NAME">this.uploadNewButton.id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.uploadNewButtonId</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>707</span> </span><span class="WHIT">		</span><span class="NAME">this.uploadNewButton.addClassName</span><span class="PUNC">(</span><span class="NAME">this.options.actionButtonClassName</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>708</span> </span><span class="WHIT">        </span><span class="NAME">this.uploadNewButton.onclick</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>709</span> </span><span class="WHIT">			</span><span class="WHIT">
<span class='line'>710</span> </span><span class="WHIT">			</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">isSupportedDevice</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>711</span> </span><span class="WHIT">        	</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.options.restrictByDevice.length</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>712</span> </span><span class="WHIT">				</span><span class="NAME">isSupportedDevice</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._restrictByDevice</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>713</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">						</span><span class="WHIT">
<span class='line'>714</span> </span><span class="WHIT">			</span><span class="WHIT">
<span class='line'>715</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">isSupportedDevice</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>716</span> </span><span class="WHIT">	        	</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.options.autoHideUnusedElements</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>717</span> </span><span class="WHIT">                    </span><span class="NAME">this.advancedUploadMode</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>718</span> </span><span class="WHIT">	        		</span><span class="NAME">this.readDataElement.hide</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>719</span> </span><span class="WHIT">	        		</span><span class="NAME">this.browseComputerButton.hide</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>720</span> </span><span class="WHIT">	        		</span><span class="NAME">this.uploadProgressBar.hide</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>721</span> </span><span class="WHIT">	        		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.changeDeviceElement</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="NAME">this.changeDeviceElement.hide</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>722</span> </span><span class="WHIT">	        		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.connectedDevices</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="NAME">this.connectedDevices.hide</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>723</span> </span><span class="WHIT">	        		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.deviceSelectInput</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">this.deviceSelectInput.hide</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>724</span> </span><span class="WHIT">	        		</span><span class="WHIT">
<span class='line'>725</span> </span><span class="WHIT">	        		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.loadingContentElement</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>726</span> </span><span class="WHIT">                        </span><span class="NAME">this._generateLoadingContent</span><span class="PUNC">(</span><span class="NAME">this.statusElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>727</span> </span><span class="WHIT">                        </span><span class="NAME">this.loadingContentElement.className</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"longStatus"</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>728</span> </span><span class="WHIT">                        </span><span class="NAME">this.progressBar.className</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"longProgressBar"</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>729</span> </span><span class="WHIT">                        </span><span class="NAME">this.progressBarText.className</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"longProgressText"</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>730</span> </span><span class="WHIT">	        		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>731</span> </span><span class="WHIT">	        	</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>732</span> </span><span class="WHIT">	        	</span><span class="NAME">this.readDataButton.disabled</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>733</span> </span><span class="WHIT">	        	</span><span class="NAME">this.cancelReadDataButton.disabled</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>734</span> </span><span class="WHIT">	        	</span><span class="WHIT">
<span class='line'>735</span> </span><span class="WHIT">	        	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.options.showReadDataTypesSelect</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>736</span> </span><span class="WHIT">	        		</span><span class="NAME">this.readSpecificTypeFromDevice</span><span class="PUNC">(</span><span class="NAME">this.readDataTypesSelect.value</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>737</span> </span><span class="WHIT">	        	</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.options.readDataTypes</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">					</span><span class="WHIT">
<span class='line'>738</span> </span><span class="WHIT">            	    </span><span class="NAME">this.readFromDevice</span><span class="PUNC">(</span><span class="NAME">this.options.readDataTypes</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>739</span> </span><span class="WHIT">            	</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>740</span> </span><span class="WHIT">					</span><span class="NAME">this.readFromDevice</span><span class="PUNC">(</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Array</span><span class="PUNC">(</span><span class="NAME">this.options.readDataType</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>741</span> </span><span class="WHIT">				</span><span class="PUNC">}</span><span class="WHIT"> 	        	</span><span class="WHIT">
<span class='line'>742</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>743</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="PUNC">.</span><span class="NAME">bind</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>744</span> </span><span class="WHIT">		</span><span class="NAME">this.readDataElement.appendChild</span><span class="PUNC">(</span><span class="NAME">this.uploadNewButton</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>745</span> 
<span class='line'>746</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this.options.showUploadNewButton</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>747</span> </span><span class="WHIT">			</span><span class="NAME">Element.hide</span><span class="PUNC">(</span><span class="NAME">this.uploadNewButton</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>748</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>749</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>750</span> </span><span class="WHIT">		</span><span class="COMM">/* Upload Health Data */</span><span class="WHIT">
<span class='line'>751</span> </span><span class="WHIT">		</span><span class="NAME">this.uploadHealthDataButton</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.options.useLinks</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="STRN">"div"</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"input"</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>752</span> </span><span class="WHIT">		</span><span class="NAME">Element.extend</span><span class="PUNC">(</span><span class="NAME">this.uploadHealthDataButton</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>753</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.options.useLinks</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>754</span> </span><span class="WHIT">			</span><span class="NAME">this.uploadHealthDataButton.innerHTML</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'&lt;a href="#" title="'</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">this.options.uploadHealthDataButtonTitleText</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">'">'</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">this.options.uploadHealthDataButtonText</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">'&lt;/a>'</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>755</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>756</span> </span><span class="WHIT">			</span><span class="NAME">this.uploadHealthDataButton.type</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"button"</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>757</span> </span><span class="WHIT">			</span><span class="NAME">this.uploadHealthDataButton.value</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.uploadHealthDataButtonText</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>758</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>759</span> </span><span class="WHIT">		</span><span class="NAME">this.uploadHealthDataButton.id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.uploadHealthDataButtonId</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>760</span> </span><span class="WHIT">		</span><span class="NAME">this.uploadHealthDataButton.addClassName</span><span class="PUNC">(</span><span class="NAME">this.options.actionButtonClassName</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>761</span> </span><span class="WHIT">        </span><span class="NAME">this.uploadHealthDataButton.onclick</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>762</span> </span><span class="WHIT">			</span><span class="WHIT">
<span class='line'>763</span> </span><span class="WHIT">			</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">isSupportedDevice</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>764</span> </span><span class="WHIT">        	</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.options.restrictByDevice.length</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>765</span> </span><span class="WHIT">				</span><span class="NAME">isSupportedDevice</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._restrictByDevice</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>766</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">						</span><span class="WHIT">
<span class='line'>767</span> </span><span class="WHIT">			</span><span class="WHIT">
<span class='line'>768</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">isSupportedDevice</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>769</span> </span><span class="WHIT">	        	</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.options.autoHideUnusedElements</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>770</span> </span><span class="WHIT">                    </span><span class="NAME">this.advancedUploadMode</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>771</span> </span><span class="WHIT">	        		</span><span class="NAME">this.uploadNewButton.hide</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>772</span> </span><span class="WHIT">	        		</span><span class="NAME">this.readDataElement.hide</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>773</span> </span><span class="WHIT">	        		</span><span class="NAME">this.browseComputerButton.hide</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>774</span> </span><span class="WHIT">	        		</span><span class="NAME">this.uploadProgressBar.hide</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>775</span> </span><span class="WHIT">	        		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.changeDeviceElement</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="NAME">this.changeDeviceElement.hide</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>776</span> </span><span class="WHIT">	        		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.connectedDevices</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="NAME">this.connectedDevices.hide</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>777</span> </span><span class="WHIT">	        		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.deviceSelectInput</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">this.deviceSelectInput.hide</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>778</span> </span><span class="WHIT">	        		</span><span class="WHIT">
<span class='line'>779</span> </span><span class="WHIT">	        		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.loadingContentElement</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>780</span> </span><span class="WHIT">                        </span><span class="NAME">this._generateLoadingContent</span><span class="PUNC">(</span><span class="NAME">this.statusElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>781</span> </span><span class="WHIT">                        </span><span class="NAME">this.loadingContentElement.className</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"longStatus"</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>782</span> </span><span class="WHIT">                        </span><span class="NAME">this.progressBar.className</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"longProgressBar"</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>783</span> </span><span class="WHIT">                        </span><span class="NAME">this.progressBarText.className</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"longProgressText"</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>784</span> </span><span class="WHIT">	        		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>785</span> </span><span class="WHIT">	        	</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>786</span> </span><span class="WHIT">	        	</span><span class="NAME">this.uploadNewButton.disabled</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>787</span> </span><span class="WHIT">	        	</span><span class="NAME">this.readDataButton.disabled</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>788</span> </span><span class="WHIT">	        	</span><span class="NAME">this.cancelReadDataButton.disabled</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>789</span> </span><span class="WHIT">	        	</span><span class="WHIT">
<span class='line'>790</span> </span><span class="WHIT">	        	</span><span class="NAME">this.readFromDevice</span><span class="PUNC">(</span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Array</span><span class="PUNC">(</span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.fitHealthData</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">      	</span><span class="WHIT">
<span class='line'>791</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>792</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="PUNC">.</span><span class="NAME">bind</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>793</span> </span><span class="WHIT">		</span><span class="NAME">this.readDataElement.appendChild</span><span class="PUNC">(</span><span class="NAME">this.uploadHealthDataButton</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>794</span> 
<span class='line'>795</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this.options.showHealthDataUploadButton</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>796</span> </span><span class="WHIT">			</span><span class="NAME">Element.hide</span><span class="PUNC">(</span><span class="NAME">this.uploadHealthDataButton</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>797</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>798</span> 
<span class='line'>799</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.options.showReadDataTypesSelect</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>800</span> </span><span class="WHIT">			</span><span class="NAME">this.readDataTypesSelect</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">"select"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>801</span> </span><span class="WHIT">			</span><span class="NAME">Element.extend</span><span class="PUNC">(</span><span class="NAME">this.readDataTypesSelect</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>802</span> </span><span class="WHIT">			</span><span class="NAME">this.readDataTypesSelect.id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.readDataTypeSelectId</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>803</span> </span><span class="WHIT">			</span><span class="NAME">this.readDataTypesSelect.disabled</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>804</span> </span><span class="WHIT">			</span><span class="NAME">this.readDataElement.appendChild</span><span class="PUNC">(</span><span class="NAME">this.readDataTypesSelect</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>805</span> 
<span class='line'>806</span> </span><span class="WHIT">			</span><span class="COMM">// TODO: need a more elegant way of adding options</span><span class="WHIT">
<span class='line'>807</span> </span><span class="WHIT">			</span><span class="NAME">this.readDataTypesSelect.options</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Option</span><span class="PUNC">(</span><span class="NAME">this.options.gpsData</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.gpx</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>808</span> </span><span class="WHIT">			</span><span class="NAME">this.readDataTypesSelect.options</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Option</span><span class="PUNC">(</span><span class="NAME">this.options.trainingData</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.tcx</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">			</span><span class="WHIT">
<span class='line'>809</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>810</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>811</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.options.showReadRoutesSelect</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>812</span> </span><span class="WHIT">			</span><span class="NAME">this.readRoutesElement</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">"div"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>813</span> </span><span class="WHIT">			</span><span class="NAME">Element.extend</span><span class="PUNC">(</span><span class="NAME">this.readRoutesElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>814</span> </span><span class="WHIT">			</span><span class="NAME">this.readRoutesElement.id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.readRoutesElementId</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>815</span> </span><span class="WHIT">			</span><span class="NAME">this.readRoutesElement.addClassName</span><span class="PUNC">(</span><span class="NAME">this.options.readResultsElementClass</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>816</span> </span><span class="WHIT">			</span><span class="NAME">this.readRoutesElement.innerHTML</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"&lt;span id=\""</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">this.options.readRoutesSelectLabelId</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">"\">"</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">this.options.readRoutesSelectLabel</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">"&lt;/span>"</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>817</span> 
<span class='line'>818</span> </span><span class="WHIT">			</span><span class="NAME">this.readRoutesSelect</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">"select"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>819</span> </span><span class="WHIT">			</span><span class="NAME">Element.extend</span><span class="PUNC">(</span><span class="NAME">this.readRoutesSelect</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>820</span> </span><span class="WHIT">			</span><span class="NAME">this.readRoutesSelect.id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.readRoutesSelectId</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>821</span> </span><span class="WHIT">			</span><span class="NAME">this.readRoutesSelect.addClassName</span><span class="PUNC">(</span><span class="NAME">this.options.readResultsSelectClass</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>822</span> </span><span class="WHIT">			</span><span class="NAME">this.readRoutesSelect.disabled</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>823</span> </span><span class="WHIT">			</span><span class="NAME">this.readRoutesSelect.onchange</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>824</span> </span><span class="WHIT">				</span><span class="NAME">this.displayTrack</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this._seriesFromSelect</span><span class="PUNC">(</span><span class="NAME">this.readRoutesSelect</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>825</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="PUNC">.</span><span class="NAME">bind</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>826</span> </span><span class="WHIT">			</span><span class="NAME">this.readRoutesElement.appendChild</span><span class="PUNC">(</span><span class="NAME">this.readRoutesSelect</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>827</span> </span><span class="WHIT">			</span><span class="NAME">this.readDataElement.appendChild</span><span class="PUNC">(</span><span class="NAME">this.readRoutesElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>828</span> </span><span class="WHIT">			</span><span class="WHIT">
<span class='line'>829</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this.options.showReadResultsSelectOnLoad</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>830</span> </span><span class="WHIT">				</span><span class="NAME">Element.hide</span><span class="PUNC">(</span><span class="NAME">this.readRoutesElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>831</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>832</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>833</span> 
<span class='line'>834</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.options.showReadTracksSelect</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>835</span> </span><span class="WHIT">			</span><span class="NAME">this.readTracksElement</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">"div"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>836</span> </span><span class="WHIT">			</span><span class="NAME">Element.extend</span><span class="PUNC">(</span><span class="NAME">this.readTracksElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>837</span> </span><span class="WHIT">			</span><span class="NAME">this.readTracksElement.id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.readTracksElementId</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>838</span> </span><span class="WHIT">			</span><span class="NAME">this.readTracksElement.addClassName</span><span class="PUNC">(</span><span class="NAME">this.options.readResultsElementClass</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>839</span> </span><span class="WHIT">			</span><span class="NAME">this.readTracksElement.innerHTML</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"&lt;span id=\""</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">this.options.readTracksSelectLabelId</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">"\">"</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">this.options.readTracksSelectLabel</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">"&lt;/span>"</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>840</span> 
<span class='line'>841</span> </span><span class="WHIT">			</span><span class="NAME">this.readTracksSelect</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">"select"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>842</span> </span><span class="WHIT">			</span><span class="NAME">Element.extend</span><span class="PUNC">(</span><span class="NAME">this.readTracksSelect</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>843</span> </span><span class="WHIT">			</span><span class="NAME">this.readTracksSelect.id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.readTracksSelectId</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>844</span> </span><span class="WHIT">			</span><span class="NAME">this.readTracksSelect.addClassName</span><span class="PUNC">(</span><span class="NAME">this.options.readResultsSelectClass</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>845</span> </span><span class="WHIT">			</span><span class="NAME">this.readTracksSelect.disabled</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>846</span> </span><span class="WHIT">			</span><span class="NAME">this.readTracksSelect.onchange</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>847</span> </span><span class="WHIT">				</span><span class="NAME">this.displayTrack</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this._seriesFromSelect</span><span class="PUNC">(</span><span class="NAME">this.readTracksSelect</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>848</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="PUNC">.</span><span class="NAME">bind</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>849</span> </span><span class="WHIT">			</span><span class="NAME">this.readTracksElement.appendChild</span><span class="PUNC">(</span><span class="NAME">this.readTracksSelect</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>850</span> </span><span class="WHIT">			</span><span class="NAME">this.readDataElement.appendChild</span><span class="PUNC">(</span><span class="NAME">this.readTracksElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>851</span> </span><span class="WHIT">			</span><span class="WHIT">
<span class='line'>852</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this.options.showReadResultsSelectOnLoad</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>853</span> </span><span class="WHIT">				</span><span class="NAME">Element.hide</span><span class="PUNC">(</span><span class="NAME">this.readTracksElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>854</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>855</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>856</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>857</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.options.showReadWaypointsSelect</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>858</span> </span><span class="WHIT">			</span><span class="NAME">this.readWaypointsElement</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">"div"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>859</span> </span><span class="WHIT">			</span><span class="NAME">Element.extend</span><span class="PUNC">(</span><span class="NAME">this.readWaypointsElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>860</span> </span><span class="WHIT">			</span><span class="NAME">this.readWaypointsElement.id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.readWaypointsElementId</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>861</span> </span><span class="WHIT">			</span><span class="NAME">this.readWaypointsElement.addClassName</span><span class="PUNC">(</span><span class="NAME">this.options.readResultsElementClass</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>862</span> </span><span class="WHIT">			</span><span class="NAME">this.readWaypointsElement.innerHTML</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"&lt;span id=\""</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">this.options.readWaypointsSelectLabelId</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">"\">"</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">this.options.readWaypointsSelectLabel</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">"&lt;/span>"</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>863</span> 
<span class='line'>864</span> </span><span class="WHIT">			</span><span class="NAME">this.readWaypointsSelect</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">"select"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>865</span> </span><span class="WHIT">			</span><span class="NAME">Element.extend</span><span class="PUNC">(</span><span class="NAME">this.readWaypointsSelect</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>866</span> </span><span class="WHIT">			</span><span class="NAME">this.readWaypointsSelect.id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.readWaypointsSelectId</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>867</span> </span><span class="WHIT">			</span><span class="NAME">this.readWaypointsSelect.addClassName</span><span class="PUNC">(</span><span class="NAME">this.options.readResultsSelectClass</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>868</span> </span><span class="WHIT">			</span><span class="NAME">this.readWaypointsSelect.disabled</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>869</span> </span><span class="WHIT">			</span><span class="NAME">this.readWaypointsSelect.onchange</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>870</span> </span><span class="WHIT">				</span><span class="NAME">this.displayWaypoint</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this._seriesFromSelect</span><span class="PUNC">(</span><span class="NAME">this.readWaypointsSelect</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>871</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="PUNC">.</span><span class="NAME">bind</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>872</span> </span><span class="WHIT">			</span><span class="NAME">this.readWaypointsElement.appendChild</span><span class="PUNC">(</span><span class="NAME">this.readWaypointsSelect</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>873</span> </span><span class="WHIT">			</span><span class="NAME">this.readDataElement.appendChild</span><span class="PUNC">(</span><span class="NAME">this.readWaypointsElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>874</span> </span><span class="WHIT">			</span><span class="WHIT">
<span class='line'>875</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this.options.showReadResultsSelectOnLoad</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>876</span> </span><span class="WHIT">				</span><span class="NAME">Element.hide</span><span class="PUNC">(</span><span class="NAME">this.readWaypointsElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>877</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>878</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>879</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>880</span> </span><span class="WHIT">		</span><span class="COMM">// Read Tracks Google Map</span><span class="WHIT">
<span class='line'>881</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.options.showReadGoogleMap</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>882</span> </span><span class="WHIT">			</span><span class="NAME">this.readGoogleMap</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">"div"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>883</span> </span><span class="WHIT">			</span><span class="NAME">Element.extend</span><span class="PUNC">(</span><span class="NAME">this.readGoogleMap</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>884</span> </span><span class="WHIT">			</span><span class="NAME">this.readGoogleMap.id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.readGoogleMapId</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>885</span> </span><span class="WHIT">			</span><span class="NAME">this.readGoogleMap.addClassName</span><span class="PUNC">(</span><span class="NAME">this.options.readResultsElementClass</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>886</span> </span><span class="WHIT">			</span><span class="NAME">this.readDataElement.appendChild</span><span class="PUNC">(</span><span class="NAME">this.readGoogleMap</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">			</span><span class="WHIT">
<span class='line'>887</span> </span><span class="WHIT">			</span><span class="NAME">this.readMapController</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Garmin.MapController</span><span class="PUNC">(</span><span class="NAME">this.options.readGoogleMapId</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>888</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>889</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>890</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.options.showReadDataElementOnDeviceFound</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>891</span> </span><span class="WHIT">			</span><span class="NAME">Element.hide</span><span class="PUNC">(</span><span class="NAME">this.readDataElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>892</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>893</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>894</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>895</span> </span><span class="WHIT">	</span><span class="NAME">doesDeviceSupportDataType</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">dataType</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>896</span> </span><span class="WHIT">	</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>897</span> </span><span class="WHIT">		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">result</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>898</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>899</span> </span><span class="WHIT">		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">deviceNumber</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getController</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">deviceNumber</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>900</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">deviceNumber</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>901</span> </span><span class="WHIT">		</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>902</span> </span><span class="WHIT">			</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">device</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getController</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getDevices</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">[</span><span class="NAME">deviceNumber</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>903</span> </span><span class="WHIT">			</span><span class="WHIT">
<span class='line'>904</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">device.supportDeviceDataTypeRead</span><span class="PUNC">(</span><span class="NAME">dataType</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>905</span> </span><span class="WHIT">				</span><span class="NAME">result</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>906</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>907</span> </span><span class="WHIT">		</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">result</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>908</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>909</span> 
<span class='line'>910</span> </span><span class="WHIT">    </span><span class="COMM">/* Generates the activity directory element.  Only one instance of the directory
<span class='line'>911</span>      * can exist on a page.
<span class='line'>912</span>      *  
<span class='line'>913</span>      * @private 
<span class='line'>914</span>      */</span><span class="WHIT">
<span class='line'>915</span> </span><span class="WHIT">	</span><span class="NAME">_generateActivityDirectoryElement</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>916</span> </span><span class="WHIT">	    </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.activityDirectoryElement</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>917</span> </span><span class="WHIT">	        </span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Error</span><span class="PUNC">(</span><span class="STRN">"Unable to generate activity directory because an instance already exists."</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>918</span> </span><span class="WHIT">	    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>919</span> </span><span class="WHIT">		</span><span class="COMM">// Create the container div to hold the directory elements</span><span class="WHIT">
<span class='line'>920</span> </span><span class="WHIT">		</span><span class="NAME">this.activityDirectoryElement</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">"div"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>921</span> </span><span class="WHIT">		</span><span class="NAME">Element.extend</span><span class="PUNC">(</span><span class="NAME">this.activityDirectoryElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>922</span> </span><span class="WHIT">		</span><span class="NAME">this.activityDirectoryElement.id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.activityDirectoryElementId</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>923</span> </span><span class="WHIT">		</span><span class="NAME">this.activityDirectoryElement.addClassName</span><span class="PUNC">(</span><span class="NAME">this.options.activityDirectoryClass</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>924</span> </span><span class="WHIT">		</span><span class="NAME">this.activityDirectoryElement.hide</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>925</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>926</span> </span><span class="WHIT">		</span><span class="NAME">this.mainElement.appendChild</span><span class="PUNC">(</span><span class="NAME">this.activityDirectoryElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>927</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>928</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>929</span> </span><span class="WHIT">	</span><span class="NAME">_generateActivityTableElement</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>930</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.activityTable</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>931</span> </span><span class="WHIT">		    </span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Error</span><span class="PUNC">(</span><span class="STRN">"Unable to generate activity table with id "</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">this.options.activityTableId</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">" because an instance already exists."</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>932</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>933</span> </span><span class="WHIT">		</span><span class="NAME">this.activities</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>934</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>935</span> </span><span class="WHIT">        </span><span class="NAME">this._generateActivityTableHeader</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>936</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>937</span> </span><span class="WHIT">		</span><span class="COMM">// Create container div that holds the table data only</span><span class="WHIT">
<span class='line'>938</span> </span><span class="WHIT">		</span><span class="NAME">this.activityDirectoryData</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">"div"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>939</span> </span><span class="WHIT">		</span><span class="NAME">Element.extend</span><span class="PUNC">(</span><span class="NAME">this.activityDirectoryData</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>940</span> </span><span class="WHIT">		</span><span class="NAME">this.activityDirectoryData.id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.activityDirectoryDataId</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>941</span> </span><span class="WHIT">		</span><span class="NAME">this.activityDirectoryElement.appendChild</span><span class="PUNC">(</span><span class="NAME">this.activityDirectoryData</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>942</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>943</span> </span><span class="WHIT">		</span><span class="COMM">// Create the table</span><span class="WHIT">
<span class='line'>944</span> </span><span class="WHIT">		</span><span class="NAME">this.activityTable</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">"table"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>945</span> </span><span class="WHIT">		</span><span class="NAME">Element.extend</span><span class="PUNC">(</span><span class="NAME">this.activityTable</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>946</span> </span><span class="WHIT">		</span><span class="NAME">this.activityTable.id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.activityTableId</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>947</span> </span><span class="WHIT">		</span><span class="NAME">this.activityTable.setAttribute</span><span class="PUNC">(</span><span class="STRN">'cellspacing'</span><span class="PUNC">,</span><span class="STRN">'0'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>948</span> </span><span class="WHIT">		</span><span class="NAME">this.activityTable.setAttribute</span><span class="PUNC">(</span><span class="STRN">'cellpadding'</span><span class="PUNC">,</span><span class="STRN">'0'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>949</span> </span><span class="WHIT">		</span><span class="NAME">this.activityDirectoryData.appendChild</span><span class="PUNC">(</span><span class="NAME">this.activityTable</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>950</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>951</span> </span><span class="WHIT">		</span><span class="NAME">this.readSelectedButton</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.options.useLinks</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="STRN">"div"</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"input"</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>952</span> </span><span class="WHIT">		</span><span class="NAME">Element.extend</span><span class="PUNC">(</span><span class="NAME">this.readSelectedButton</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>953</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.options.useLinks</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>954</span> </span><span class="WHIT">			</span><span class="NAME">this.readSelectedButton.innerHTML</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'&lt;a href="#">'</span><span class="PUNC">+</span><span class="NAME">this.options.readSelectedButtonText</span><span class="PUNC">+</span><span class="STRN">'&lt;/a>'</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>955</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>956</span> </span><span class="WHIT">			</span><span class="NAME">this.readSelectedButton.type</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"button"</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>957</span> </span><span class="WHIT">			</span><span class="NAME">this.readSelectedButton.value</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.readSelectedButtonText</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>958</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>959</span> </span><span class="WHIT">		</span><span class="NAME">this.readSelectedButton.id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.readSelectedButtonId</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>960</span> </span><span class="WHIT">		</span><span class="NAME">this.readSelectedButton.addClassName</span><span class="PUNC">(</span><span class="NAME">this.options.actionButtonClassName</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>961</span> </span><span class="WHIT">		</span><span class="NAME">this.readSelectedButton.disabled</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>962</span> </span><span class="WHIT">        </span><span class="NAME">this.readSelectedButton.onclick</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>963</span> </span><span class="WHIT">           </span><span class="COMM">// Read activities filtered by the API (including user selected activities) </span><span class="WHIT">
<span class='line'>964</span> </span><span class="WHIT">    	   </span><span class="NAME">this.readFilteredActivities</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>965</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="PUNC">.</span><span class="NAME">bind</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>966</span> </span><span class="WHIT">        </span><span class="NAME">this.activityDirectoryElement.appendChild</span><span class="PUNC">(</span><span class="NAME">this.readSelectedButton</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>967</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>968</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>969</span> </span><span class="WHIT">	</span><span class="COMM">/* Generate the singleton activity table header for the activity directory.
<span class='line'>970</span> 	 * The visible elements in the table are added dynamically after the directory is read.
<span class='line'>971</span> 	 * See _addToActivityTableHeader().
<span class='line'>972</span> 	 * 
<span class='line'>973</span> 	 * @private
<span class='line'>974</span> 	 */</span><span class="WHIT">
<span class='line'>975</span> </span><span class="WHIT">	</span><span class="NAME">_generateActivityTableHeader</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>976</span> </span><span class="WHIT">	    </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.activityTableHeader</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>977</span> </span><span class="WHIT">	        </span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Error</span><span class="PUNC">(</span><span class="STRN">"Unable to generate activity table header: Instance of the activity table header already exists."</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>978</span> </span><span class="WHIT">	    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>979</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>980</span> </span><span class="WHIT">		</span><span class="COMM">// Create the table header</span><span class="WHIT">
<span class='line'>981</span> </span><span class="WHIT">		</span><span class="NAME">this.activityTableHeader</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">"table"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>982</span> </span><span class="WHIT">		</span><span class="NAME">Element.extend</span><span class="PUNC">(</span><span class="NAME">this.activityTableHeader</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>983</span> </span><span class="WHIT">		</span><span class="NAME">this.activityTableHeader.id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.activityTableHeaderId</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>984</span> </span><span class="WHIT">		</span><span class="NAME">this.activityTableHeader.setAttribute</span><span class="PUNC">(</span><span class="STRN">'cellspacing'</span><span class="PUNC">,</span><span class="STRN">'0'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>985</span> </span><span class="WHIT">		</span><span class="NAME">this.activityTableHeader.setAttribute</span><span class="PUNC">(</span><span class="STRN">'cellpadding'</span><span class="PUNC">,</span><span class="STRN">'0'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>986</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>987</span> </span><span class="WHIT">		</span><span class="NAME">this.activityDirectoryElement.appendChild</span><span class="PUNC">(</span><span class="NAME">this.activityTableHeader</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>988</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>989</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>990</span> </span><span class="WHIT">    </span><span class="COMM">/* Build write data UI components.
<span class='line'>991</span>      * @private
<span class='line'>992</span>      */</span><span class="WHIT">
<span class='line'>993</span> </span><span class="WHIT">	</span><span class="NAME">_generateWriteDataElement</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>994</span> </span><span class="WHIT">		</span><span class="NAME">this.writeDataElement</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">"div"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>995</span> </span><span class="WHIT">		</span><span class="NAME">Element.extend</span><span class="PUNC">(</span><span class="NAME">this.writeDataElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>996</span> </span><span class="WHIT">		</span><span class="NAME">this.writeDataElement.id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.writeDataElementId</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>997</span> </span><span class="WHIT">		</span><span class="NAME">this.writeDataElement.addClassName</span><span class="PUNC">(</span><span class="NAME">this.options.elementClassName</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>998</span> </span><span class="WHIT">		</span><span class="NAME">this.mainElement.appendChild</span><span class="PUNC">(</span><span class="NAME">this.writeDataElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>999</span> 
<span class='line'>1000</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this.options.getWriteData</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="NAME">this.options.getGpiWriteDescription</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="NAME">this.options.getBinaryWriteDescription</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>1001</span> </span><span class="WHIT">			</span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Error</span><span class="PUNC">(</span><span class="STRN">"Can't write data because getWriteData() function nor getGpiWriteDescription() is defined"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1002</span> </span><span class="WHIT">		</span><span class="NAME">this.writeDataButton</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.options.useLinks</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="STRN">"div"</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"input"</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1003</span> </span><span class="WHIT">		</span><span class="NAME">Element.extend</span><span class="PUNC">(</span><span class="NAME">this.writeDataButton</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1004</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.options.useLinks</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1005</span> </span><span class="WHIT">			</span><span class="NAME">this.writeDataButton.innerHTML</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'&lt;a href="#">'</span><span class="PUNC">+</span><span class="NAME">this.options.writeDataButtonText</span><span class="PUNC">+</span><span class="STRN">'&lt;/a>'</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1006</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1007</span> </span><span class="WHIT">			</span><span class="NAME">this.writeDataButton.type</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"button"</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1008</span> </span><span class="WHIT">			</span><span class="NAME">this.writeDataButton.value</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.writeDataButtonText</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1009</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1010</span> </span><span class="WHIT">		</span><span class="NAME">this.writeDataButton.id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.writeDataButtonId</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1011</span> </span><span class="WHIT">		</span><span class="NAME">this.writeDataButton.addClassName</span><span class="PUNC">(</span><span class="NAME">this.options.actionButtonClassName</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1012</span> </span><span class="WHIT">		</span><span class="NAME">this.writeDataButton.disabled</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>1013</span> </span><span class="WHIT">        </span><span class="NAME">this.writeDataButton.onclick</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1014</span> </span><span class="WHIT">            </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">isSupportedDevice</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1015</span> </span><span class="WHIT">        	</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.options.restrictByDevice.length</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1016</span> </span><span class="WHIT">				</span><span class="NAME">isSupportedDevice</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._restrictByDevice</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1017</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">						</span><span class="WHIT">
<span class='line'>1018</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">isSupportedDevice</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1019</span> </span><span class="WHIT">            	</span><span class="NAME">this.writeDataButton.disabled</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1020</span> </span><span class="WHIT">            	</span><span class="NAME">this.cancelWriteDataButton.disabled</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1021</span> </span><span class="WHIT">            	</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.options.autoHideUnusedElements</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1022</span> </span><span class="WHIT">            	    </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.findDevicesElement</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1023</span> </span><span class="WHIT">            	        </span><span class="NAME">this.findDevicesElement.hide</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1024</span> </span><span class="WHIT">            	    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1025</span> </span><span class="WHIT">            	    </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.writeDataElement</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1026</span> </span><span class="WHIT">            	        </span><span class="NAME">this.writeDataElement.hide</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1027</span> </span><span class="WHIT">            	    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1028</span> </span><span class="WHIT">            	</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1029</span> </span><span class="WHIT">            	</span><span class="NAME">this.showProgressBar</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1030</span> </span><span class="WHIT">            	</span><span class="NAME">this.writeToDevice</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1031</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1032</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="PUNC">.</span><span class="NAME">bind</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1033</span> </span><span class="WHIT">		</span><span class="NAME">this.writeDataElement.appendChild</span><span class="PUNC">(</span><span class="NAME">this.writeDataButton</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1034</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>1035</span> </span><span class="WHIT">		</span><span class="NAME">this.cancelWriteDataButton</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.options.useLinks</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="STRN">"div"</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"input"</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1036</span> </span><span class="WHIT">		</span><span class="NAME">Element.extend</span><span class="PUNC">(</span><span class="NAME">this.cancelWriteDataButton</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1037</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.options.useLinks</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1038</span> </span><span class="WHIT">			</span><span class="NAME">this.cancelWriteDataButton.innerHTML</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'&lt;a href="#">'</span><span class="PUNC">+</span><span class="NAME">this.options.cancelWriteDataButtonText</span><span class="PUNC">+</span><span class="STRN">'&lt;/a>'</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1039</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1040</span> </span><span class="WHIT">			</span><span class="NAME">this.cancelWriteDataButton.type</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"button"</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1041</span> </span><span class="WHIT">			</span><span class="NAME">this.cancelWriteDataButton.value</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.cancelWriteDataButtonText</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1042</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1043</span> </span><span class="WHIT">		</span><span class="NAME">this.cancelWriteDataButton.id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.cancelWriteDataButtonId</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1044</span> </span><span class="WHIT">		</span><span class="NAME">this.cancelWriteDataButton.addClassName</span><span class="PUNC">(</span><span class="NAME">this.options.actionButtonClassName</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1045</span> </span><span class="WHIT">		</span><span class="NAME">this.cancelWriteDataButton.disabled</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1046</span> </span><span class="WHIT">		</span><span class="NAME">this.cancelWriteDataButton.onclick</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1047</span> </span><span class="WHIT">			</span><span class="NAME">this.resetUI</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1048</span> </span><span class="WHIT">			</span><span class="NAME">this.hideProgressBar</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1049</span> </span><span class="WHIT">			</span><span class="NAME">this.getController</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">cancelWriteToDevice</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1050</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="PUNC">.</span><span class="NAME">bind</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1051</span> </span><span class="WHIT">		</span><span class="NAME">this.writeDataElement.appendChild</span><span class="PUNC">(</span><span class="NAME">this.cancelWriteDataButton</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1052</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>1053</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this.options.showCancelWriteDataButton</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1054</span> </span><span class="WHIT">			</span><span class="NAME">Element.hide</span><span class="PUNC">(</span><span class="NAME">this.cancelWriteDataButton</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1055</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1056</span> 
<span class='line'>1057</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.options.showWriteDataElementOnDeviceFound</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1058</span> </span><span class="WHIT">			</span><span class="NAME">Element.hide</span><span class="PUNC">(</span><span class="NAME">this.writeDataElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1059</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1060</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1061</span> 
<span class='line'>1062</span> </span><span class="WHIT">    </span><span class="COMM">/* Build "Powered by" UI components.
<span class='line'>1063</span>      * @private
<span class='line'>1064</span>      */</span><span class="WHIT">
<span class='line'>1065</span> </span><span class="WHIT">	</span><span class="NAME">_generateAboutElement</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1066</span> </span><span class="WHIT">		</span><span class="NAME">this.aboutElement</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">"div"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1067</span> </span><span class="WHIT">		</span><span class="NAME">Element.extend</span><span class="PUNC">(</span><span class="NAME">this.aboutElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1068</span> </span><span class="WHIT">		</span><span class="NAME">this.aboutElement.id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"aboutElement"</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1069</span> </span><span class="WHIT">		</span><span class="NAME">this.aboutElement.addClassName</span><span class="PUNC">(</span><span class="NAME">this.options.elementClassName</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1070</span> </span><span class="WHIT">		</span><span class="NAME">this.mainElement.appendChild</span><span class="PUNC">(</span><span class="NAME">this.aboutElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1071</span> 
<span class='line'>1072</span> </span><span class="WHIT">		</span><span class="NAME">this.copyrightText</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">"span"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1073</span> </span><span class="WHIT">		</span><span class="NAME">this.copyrightText.innerHTML</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.poweredByGarmin</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1074</span> </span><span class="WHIT">		</span><span class="NAME">this.aboutElement.appendChild</span><span class="PUNC">(</span><span class="NAME">this.copyrightText</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1075</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1076</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>1077</span> </span><span class="WHIT">	</span><span class="COMM">/* Checks the connected device against those listed in this.options.restrictByDevice
<span class='line'>1078</span> 	 * and throws an error if the connected device is not supported by
<span class='line'>1079</span> 	 * the application.  
<span class='line'>1080</span> 	 * 
<span class='line'>1081</span> 	 * @return true if the connected device is supported, false otherwise.
<span class='line'>1082</span> 	 */</span><span class="WHIT">
<span class='line'>1083</span> </span><span class="WHIT">	</span><span class="NAME">_restrictByDevice</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1084</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>1085</span> </span><span class="WHIT">		</span><span class="COMM">// Get connected device</span><span class="WHIT">
<span class='line'>1086</span> </span><span class="WHIT">		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">device</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getController</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getDevices</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">[</span><span class="NAME">this.deviceSelectInput.value</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1087</span> </span><span class="WHIT">		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">devicePartNumber</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">device.getPartNumber</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1088</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>1089</span> </span><span class="WHIT">		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">isSupportedDevice</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1090</span> </span><span class="WHIT">		</span><span class="COMM">// Compare to restricted list</span><span class="WHIT">
<span class='line'>1091</span> </span><span class="WHIT">		</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">this.options.restrictByDevice.length</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1092</span> </span><span class="WHIT">		    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">supportedPartNumber</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.restrictByDevice</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1093</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">devicePartNumber</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">supportedPartNumber</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1094</span> </span><span class="WHIT">				</span><span class="NAME">isSupportedDevice</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1095</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1096</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1097</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>1098</span> </span><span class="WHIT">		</span><span class="COMM">// Hide everything but status</span><span class="WHIT">
<span class='line'>1099</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="NAME">isSupportedDevice</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1100</span> </span><span class="WHIT">			</span><span class="NAME">error</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Error</span><span class="PUNC">(</span><span class="NAME">this.options.unsupportedDevice</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1101</span> </span><span class="WHIT">    	    </span><span class="NAME">error.name</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"UnsupportedDeviceException"</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1102</span> </span><span class="WHIT">			</span><span class="NAME">this.handleException</span><span class="PUNC">(</span><span class="NAME">error</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1103</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1104</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>1105</span> </span><span class="WHIT">		</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">isSupportedDevice</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1106</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1107</span> 
<span class='line'>1108</span> </span><span class="WHIT">    </span><span class="COMM">////////////////////////// FIND DEVICES METHODS ////////////////////////// </span><span class="WHIT">
<span class='line'>1109</span> </span><span class="WHIT">    </span><span class="WHIT">
<span class='line'>1110</span> </span><span class="WHIT">    </span><span class="COMM">/** Entry point for searching for connected devices.
<span class='line'>1111</span>      * Will attempt to unlock the plugin if necessary.
<span class='line'>1112</span>      * @see Garmin.DeviceDisplay#cancelFindDevices
<span class='line'>1113</span>      * @see Garmin.DeviceDisplay#event:onStartFindDevices
<span class='line'>1114</span>      */</span><span class="WHIT">
<span class='line'>1115</span> </span><span class="WHIT">	</span><span class="NAME">startFindDevices</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1116</span> </span><span class="WHIT">		</span><span class="NAME">this.getController</span><span class="PUNC">(</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">//try to unlock plugin</span><span class="WHIT">
<span class='line'>1117</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.options.autoHideUnusedElements</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1118</span> </span><span class="WHIT">		    </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.findDevicesButton</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1119</span> </span><span class="WHIT">		      </span><span class="NAME">this.findDevicesButton.hide</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1120</span> </span><span class="WHIT">		    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1121</span> </span><span class="WHIT">		    </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.browseComputerButton</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="WHIT">
<span class='line'>1122</span> </span><span class="WHIT">		      </span><span class="NAME">this.browseComputerButton.hide</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1123</span> </span><span class="WHIT">		    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1124</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1125</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.findDevicesButton</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="WHIT">
<span class='line'>1126</span> </span><span class="WHIT">	       	</span><span class="NAME">this.findDevicesButton.disabled</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1127</span> </span><span class="WHIT">	    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.cancelFindDevicesButton</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>1128</span> </span><span class="WHIT">    		</span><span class="NAME">this.cancelFindDevicesButton.disabled</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="NAME">this.isUnlocked</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1129</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.isUnlocked</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1130</span> </span><span class="WHIT">       		</span><span class="NAME">this.getController</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">findDevices</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1131</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1132</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1133</span> 
<span class='line'>1134</span> </span><span class="WHIT">    </span><span class="COMM">/** Entry point for cancelling search for connected devices.
<span class='line'>1135</span>      * @see Garmin.DeviceDisplay#event:onCancelFindDevices
<span class='line'>1136</span>      */</span><span class="WHIT">
<span class='line'>1137</span> </span><span class="WHIT">	</span><span class="NAME">cancelFindDevices</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1138</span> </span><span class="WHIT">		</span><span class="NAME">this.resetUI</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1139</span> </span><span class="WHIT">       	</span><span class="NAME">this.getController</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">cancelFindDevices</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1140</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1141</span> 
<span class='line'>1142</span> </span><span class="WHIT">    </span><span class="COMM">/** Call-back triggered before plugin searches for connected devices.
<span class='line'>1143</span>      * @event 
<span class='line'>1144</span>      * @param {JSON} json
<span class='line'>1145</span>      * @see Garmin.DeviceControl 
<span class='line'>1146</span>      * @see Garmin.DeviceDisplay#startFindDevices
<span class='line'>1147</span>      */</span><span class="WHIT">
<span class='line'>1148</span> </span><span class="WHIT">    </span><span class="NAME">onStartFindDevices</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">json</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1149</span> </span><span class="WHIT">        </span><span class="NAME">this.setStatus</span><span class="PUNC">(</span><span class="NAME">this.options.lookingForDevices</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1150</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1151</span> 
<span class='line'>1152</span> </span><span class="WHIT">    </span><span class="COMM">/** Call-back triggered after plugin has completed its search for devices.
<span class='line'>1153</span>      * @event
<span class='line'>1154</span>      * @param {JSON} json
<span class='line'>1155</span>      * @see Garmin.DeviceControl
<span class='line'>1156</span>      * @see Garmin.DeviceDisplay#startFindDevices
<span class='line'>1157</span>      */</span><span class="WHIT">
<span class='line'>1158</span> </span><span class="WHIT">    </span><span class="NAME">onFinishFindDevices</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">json</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1159</span> </span><span class="WHIT">		</span><span class="NAME">this.resetUI</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1160</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">json.controller.numDevices</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1161</span> </span><span class="WHIT">            </span><span class="NAME">this.devices</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">json.controller.getDevices</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">               </span><span class="WHIT">
<span class='line'>1162</span> </span><span class="WHIT">            </span><span class="WHIT">
<span class='line'>1163</span> </span><span class="WHIT">            </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">template</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.devices.length</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">this.options.foundDevice</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this.options.foundDevices</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1164</span> </span><span class="WHIT">            </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">values</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">deviceName</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this.getShortDeviceName</span><span class="PUNC">(</span><span class="NAME">this.devices</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">deviceCount</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">json.controller.numDevices</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1165</span> </span><span class="WHIT">            </span><span class="NAME">this.setStatus</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.evaluateTemplate</span><span class="PUNC">(</span><span class="NAME">template</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">values</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1166</span> </span><span class="WHIT"> </span><span class="WHIT">
<span class='line'>1167</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.options.showFindDevicesElement</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1168</span> </span><span class="WHIT">				</span><span class="NAME">Element.show</span><span class="PUNC">(</span><span class="NAME">this.findDevicesElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1169</span> </span><span class="WHIT">				</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.options.showDeviceButtonsOnFound</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1170</span> </span><span class="WHIT">					</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.findDevicesButton</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">this.options.showFindDevicesButton</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>1171</span> </span><span class="WHIT">						</span><span class="NAME">Element.show</span><span class="PUNC">(</span><span class="NAME">this.findDevicesButton</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1172</span> </span><span class="WHIT">					</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.cancelFindDevicesButton</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>1173</span> </span><span class="WHIT">						</span><span class="NAME">Element.show</span><span class="PUNC">(</span><span class="NAME">this.cancelFindDevicesButton</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>1174</span> </span><span class="WHIT">				</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1175</span> </span><span class="WHIT">					</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.findDevicesButton</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>1176</span> </span><span class="WHIT">						</span><span class="NAME">Element.hide</span><span class="PUNC">(</span><span class="NAME">this.findDevicesButton</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1177</span> </span><span class="WHIT">					</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.cancelFindDevicesButton</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>1178</span> </span><span class="WHIT">						</span><span class="NAME">Element.hide</span><span class="PUNC">(</span><span class="NAME">this.cancelFindDevicesButton</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1179</span> </span><span class="WHIT">				</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1180</span> </span><span class="WHIT">				</span><span class="COMM">// Hide device select on single device</span><span class="WHIT">
<span class='line'>1181</span> </span><span class="WHIT">				</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">this.devices.length</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NUMB">2</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="NAME">this.options.showDeviceSelectOnSingle</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">this.options.autoSelectFirstDevice</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1182</span> </span><span class="WHIT">					</span><span class="NAME">Element.hide</span><span class="PUNC">(</span><span class="NAME">this.deviceSelectElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1183</span> </span><span class="WHIT">				</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1184</span> </span><span class="WHIT">					</span><span class="NAME">Element.show</span><span class="PUNC">(</span><span class="NAME">this.deviceSelectElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1185</span> </span><span class="WHIT">				</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1186</span> </span><span class="WHIT">				</span><span class="COMM">// Populate the devices list based on UI option</span><span class="WHIT">
<span class='line'>1187</span> </span><span class="WHIT">				</span><span class="NAME">this.options.useDeviceSelectList</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">this._generateDeviceListView</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this._populateDeviceSelectDropDown</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1188</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1189</span> </span><span class="WHIT">			</span><span class="WHIT">
<span class='line'>1190</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.options.showReadDataElementOnDeviceFound</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1191</span> </span><span class="WHIT">				</span><span class="NAME">Element.show</span><span class="PUNC">(</span><span class="NAME">this.readDataElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1192</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1193</span> </span><span class="WHIT">			</span><span class="WHIT">
<span class='line'>1194</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.options.showSendDataElementOnDeviceFound</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1195</span> </span><span class="WHIT">				</span><span class="NAME">Element.show</span><span class="PUNC">(</span><span class="NAME">this.sendDataElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1196</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1197</span> </span><span class="WHIT">			</span><span class="WHIT">
<span class='line'>1198</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.options.showWriteDataElementOnDeviceFound</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1199</span> </span><span class="WHIT">				</span><span class="NAME">Element.show</span><span class="PUNC">(</span><span class="NAME">this.writeDataElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1200</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1201</span> </span><span class="WHIT">			</span><span class="WHIT">
<span class='line'>1202</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.options.autoHideUnusedElements</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1203</span> </span><span class="WHIT">				</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.activityDirectoryElement</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1204</span> </span><span class="WHIT">				    </span><span class="NAME">Element.hide</span><span class="PUNC">(</span><span class="NAME">this.activityDirectoryElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1205</span> </span><span class="WHIT">				</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1206</span> </span><span class="WHIT">				</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.readDataElement</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1207</span> </span><span class="WHIT">				    </span><span class="NAME">Element.show</span><span class="PUNC">(</span><span class="NAME">this.readDataElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1208</span> </span><span class="WHIT">				</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1209</span> </span><span class="WHIT">				</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.options.showBrowseComputer</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1210</span> </span><span class="WHIT">        		    </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.browseComputerButton</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1211</span> </span><span class="WHIT">                        </span><span class="NAME">this.browseComputerButton.show</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1212</span> </span><span class="WHIT">        		    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1213</span> </span><span class="WHIT">        		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1214</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1215</span> </span><span class="WHIT">			</span><span class="WHIT">
<span class='line'>1216</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.options.autoReadData</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1217</span> </span><span class="WHIT">	        	</span><span class="NAME">this.showProgressBar</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1218</span> </span><span class="WHIT">	        	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.options.showReadDataTypesSelect</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1219</span> </span><span class="WHIT">	        		</span><span class="NAME">this.readSpecificTypeFromDevice</span><span class="PUNC">(</span><span class="NAME">this.readDataTypesSelect.value</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1220</span> </span><span class="WHIT">	        	</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.options.readDataType</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1221</span> </span><span class="WHIT">	        		</span><span class="NAME">this.readSpecificTypeFromDevice</span><span class="PUNC">(</span><span class="NAME">this.options.readDataType</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.options.fileListingOptions</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1222</span> </span><span class="WHIT">	        	</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1223</span> </span><span class="WHIT">					</span><span class="NAME">this.readFromDevice</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1224</span> </span><span class="WHIT">	        	</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1225</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1226</span> </span><span class="WHIT">			</span><span class="WHIT">
<span class='line'>1227</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.options.autoWriteData</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1228</span> </span><span class="WHIT">	        	</span><span class="NAME">this.showProgressBar</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1229</span> </span><span class="WHIT">        		</span><span class="NAME">this.writeToDevice</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1230</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1231</span> </span><span class="WHIT">			</span><span class="WHIT">
<span class='line'>1232</span> </span><span class="WHIT">			</span><span class="NAME">this.displayHealthDataButtonIfNeeded</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1233</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="COMM">// No devices found!</span><span class="WHIT">
<span class='line'>1234</span> </span><span class="WHIT">        	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">(</span><span class="NAME">this.options.autoReadData</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">this.options.autoWriteData</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="NAME">this.options.showStatusElement</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1235</span> </span><span class="WHIT">        		</span><span class="NAME">alert</span><span class="PUNC">(</span><span class="NAME">this.options.noDeviceDetectedStatusText</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1236</span> </span><span class="WHIT">        	</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1237</span> </span><span class="WHIT">        	</span><span class="WHIT">
<span class='line'>1238</span> </span><span class="WHIT">			</span><span class="NAME">this.setStatus</span><span class="PUNC">(</span><span class="NAME">this.options.noDeviceDetectedStatusText</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1239</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.findDevicesButton</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1240</span> </span><span class="WHIT">                </span><span class="NAME">this.findDevicesButton.show</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">  </span><span class="COMM">// allow user to retry</span><span class="WHIT">
<span class='line'>1241</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1242</span> </span><span class="WHIT">            </span><span class="WHIT">
<span class='line'>1243</span> </span><span class="WHIT">            </span><span class="COMM">//allow user to browse computer in activity directory</span><span class="WHIT">
<span class='line'>1244</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.options.uploadSelectedActivities</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1245</span> </span><span class="WHIT">                </span><span class="NAME">this.browseComputerButton.show</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1246</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1247</span> </span><span class="WHIT">			</span><span class="WHIT">
<span class='line'>1248</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.options.showFindDevicesElement</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1249</span> </span><span class="WHIT">				</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.options.showCancelFindDevicesButton</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1250</span> </span><span class="WHIT">					</span><span class="NAME">Element.show</span><span class="PUNC">(</span><span class="NAME">this.cancelFindDevicesButton</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>1251</span> </span><span class="WHIT">				</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1252</span> </span><span class="WHIT">				</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.options.showDeviceSelectNoDevice</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="NAME">this.options.autoSelectFirstDevice</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1253</span> </span><span class="WHIT">					</span><span class="NAME">Element.show</span><span class="PUNC">(</span><span class="NAME">this.deviceSelectElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1254</span> </span><span class="WHIT">				</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1255</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">					</span><span class="WHIT">
<span class='line'>1256</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1257</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.options.afterFinishFindDevices</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1258</span> </span><span class="WHIT">    		</span><span class="NAME">this.options.afterFinishFindDevices.call</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.devices</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1259</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1260</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1261</span> </span><span class="WHIT">    </span><span class="WHIT">
<span class='line'>1262</span> </span><span class="WHIT">    </span><span class="COMM">/*@private*/</span><span class="WHIT">
<span class='line'>1263</span> </span><span class="WHIT">    </span><span class="NAME">displayHealthDataButtonIfNeeded</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>1264</span> </span><span class="WHIT">    </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1265</span> </span><span class="WHIT">    	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">supported</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.doesDeviceSupportDataType</span><span class="PUNC">(</span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.fitHealthData</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1266</span> </span><span class="WHIT">		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">show</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.showHealthDataUploadButton</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1267</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>1268</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.uploadHealthDataButton</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>1269</span> </span><span class="WHIT">		</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1270</span> </span><span class="WHIT">			</span><span class="COMM">//If the device said health data isn't supported, that's not always trustworthy</span><span class="WHIT">
<span class='line'>1271</span> </span><span class="WHIT">			</span><span class="COMM">//(as in the case of an FR60 or 310XT, so double check, by checking the directory</span><span class="WHIT">
<span class='line'>1272</span> </span><span class="WHIT">			</span><span class="COMM">//listing XML from the device.</span><span class="WHIT">
<span class='line'>1273</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">supported</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>1274</span> </span><span class="WHIT">			</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1275</span> </span><span class="WHIT">				</span><span class="NAME">supported</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getController</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">doesCurrentDeviceSupportHealth</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1276</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1277</span> </span><span class="WHIT">			</span><span class="WHIT">
<span class='line'>1278</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">show</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="NAME">supported</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="WHIT">
<span class='line'>1279</span> </span><span class="WHIT">			</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1280</span> </span><span class="WHIT">				</span><span class="COMM">//this.uploadHealthDataButton.style.display = 'none';</span><span class="WHIT">
<span class='line'>1281</span> </span><span class="WHIT">				</span><span class="NAME">Element.hide</span><span class="PUNC">(</span><span class="NAME">this.uploadHealthDataButton</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1282</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1283</span> </span><span class="WHIT">			</span><span class="KEYW">else</span><span class="WHIT">
<span class='line'>1284</span> </span><span class="WHIT">			</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1285</span> </span><span class="WHIT">				</span><span class="NAME">Element.show</span><span class="PUNC">(</span><span class="NAME">this.uploadHealthDataButton</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1286</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1287</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1288</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1289</span> </span><span class="WHIT">    </span><span class="WHIT">
<span class='line'>1290</span> </span><span class="WHIT">    </span><span class="COMM">/** Call-back for find device cancelled.
<span class='line'>1291</span>      * @event
<span class='line'>1292</span>      * @param {JSON} json
<span class='line'>1293</span>      * @see Garmin.DeviceControl 
<span class='line'>1294</span>      * @see Garmin.DeviceDisplay#cancelFindDevices
<span class='line'>1295</span>      */</span><span class="WHIT">
<span class='line'>1296</span> </span><span class="WHIT">	</span><span class="NAME">onCancelFindDevices</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">json</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1297</span> </span><span class="WHIT">		</span><span class="NAME">this.setStatus</span><span class="PUNC">(</span><span class="NAME">this.options.findCancelled</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1298</span> </span><span class="WHIT">    	</span><span class="NAME">this.resetUI</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1299</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1300</span> 
<span class='line'>1301</span> </span><span class="WHIT">    </span><span class="COMM">/** Load device list into select UI component.
<span class='line'>1302</span>      * @private
<span class='line'>1303</span>      */</span><span class="WHIT">
<span class='line'>1304</span> </span><span class="WHIT">	</span><span class="NAME">_populateDeviceSelectDropDown</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1305</span> </span><span class="WHIT">	    </span><span class="NAME">this.deviceSelectElement.appendChild</span><span class="PUNC">(</span><span class="NAME">this.deviceSelectInput</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1306</span> </span><span class="WHIT">		</span><span class="NAME">this._clearHtmlSelect</span><span class="PUNC">(</span><span class="NAME">this.deviceSelectInput</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1307</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.options.showFindDevicesElement</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1308</span> </span><span class="WHIT">			</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">this.devices.length</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1309</span> </span><span class="WHIT">           	    </span><span class="NAME">this.deviceSelectInput.options</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Option</span><span class="PUNC">(</span><span class="NAME">this.getShortDeviceName</span><span class="PUNC">(</span><span class="NAME">this.devices</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="NAME">this.devices</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">getNumber</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1310</span> </span><span class="WHIT">			    </span><span class="WHIT">
<span class='line'>1311</span> </span><span class="WHIT">	           	</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.devices</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">getNumber</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">this.getController</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">deviceNumber</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1312</span> </span><span class="WHIT">	           		</span><span class="NAME">this.deviceSelectInput.selectedIndex</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1313</span> </span><span class="WHIT">	           		</span><span class="COMM">// Adding afterSelectDevice functionality to the old select UI</span><span class="WHIT">
<span class='line'>1314</span> </span><span class="WHIT">	                </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.options.afterSelectDevice</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1315</span> </span><span class="WHIT">	                    </span><span class="NAME">this.options.afterSelectDevice.call</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.getController</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">deviceNumber</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.devices</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.garminController.getCurrentDeviceXml</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1316</span> </span><span class="WHIT">	                </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1317</span> </span><span class="WHIT">	           	</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1318</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1319</span> </span><span class="WHIT">			</span><span class="NAME">this.deviceSelectInput.onchange</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1320</span> </span><span class="WHIT">				</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">device</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getController</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getDevices</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">[</span><span class="NAME">this.deviceSelectInput.value</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1321</span> </span><span class="WHIT">				</span><span class="NAME">this.setStatus</span><span class="PUNC">(</span><span class="NAME">this.evaluateTemplate</span><span class="PUNC">(</span><span class="NAME">this.options.usingDevice</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">deviceName</span><span class="PUNC">:</span><span class="NAME">this.getShortDeviceName</span><span class="PUNC">(</span><span class="NAME">device</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1322</span> </span><span class="WHIT">				</span><span class="NAME">this.getController</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">setDeviceNumber</span><span class="PUNC">(</span><span class="NAME">this.deviceSelectInput.value</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1323</span> </span><span class="WHIT">				</span><span class="COMM">// Adding afterSelectDevice functionality to the old select UI</span><span class="WHIT">
<span class='line'>1324</span> </span><span class="WHIT">				</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.options.afterSelectDevice</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1325</span> </span><span class="WHIT">					</span><span class="NAME">this.options.afterSelectDevice.call</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.getController</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">deviceNumber</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.devices</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.garminController.getCurrentDeviceXml</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1326</span> </span><span class="WHIT">				</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1327</span> </span><span class="WHIT">				</span><span class="WHIT">
<span class='line'>1328</span> </span><span class="WHIT">				</span><span class="NAME">this.displayHealthDataButtonIfNeeded</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1329</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="PUNC">.</span><span class="NAME">bind</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1330</span> </span><span class="WHIT">			</span><span class="NAME">this.deviceSelectInput.disabled</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1331</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1332</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1333</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>1334</span> </span><span class="WHIT">	</span><span class="COMM">/* Load device browser content.
<span class='line'>1335</span>      * @private
<span class='line'>1336</span>      */</span><span class="WHIT">
<span class='line'>1337</span> </span><span class="WHIT">	</span><span class="NAME">_generateAndDisplayDeviceBrowser</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1338</span> </span><span class="WHIT">	   </span><span class="WHIT">
<span class='line'>1339</span> </span><span class="WHIT">        </span><span class="COMM">// Create device browser</span><span class="WHIT">
<span class='line'>1340</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.options.useDeviceBrowser</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1341</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.deviceBrowserElement</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1342</span> </span><span class="WHIT">                </span><span class="NAME">this.generateDeviceBrowserElement</span><span class="PUNC">(</span><span class="NAME">this.devices</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="WHIT">
<span class='line'>1343</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1344</span> </span><span class="WHIT">            </span><span class="WHIT">
<span class='line'>1345</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="NAME">this.advancedUploadMode</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1346</span> </span><span class="WHIT">                </span><span class="COMM">// Simple upload</span><span class="WHIT">
<span class='line'>1347</span> </span><span class="WHIT">                </span><span class="NAME">this.devicePreviewElement.show</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1348</span> </span><span class="WHIT">                </span><span class="NAME">this.progressBar.hide</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1349</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1350</span> </span><span class="WHIT">                </span><span class="COMM">// Advanced upload</span><span class="WHIT">
<span class='line'>1351</span> </span><span class="WHIT">                </span><span class="NAME">this.deviceBrowserElement.show</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1352</span> </span><span class="WHIT">    		    </span><span class="NAME">this.activityDirectoryElement.show</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1353</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1354</span> </span><span class="WHIT">    		    </span><span class="NAME">this.statusText.hide</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1355</span> </span><span class="WHIT">    		    </span><span class="NAME">this.showProgressBar</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1356</span> 
<span class='line'>1357</span> </span><span class="WHIT">		    </span><span class="COMM">// Show loading screen while reading device</span><span class="WHIT">
<span class='line'>1358</span> </span><span class="WHIT">		    </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.loadingContentElement</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1359</span> </span><span class="WHIT">                </span><span class="NAME">this._generateLoadingContent</span><span class="PUNC">(</span><span class="NAME">this.statusElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1360</span> </span><span class="WHIT">		    </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1361</span> </span><span class="WHIT">		        </span><span class="COMM">// Update the device name displayed</span><span class="WHIT">
<span class='line'>1362</span> </span><span class="WHIT">		        </span><span class="NAME">this._updateLoadingContent</span><span class="PUNC">(</span><span class="NAME">this.evaluateTemplate</span><span class="PUNC">(</span><span class="NAME">this.options.loadingContentText</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">deviceName</span><span class="PUNC">:</span><span class="NAME">this.getShortDeviceName</span><span class="PUNC">(</span><span class="NAME">this.getCurrentDevice</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1363</span> </span><span class="WHIT">		    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1364</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1365</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1366</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>1367</span> </span><span class="WHIT">	</span><span class="COMM">/* Load device list into select UI component.
<span class='line'>1368</span>      * @private
<span class='line'>1369</span>      */</span><span class="WHIT">
<span class='line'>1370</span> </span><span class="WHIT">	</span><span class="NAME">_generateDeviceListView</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1371</span> </span><span class="WHIT">	    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">deviceSelectContainer</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1372</span> </span><span class="WHIT">	    </span><span class="WHIT">
<span class='line'>1373</span> </span><span class="WHIT">		</span><span class="NAME">this._clearHtmlSelect</span><span class="PUNC">(</span><span class="NAME">this.deviceSelectInput</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1374</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>1375</span> </span><span class="WHIT">		</span><span class="NAME">deviceSelectContainer</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">"div"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1376</span> </span><span class="WHIT">		</span><span class="NAME">Element.extend</span><span class="PUNC">(</span><span class="NAME">deviceSelectContainer</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1377</span> </span><span class="WHIT">		</span><span class="NAME">deviceSelectContainer.className</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.deviceSelectClass</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1378</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>1379</span> </span><span class="WHIT">		</span><span class="COMM">// Display change only if there are multiple devices</span><span class="WHIT">
<span class='line'>1380</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.devices.length</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1381</span> </span><span class="WHIT">    		</span><span class="COMM">// Change device link</span><span class="WHIT">
<span class='line'>1382</span> </span><span class="WHIT">    		</span><span class="NAME">this.changeDeviceElement</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">"div"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1383</span> </span><span class="WHIT">    		</span><span class="NAME">Element.extend</span><span class="PUNC">(</span><span class="NAME">this.changeDeviceElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1384</span> </span><span class="WHIT">    		</span><span class="NAME">this.changeDeviceElement.id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.changeDeviceElementId</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1385</span> </span><span class="WHIT">    		</span><span class="NAME">this.changeDeviceElement.className</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.changeDeviceClass</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1386</span> </span><span class="WHIT">    		</span><span class="NAME">this.changeDeviceElement.innerHTML</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'&lt;a href="#">'</span><span class="PUNC">+</span><span class="NAME">this.options.changeDeviceButtonText</span><span class="PUNC">+</span><span class="STRN">'&lt;/a>'</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1387</span> </span><span class="WHIT">    		</span><span class="NAME">this.changeDeviceElement.onclick</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1388</span> </span><span class="WHIT">    		    </span><span class="NAME">this.devicePreviewElement.toggle</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1389</span> </span><span class="WHIT">    		    </span><span class="NAME">this.connectedDevices.toggle</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1390</span> </span><span class="WHIT">    		    </span><span class="NAME">this.deviceSelectInput.toggle</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1391</span> </span><span class="WHIT">    		</span><span class="PUNC">}</span><span class="PUNC">.</span><span class="NAME">bind</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1392</span> </span><span class="WHIT">    		</span><span class="NAME">this.deviceSelectElement.appendChild</span><span class="PUNC">(</span><span class="NAME">this.changeDeviceElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1393</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1394</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>1395</span> </span><span class="WHIT">		</span><span class="COMM">// Display pre-selected device (first device)</span><span class="WHIT">
<span class='line'>1396</span> </span><span class="WHIT">		</span><span class="NAME">this.devicePreviewElement</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">"div"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1397</span> </span><span class="WHIT">		</span><span class="NAME">Element.extend</span><span class="PUNC">(</span><span class="NAME">this.devicePreviewElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1398</span> </span><span class="WHIT">		</span><span class="NAME">this.devicePreviewElement.id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.previewDeviceElementId</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1399</span> </span><span class="WHIT">		</span><span class="NAME">this.devicePreviewElement.innerHTML</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'&lt;p>'</span><span class="PUNC">+</span><span class="NAME">this.getShortDeviceName</span><span class="PUNC">(</span><span class="NAME">this.getCurrentDevice</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">'&lt;/p>'</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1400</span> </span><span class="WHIT">		</span><span class="NAME">deviceSelectContainer.appendChild</span><span class="PUNC">(</span><span class="NAME">this.devicePreviewElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1401</span> </span><span class="WHIT">		</span><span class="NAME">this.deviceSelectElement.appendChild</span><span class="PUNC">(</span><span class="NAME">deviceSelectContainer</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1402</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>1403</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.options.showFindDevicesElement</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1404</span> </span><span class="WHIT">		    </span><span class="WHIT">
<span class='line'>1405</span> </span><span class="WHIT">		    </span><span class="COMM">// Connected devices label</span><span class="WHIT">
<span class='line'>1406</span> </span><span class="WHIT">		    </span><span class="NAME">this.connectedDevices</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Element</span><span class="PUNC">(</span><span class="STRN">"div"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">className</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this.options.connectedDevicesClass</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1407</span> </span><span class="WHIT">		    </span><span class="NAME">this.connectedDevices.update</span><span class="PUNC">(</span><span class="STRN">'&lt;img src="'</span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">this.options.connectedDevicesImg</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="STRN">'" />'</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">this.options.connectedDevicesLabel</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1408</span> </span><span class="WHIT">		    </span><span class="NAME">this.connectedDevices.hide</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1409</span> </span><span class="WHIT">		    </span><span class="NAME">deviceSelectContainer.appendChild</span><span class="PUNC">(</span><span class="NAME">this.connectedDevices</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1410</span> </span><span class="WHIT">		    </span><span class="WHIT">
<span class='line'>1411</span> </span><span class="WHIT">            </span><span class="NAME">this._populateDeviceList</span><span class="PUNC">(</span><span class="NAME">this.deviceSelectInput</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this._updateDevicePreview</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1412</span> </span><span class="WHIT">		   </span><span class="WHIT">
<span class='line'>1413</span> </span><span class="WHIT">			</span><span class="NAME">deviceSelectContainer.appendChild</span><span class="PUNC">(</span><span class="NAME">this.deviceSelectInput</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1414</span> </span><span class="WHIT">			</span><span class="NAME">this.deviceSelectElement.appendChild</span><span class="PUNC">(</span><span class="NAME">deviceSelectContainer</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1415</span> </span><span class="WHIT">			</span><span class="NAME">this.deviceSelectInput.hide</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1416</span> </span><span class="WHIT">			</span><span class="NAME">this.deviceSelectInput.disabled</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1417</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1418</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1419</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>1420</span> </span><span class="WHIT">	</span><span class="COMM">/* Returns the current selected device according to the control object.
<span class='line'>1421</span> 	 * @private
<span class='line'>1422</span> 	 * @return {Device} the Device object belonging to the selected device
<span class='line'>1423</span> 	 * @see Garmin.Device
<span class='line'>1424</span> 	 */</span><span class="WHIT">
<span class='line'>1425</span> </span><span class="WHIT">	</span><span class="NAME">getCurrentDevice</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1426</span> </span><span class="WHIT">        </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.devices</span><span class="PUNC">[</span><span class="NAME">this.getController</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">deviceNumber</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1427</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1428</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>1429</span> </span><span class="WHIT">	</span><span class="COMM">/* Populates the device list.  'List' is emphasized because we are counting
<span class='line'>1430</span> 	 * on the fact that it is not a select drop down. See _populateDeviceSelectDropDown
<span class='line'>1431</span> 	 * for that.
<span class='line'>1432</span> 	 * 
<span class='line'>1433</span> 	 * Sets the onclick event for each device in the list.  When a device is selected,
<span class='line'>1434</span> 	 * the device number in control is set to that device.  The class names of the
<span class='line'>1435</span> 	 * entire list are also updated in order to indicate visually which device is selected.
<span class='line'>1436</span> 	 * 
<span class='line'>1437</span> 	 * After the above is finished, the callback method is executed.
<span class='line'>1438</span> 	 *   
<span class='line'>1439</span> 	 * @private
<span class='line'>1440</span> 	 * @param {Element} deviceListElement the list element for the device listing
<span class='line'>1441</span> 	 * @param {function} callback(deviceIndex) - the callback function to use when a device is selected.
<span class='line'>1442</span> 	 *     deviceIndex is the device number selected by the user.   
<span class='line'>1443</span> 	 */</span><span class="WHIT">
<span class='line'>1444</span> </span><span class="WHIT">	</span><span class="NAME">_populateDeviceList</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">deviceListElement</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">callback</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1445</span> </span><span class="WHIT">	    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">itemLink</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1446</span> </span><span class="WHIT">	    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">listItem</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1447</span> </span><span class="WHIT">	    </span><span class="WHIT">
<span class='line'>1448</span> </span><span class="WHIT">	     </span><span class="COMM">// Insert detected devices into the display list</span><span class="WHIT">
<span class='line'>1449</span> </span><span class="WHIT">		</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">this.devices.length</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1450</span> </span><span class="WHIT">            </span><span class="NAME">listItem</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">"li"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1451</span> </span><span class="WHIT">            </span><span class="NAME">Element.extend</span><span class="PUNC">(</span><span class="NAME">listItem</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1452</span> </span><span class="WHIT">	        </span><span class="NAME">listItem.className</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">this.getController</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">deviceNumber</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="STRN">"selected"</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"unselected"</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1453</span> </span><span class="WHIT">	        </span><span class="NAME">itemLink</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">"a"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1454</span> </span><span class="WHIT">	        </span><span class="NAME">Element.extend</span><span class="PUNC">(</span><span class="NAME">itemLink</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1455</span> </span><span class="WHIT">	        </span><span class="NAME">itemLink.href</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"#"</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1456</span> </span><span class="WHIT">			</span><span class="NAME">itemLink.innerHTML</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getShortDeviceName</span><span class="PUNC">(</span><span class="NAME">this.devices</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1457</span> </span><span class="WHIT">	        </span><span class="NAME">itemLink.onclick</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">deviceListElement</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">deviceIndex</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">devices</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">callback</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1458</span> </span><span class="WHIT">	            </span><span class="WHIT">
<span class='line'>1459</span> </span><span class="WHIT">	            </span><span class="COMM">// Stop any existing reads and hide stuffs</span><span class="WHIT">
<span class='line'>1460</span> </span><span class="WHIT">                </span><span class="NAME">this.getController</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">cancelReadFromDevice</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1461</span> </span><span class="WHIT">	            </span><span class="WHIT">
<span class='line'>1462</span> </span><span class="WHIT">	            </span><span class="COMM">// Hide and unselect My Computer if selected</span><span class="WHIT">
<span class='line'>1463</span> </span><span class="WHIT">	            </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.browseComputerElement</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1464</span> </span><span class="WHIT">	               </span><span class="NAME">this.browseComputerElement.hide</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1465</span> </span><span class="WHIT">	               </span><span class="NAME">deviceListElement.childNodes</span><span class="PUNC">[</span><span class="NAME">this.devices.length</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">className</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"unselected"</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1466</span> </span><span class="WHIT">	            </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1467</span> </span><span class="WHIT">	            </span><span class="NAME">this.statusElement.show</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1468</span> </span><span class="WHIT">	            </span><span class="WHIT">
<span class='line'>1469</span> </span><span class="WHIT">	            </span><span class="COMM">// Set the new device to talk to</span><span class="WHIT">
<span class='line'>1470</span> </span><span class="WHIT">	            </span><span class="NAME">this.getController</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">setDeviceNumber</span><span class="PUNC">(</span><span class="NAME">deviceIndex</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1471</span> </span><span class="WHIT">	            </span><span class="NAME">this.displayHealthDataButtonIfNeeded</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1472</span> </span><span class="WHIT">	            </span><span class="COMM">// Update the class names in the entire list</span><span class="WHIT">
<span class='line'>1473</span> </span><span class="WHIT">	            </span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">j</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">j</span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">this.devices.length</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">j</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1474</span> </span><span class="WHIT">	               </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">listItem</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">deviceListElement.childNodes</span><span class="PUNC">[</span><span class="NAME">j</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1475</span> </span><span class="WHIT">	               </span><span class="NAME">listItem.className</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">j</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">this.getController</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">deviceNumber</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="STRN">"selected"</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"unselected"</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1476</span> </span><span class="WHIT">	            </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1477</span> </span><span class="WHIT">	            </span><span class="COMM">// The callback function has to take these two parameters!  Even if it ignores em.</span><span class="WHIT">
<span class='line'>1478</span> </span><span class="WHIT">	            </span><span class="NAME">callback.call</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">deviceIndex</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.devices</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.getController</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getCurrentDeviceXml</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1479</span> </span><span class="WHIT">	        </span><span class="PUNC">}</span><span class="PUNC">.</span><span class="NAME">bind</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="NAME">deviceListElement</span><span class="PUNC">,</span><span class="NAME">i</span><span class="PUNC">,</span><span class="NAME">this.devices</span><span class="PUNC">,</span><span class="NAME">callback</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">//bind with parameter</span><span class="WHIT">
<span class='line'>1480</span> </span><span class="WHIT">	        </span><span class="NAME">listItem.appendChild</span><span class="PUNC">(</span><span class="NAME">itemLink</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1481</span> </span><span class="WHIT">	        </span><span class="NAME">deviceListElement.appendChild</span><span class="PUNC">(</span><span class="NAME">listItem</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1482</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1483</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>1484</span> </span><span class="WHIT">		</span><span class="COMM">// Select first device</span><span class="WHIT">
<span class='line'>1485</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.options.autoSelectFirstDevice</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1486</span> </span><span class="WHIT">		    </span><span class="NAME">this.options.afterSelectDevice.call</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.getController</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">deviceNumber</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.devices</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.garminController.getCurrentDeviceXml</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1487</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1488</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1489</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>1490</span> </span><span class="WHIT">	</span><span class="COMM">/* Process the filename, trim it if its too long
<span class='line'>1491</span> 	 * @param {Garmin.Device} the device whose name is to be processed
<span class='line'>1492</span> 	 * @return {String} the truncated device name, according to the max size set in the display options
<span class='line'>1493</span> 	 * @see Garmin.DeviceDisplayDefaultOptions.deviceLabelMaxSize
<span class='line'>1494</span> 	 * @see Garmin.Device
<span class='line'>1495</span> 	 */</span><span class="WHIT">
<span class='line'>1496</span> </span><span class="WHIT">	</span><span class="NAME">getShortDeviceName</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">device</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1497</span> </span><span class="WHIT">		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">deviceName</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">device.getDisplayName</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1498</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">deviceName.length</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NAME">this.options.deviceLabelMaxSize</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1499</span> </span><span class="WHIT">			</span><span class="NAME">deviceName</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">deviceName.substring</span><span class="PUNC">(</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.options.deviceLabelMaxSize</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">"..."</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1500</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1501</span> </span><span class="WHIT">		</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">deviceName</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1502</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1503</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>1504</span> </span><span class="WHIT">	</span><span class="COMM">/* Update the device preview display to show the device selected by the user.
<span class='line'>1505</span> 	 * Hides the input list and shows the preview element.
<span class='line'>1506</span> 	 * @param int deviceNumber - the device number (index) selected by the user
<span class='line'>1507</span> 	 * @param String deviceXml - describes the device (unused right now)  
<span class='line'>1508</span> 	 */</span><span class="WHIT">
<span class='line'>1509</span> </span><span class="WHIT">	</span><span class="NAME">_updateDevicePreview</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">deviceNumber</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">deviceXml</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1510</span> </span><span class="WHIT">        </span><span class="NAME">this.devicePreviewElement.innerHTML</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'&lt;p>'</span><span class="PUNC">+</span><span class="NAME">this.getShortDeviceName</span><span class="PUNC">(</span><span class="NAME">this.devices</span><span class="PUNC">[</span><span class="NAME">deviceNumber</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">+</span><span class="STRN">'&lt;/p>'</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1511</span> </span><span class="WHIT">        </span><span class="NAME">this.devicePreviewElement.show</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1512</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.deviceSelectInput</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">this.deviceSelectInput.hide</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1513</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.connectedDevices</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">this.connectedDevices.hide</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1514</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1515</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>1516</span> </span><span class="WHIT">    </span><span class="COMM">////////////////////////////// READ METHODS ////////////////////////////// </span><span class="WHIT">
<span class='line'>1517</span> </span><span class="WHIT">    </span><span class="WHIT">
<span class='line'>1518</span> </span><span class="WHIT">    </span><span class="COMM">/** Initiation call for reading from a device.  If a fitness device is detected reads TCX
<span class='line'>1519</span>      * otherwise reads GPX.
<span class='line'>1520</span>      * Upon completion if the afterFinishReadFromDevice method is defined
<span class='line'>1521</span>      * it will be called.  At this time you may also obtain location data using the 
<span class='line'>1522</span>      * getTracks and getWaypoints methods.
<span class='line'>1523</span>      * @param {Array} readDataTypes list of read data types
<span class='line'>1524</span>      * @see Garmin.DeviceControl.FILE_TYPES
<span class='line'>1525</span>      */</span><span class="WHIT">
<span class='line'>1526</span> </span><span class="WHIT">	</span><span class="NAME">readFromDevice</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">readDataTypes</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1527</span> </span><span class="WHIT">		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">deviceNumber</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getController</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">deviceNumber</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1528</span> </span><span class="WHIT">		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">device</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getController</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getDevices</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">[</span><span class="NAME">deviceNumber</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1529</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>1530</span> </span><span class="WHIT">		</span><span class="COMM">// TODO remove this later </span><span class="WHIT">
<span class='line'>1531</span> </span><span class="WHIT">		</span><span class="COMM">// Backwards compatability for deprecated method</span><span class="WHIT">
<span class='line'>1532</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.options.readDataType</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1533</span> </span><span class="WHIT">		    </span><span class="NAME">readDataTypes</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Array</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1534</span> </span><span class="WHIT">		    </span><span class="NAME">readDataTypes</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.readDataType</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1535</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1536</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>1537</span> </span><span class="WHIT">		</span><span class="COMM">// Read the first supported type in the list</span><span class="WHIT">
<span class='line'>1538</span> </span><span class="WHIT">		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">supported</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1539</span> </span><span class="WHIT">		</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">readDataTypes.length</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1540</span> </span><span class="WHIT">		    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">datatype</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">readDataTypes</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1541</span> </span><span class="WHIT">		    </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">supported</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">this.getController</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">checkDeviceReadSupport</span><span class="PUNC">(</span><span class="NAME">datatype</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1542</span> </span><span class="WHIT">		        </span><span class="NAME">supported</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">datatype</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1543</span> </span><span class="WHIT">		        </span><span class="WHIT">
<span class='line'>1544</span> </span><span class="WHIT">		        </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.options.uploadSelectedActivities</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1545</span> </span><span class="WHIT">    		        </span><span class="COMM">// Handle directory types</span><span class="WHIT">
<span class='line'>1546</span> </span><span class="WHIT">    		        </span><span class="KEYW">switch</span><span class="PUNC">(</span><span class="NAME">datatype</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1547</span> </span><span class="WHIT">    		        	</span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.gpxDir</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>1548</span> </span><span class="WHIT">                		</span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.tcxDir</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>1549</span> </span><span class="WHIT">                		</span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.fitDir</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>1550</span> </span><span class="WHIT">                		</span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.fitHealthData</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>1551</span> </span><span class="WHIT">                		</span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.readableDir</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>1552</span> </span><span class="WHIT">                            </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.activityTable</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1553</span> </span><span class="WHIT">                                </span><span class="NAME">this._generateActivityTableElement</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1554</span> </span><span class="WHIT">                            </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="WHIT">
<span class='line'>1555</span> </span><span class="WHIT">                            </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="WHIT">
<span class='line'>1556</span> </span><span class="WHIT">                            </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1557</span> </span><span class="WHIT">                                </span><span class="NAME">this._clearActivityTable</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1558</span> </span><span class="WHIT">                            </span><span class="PUNC">}</span><span class="WHIT">     		</span><span class="WHIT">
<span class='line'>1559</span> </span><span class="WHIT">                            </span><span class="NAME">this._generateAndDisplayDeviceBrowser</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1560</span> </span><span class="WHIT">    		        </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1561</span> </span><span class="WHIT">		        </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1562</span> </span><span class="WHIT">		        </span><span class="NAME">this.getController</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">readDataFromDevice</span><span class="PUNC">(</span><span class="NAME">datatype</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.options.fileListingOptions</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1563</span> </span><span class="WHIT">		    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1564</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1565</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>1566</span> </span><span class="WHIT">		</span><span class="COMM">// No supported types found, throw error</span><span class="WHIT">
<span class='line'>1567</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">supported</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1568</span> </span><span class="WHIT">    	    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">error</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Error</span><span class="PUNC">(</span><span class="NAME">this.options.unsupportedDevice</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1569</span> </span><span class="WHIT">    	    </span><span class="NAME">error.name</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"UnsupportedDataTypeException"</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1570</span> </span><span class="WHIT">    	    </span><span class="NAME">this.handleException</span><span class="PUNC">(</span><span class="NAME">error</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1571</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1572</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1573</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>1574</span> </span><span class="WHIT">    </span><span class="COMM">/** Read the filtered activities.  Filtered activities are those picked
<span class='line'>1575</span>      * by the API as well as any user-selected activities, if applicable.  
<span class='line'>1576</span> 	 * 
<span class='line'>1577</span> 	 * Activities may be uploaded after being read.
<span class='line'>1578</span> 	 * 
<span class='line'>1579</span> 	 * Filtered activities are detected before
<span class='line'>1580</span> 	 * the activities themselves are read, and data filters filter the data
<span class='line'>1581</span> 	 * after the activities are read.
<span class='line'>1582</span> 	 * 
<span class='line'>1583</span> 	 * @see Garmin.DeviceDisplay#event:onFinishUploads
<span class='line'>1584</span> 	 */</span><span class="WHIT">
<span class='line'>1585</span> </span><span class="WHIT">	</span><span class="NAME">readFilteredActivities</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1586</span> </span><span class="WHIT">	    </span><span class="COMM">// Make sure there are selected activities to read</span><span class="WHIT">
<span class='line'>1587</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this._directoryHasSelected</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1588</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.advancedUploadMode</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1589</span> </span><span class="WHIT">                </span><span class="COMM">// Alert user to select</span><span class="WHIT">
<span class='line'>1590</span> </span><span class="WHIT">                </span><span class="NAME">alert</span><span class="PUNC">(</span><span class="NAME">this.options.errorActivitySelect</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1591</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1592</span> </span><span class="WHIT">                </span><span class="COMM">// No new activities</span><span class="WHIT">
<span class='line'>1593</span> </span><span class="WHIT">                </span><span class="NAME">this.numQueuedActivities</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1594</span> </span><span class="WHIT">                </span><span class="NAME">this.setStatus</span><span class="PUNC">(</span><span class="NAME">this.options.noFilteredActivities</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1595</span> </span><span class="WHIT">                </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.options.uploadSelectedActivities</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1596</span> </span><span class="WHIT">                    </span><span class="NAME">this.getController</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">_broadcaster.dispatch</span><span class="PUNC">(</span><span class="STRN">"onFinishUploads"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="NAME">display</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="WHIT"> </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1597</span> </span><span class="WHIT">                </span><span class="PUNC">}</span><span class="WHIT">            </span><span class="WHIT">
<span class='line'>1598</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1599</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1600</span> </span><span class="WHIT">        	</span><span class="NAME">this.activities</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1601</span> </span><span class="WHIT">        	</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.readTracksSelect</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1602</span> </span><span class="WHIT">            	</span><span class="NAME">this.readTracksSelect.length</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>1603</span> </span><span class="WHIT">        	</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1604</span> </span><span class="WHIT">        	</span><span class="NAME">this.readSelectedButton.disabled</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1605</span> </span><span class="WHIT">        	</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.options.useLinks</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1606</span> </span><span class="WHIT">        	    </span><span class="NAME">this.readSelectedButton.hide</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1607</span> </span><span class="WHIT">        	</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1608</span> </span><span class="WHIT">        	</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.checkAllBox</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1609</span> </span><span class="WHIT">        	  </span><span class="NAME">this.checkAllBox.disabled</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1610</span> </span><span class="WHIT">        	</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1611</span> </span><span class="WHIT">    	</span><span class="WHIT">
<span class='line'>1612</span> </span><span class="WHIT">    	    </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.options.useDeviceBrowser</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">this.advancedUploadMode</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1613</span> </span><span class="WHIT">    	       </span><span class="NAME">this.statusElement.hide</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">  </span><span class="WHIT">
<span class='line'>1614</span> </span><span class="WHIT">    	    </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1615</span> </span><span class="WHIT">        	   </span><span class="NAME">this.showProgressBar</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1616</span> </span><span class="WHIT">    	    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1617</span> </span><span class="WHIT">    	    </span><span class="WHIT">
<span class='line'>1618</span> </span><span class="WHIT">    	    </span><span class="NAME">this._populateActivityQueue</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1619</span> </span><span class="WHIT">    </span><span class="WHIT">
<span class='line'>1620</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.fileTypeRead</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.tcxDir</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1621</span> </span><span class="WHIT">                </span><span class="NAME">this.fileTypeRead</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.tcxDetail</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1622</span> </span><span class="WHIT">                </span><span class="NAME">this._readNextSelected</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1623</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.fileTypeRead</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.fitDir</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1624</span> </span><span class="WHIT">                </span><span class="NAME">this.fileTypeRead</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.fit</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1625</span> </span><span class="WHIT">                </span><span class="NAME">this._readNextSelected</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1626</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.fileTypeRead</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.fitHealthData</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1627</span> </span><span class="WHIT">                </span><span class="COMM">//this.fileTypeRead = Garmin.DeviceControl.FILE_TYPES.fit;</span><span class="WHIT">
<span class='line'>1628</span> </span><span class="WHIT">                </span><span class="NAME">this._readNextSelected</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1629</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.fileTypeRead</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.readableDir</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1630</span> </span><span class="WHIT">                </span><span class="COMM">//don't change read type</span><span class="WHIT">
<span class='line'>1631</span> </span><span class="WHIT">                </span><span class="NAME">this._readNextSelected</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1632</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.fileTypeRead</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.gpxDir</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1633</span> </span><span class="WHIT">            	</span><span class="NAME">this.fileTypeRead</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.gpxDetail</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1634</span> </span><span class="WHIT">            	</span><span class="WHIT">
<span class='line'>1635</span> </span><span class="WHIT">            	</span><span class="KEYW">while</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.activityQueue.size</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1636</span> </span><span class="WHIT">            		</span><span class="COMM">// Display "Uploading..."</span><span class="WHIT">
<span class='line'>1637</span> </span><span class="WHIT">            		</span><span class="NAME">this._displayProcessingForCurrentActivity</span><span class="PUNC">(</span><span class="NAME">this.activityQueue.last</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1638</span> </span><span class="WHIT">            		</span><span class="NAME">this.activityQueue.pop</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1639</span> </span><span class="WHIT">            	</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1640</span> 
<span class='line'>1641</span> </span><span class="WHIT">            	</span><span class="NAME">this.garminController.readDataFromDevice</span><span class="PUNC">(</span><span class="NAME">this.fileTypeRead</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1642</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">    		     		    		    	</span><span class="WHIT">
<span class='line'>1643</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1644</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1645</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>1646</span> </span><span class="WHIT">    </span><span class="COMM">/** Generic read method, supporting GPX, TCX, Courses, Workouts, User Profiles, 
<span class='line'>1647</span> 	 * TCX activity directory, and TCX course directory reads. &lt;br/> 
<span class='line'>1648</span>      * &lt;br/>
<span class='line'>1649</span>      * Upon completion if the afterFinishReadFromDevice method is defined
<span class='line'>1650</span>      * it will be called.  At this time you may also obtain location data using the 
<span class='line'>1651</span>      * getTracks and getWaypoints methods.&lt;br/>
<span class='line'>1652</span> 	 * &lt;br/>
<span class='line'>1653</span> 	 * Fitness detail reading (one specific activity) is not supported by this read method, refer to 
<span class='line'>1654</span> 	 * readDetailFromDevice for that. &lt;br/>  
<span class='line'>1655</span> 	 * 
<span class='line'>1656</span>      * @param {String} readDataType - type of data to read.
<span class='line'>1657</span>      * @param {Object} fileListingOptions - additional read options
<span class='line'>1658</span>      * @see Garmin.DeviceControl.FILE_TYPES
<span class='line'>1659</span>      * @see Garmin.DeviceDisplayDefaultOptions.afterFinishReadFromDevice
<span class='line'>1660</span>      * @see Garmin.DeviceDisplayDefaultOptions.fileListingOptions
<span class='line'>1661</span>      */</span><span class="WHIT">
<span class='line'>1662</span> </span><span class="WHIT">	</span><span class="NAME">readSpecificTypeFromDevice</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">readDataType</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">fileListingOptions</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1663</span> </span><span class="WHIT">	    </span><span class="COMM">// Check to make sure device supports reading this type. Must do this at display layer otherwise exception will not</span><span class="WHIT">
<span class='line'>1664</span> </span><span class="WHIT">	    </span><span class="COMM">// bubble up to the user.</span><span class="WHIT">
<span class='line'>1665</span> </span><span class="WHIT">    	</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.getController</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">checkDeviceReadSupport</span><span class="PUNC">(</span><span class="NAME">readDataType</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1666</span> </span><span class="WHIT">    	    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">error</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Error</span><span class="PUNC">(</span><span class="NAME">this.evaluateTemplate</span><span class="PUNC">(</span><span class="NAME">this.options.unsupportedReadDataType</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">dataType</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">readDataType</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1667</span> </span><span class="WHIT">    	    </span><span class="NAME">error.name</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"UnsupportedDataTypeException"</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1668</span> </span><span class="WHIT">    	    </span><span class="NAME">this.handleException</span><span class="PUNC">(</span><span class="NAME">error</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1669</span> </span><span class="WHIT">    	</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1670</span> </span><span class="WHIT">    		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">deviceNumber</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getController</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">deviceNumber</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1671</span> </span><span class="WHIT">    		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">device</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getController</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getDevices</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">[</span><span class="NAME">deviceNumber</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1672</span> </span><span class="WHIT">    		</span><span class="WHIT">
<span class='line'>1673</span> </span><span class="WHIT">    		</span><span class="KEYW">switch</span><span class="PUNC">(</span><span class="NAME">readDataType</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1674</span> </span><span class="WHIT">        		</span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.tcxDir</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>1675</span> </span><span class="WHIT">        		</span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.fitHealthData</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="WHIT">
<span class='line'>1676</span> </span><span class="WHIT">				</span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.readableDir</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>1677</span> </span><span class="WHIT">                    </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.activityTable</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1678</span> </span><span class="WHIT">                        </span><span class="NAME">this._generateActivityTableElement</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1679</span> </span><span class="WHIT">                    </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1680</span> </span><span class="WHIT">                        </span><span class="NAME">this._clearActivityTable</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1681</span> </span><span class="WHIT">                    </span><span class="PUNC">}</span><span class="WHIT">     		</span><span class="WHIT">
<span class='line'>1682</span> </span><span class="WHIT">                    </span><span class="NAME">this._generateAndDisplayDeviceBrowser</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1683</span> </span><span class="WHIT">        			</span><span class="COMM">// no break!  keep on goin'</span><span class="WHIT">
<span class='line'>1684</span> </span><span class="WHIT">        		</span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.gpx</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>1685</span> </span><span class="WHIT">        		</span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.gpxDir</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>1686</span> </span><span class="WHIT">        		</span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.tcx</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>1687</span> </span><span class="WHIT">        		</span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.crs</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>1688</span> </span><span class="WHIT">        		</span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.wkt</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>1689</span> </span><span class="WHIT">        		</span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.tcxProfile</span><span class="PUNC">:</span><span class="WHIT">        		</span><span class="WHIT">
<span class='line'>1690</span> </span><span class="WHIT">        		</span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.crsDir</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>1691</span> </span><span class="WHIT">        		</span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.deviceXml</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>1692</span> </span><span class="WHIT">        			</span><span class="NAME">this.getController</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">readDataFromDevice</span><span class="PUNC">(</span><span class="NAME">readDataType</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">fileListingOptions</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1693</span> </span><span class="WHIT">        			</span><span class="KEYW">break</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1694</span> </span><span class="WHIT">        		</span><span class="KEYW">default</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>1695</span> </span><span class="WHIT">        			</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">error</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Error</span><span class="PUNC">(</span><span class="NAME">Garmin.DeviceControl.MESSAGES.invalidFileType</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">readDataType</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1696</span> </span><span class="WHIT">    				</span><span class="NAME">error.name</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"InvalidTypeException"</span><span class="PUNC">;</span><span class="WHIT">			</span><span class="WHIT">
<span class='line'>1697</span> </span><span class="WHIT">    				</span><span class="NAME">this.handleException</span><span class="PUNC">(</span><span class="NAME">error</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1698</span> </span><span class="WHIT">        	</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="WHIT">
<span class='line'>1699</span> </span><span class="WHIT">    	</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1700</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1701</span> 
<span class='line'>1702</span> </span><span class="WHIT">    </span><span class="COMM">/** Call-back for device read progress.
<span class='line'>1703</span>      * @param {JSON} json the progress report in JSON format
<span class='line'>1704</span>      * @see Garmin.DeviceDisplay#onFinishReadFromDevice
<span class='line'>1705</span>      * @event
<span class='line'>1706</span>      */</span><span class="WHIT">
<span class='line'>1707</span> </span><span class="WHIT">    </span><span class="NAME">onProgressReadFromDevice</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">json</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1708</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.options.showProgressBar</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1709</span> </span><span class="WHIT">	    	</span><span class="NAME">this.updateProgressBar</span><span class="PUNC">(</span><span class="NAME">this.progressBarDisplay</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">json.progress.getPercentage</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1710</span> </span><span class="WHIT">	    	</span><span class="NAME">this.updateProgressBarText</span><span class="PUNC">(</span><span class="NAME">this.progressBarText</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.options.showDetailedStatus</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">json.progress.text</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">json.progress.text</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">json.progress.text</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1711</span> </span><span class="WHIT">	    </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1712</span> </span><span class="WHIT">    	   </span><span class="NAME">this.setStatus</span><span class="PUNC">(</span><span class="NAME">json.progress</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1713</span> </span><span class="WHIT">	    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1714</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1715</span> </span><span class="WHIT">    </span><span class="WHIT">
<span class='line'>1716</span> </span><span class="WHIT">    </span><span class="COMM">/** Call-back for device read cancelled.
<span class='line'>1717</span>      * @see Garmin.DeviceControl
<span class='line'>1718</span>      * @param {JSON} json the progress report in JSON format
<span class='line'>1719</span>      */</span><span class="WHIT">
<span class='line'>1720</span> </span><span class="WHIT">	</span><span class="NAME">onCancelReadFromDevice</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">json</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1721</span> </span><span class="WHIT">    	</span><span class="NAME">this.setStatus</span><span class="PUNC">(</span><span class="NAME">this.options.cancelReadStatusText</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1722</span> </span><span class="WHIT">    	</span><span class="NAME">this.resetUI</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1723</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1724</span> 
<span class='line'>1725</span> </span><span class="WHIT">    </span><span class="COMM">/** Call-back for device read.
<span class='line'>1726</span>      * @see Garmin.DeviceControl
<span class='line'>1727</span>      * @param {JSON} json the progress report in JSON format
<span class='line'>1728</span>      */</span><span class="WHIT">
<span class='line'>1729</span> </span><span class="WHIT">    </span><span class="NAME">onFinishReadFromDevice</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">json</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1730</span> </span><span class="WHIT">    	</span><span class="COMM">//Track the original type so that the UI can react accordingly later</span><span class="WHIT">
<span class='line'>1731</span> </span><span class="WHIT">    	</span><span class="NAME">this.originalFileTypeRead</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.fileTypeRead</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1732</span> </span><span class="WHIT">    	</span><span class="NAME">this.fileTypeRead</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">json.controller.gpsDataType</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1733</span> </span><span class="WHIT">    	</span><span class="NAME">this.readDataDoc</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">json.controller.gpsData</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1734</span> </span><span class="WHIT">	    </span><span class="NAME">this.readDataString</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">json.controller.gpsDataString</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1735</span> </span><span class="WHIT">    	</span><span class="WHIT">
<span class='line'>1736</span> </span><span class="WHIT">		</span><span class="NAME">this.setStatus</span><span class="PUNC">(</span><span class="NAME">this.options.dataReadProcessing</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1737</span> </span><span class="WHIT">	    </span><span class="NAME">this.resetUI</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1738</span> </span><span class="WHIT">	    </span><span class="WHIT">
<span class='line'>1739</span> </span><span class="WHIT">	    </span><span class="NAME">this.clearMapDisplay</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1740</span> 
<span class='line'>1741</span> </span><span class="WHIT">    	</span><span class="COMM">// select the correct factory for the parsing job, except for binary, which just passes through</span><span class="WHIT">
<span class='line'>1742</span> </span><span class="WHIT">    	</span><span class="KEYW">switch</span><span class="PUNC">(</span><span class="NAME">this.fileTypeRead</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1743</span> </span><span class="WHIT">    		</span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.tcx</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>1744</span> </span><span class="WHIT">    		</span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.tcxDir</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>1745</span> </span><span class="WHIT">    		</span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.tcxDetail</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>1746</span> </span><span class="WHIT">    			</span><span class="NAME">this.factory</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Garmin.TcxActivityFactory</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1747</span> </span><span class="WHIT">    			</span><span class="KEYW">break</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1748</span> </span><span class="WHIT">    		</span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.gpx</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>1749</span> </span><span class="WHIT">    		</span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.gpxDir</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>1750</span> </span><span class="WHIT">    		</span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.gpxDetail</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>1751</span> </span><span class="WHIT">    			</span><span class="NAME">this.factory</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Garmin.GpxActivityFactory</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1752</span> </span><span class="WHIT">    			</span><span class="KEYW">break</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1753</span> </span><span class="WHIT">    		</span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.fitHealthData</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>1754</span> </span><span class="WHIT">    		</span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.fitDir</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>1755</span> </span><span class="WHIT">			</span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.readableDir</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>1756</span> </span><span class="WHIT">    			</span><span class="NAME">this.factory</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Garmin.DirectoryFactory</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1757</span> </span><span class="WHIT">    			</span><span class="KEYW">break</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1758</span> </span><span class="WHIT">    		</span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.fit</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>1759</span> </span><span class="WHIT">    		</span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.binary</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>1760</span> </span><span class="WHIT">                </span><span class="COMM">// Post to server immediately (and finishes reading activities on the queue)</span><span class="WHIT">
<span class='line'>1761</span> </span><span class="WHIT">		    	</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.options.uploadSelectedActivities</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1762</span> </span><span class="WHIT">	    		    </span><span class="COMM">// Compressed data</span><span class="WHIT">
<span class='line'>1763</span> </span><span class="WHIT">	    		    </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.options.uploadCompressedData</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1764</span> </span><span class="WHIT">                	   </span><span class="NAME">this.readDataString</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">json.controller.gpsDataStringCompressed</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1765</span> </span><span class="WHIT">                	</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="WHIT">
<span class='line'>1766</span> </span><span class="WHIT">                	</span><span class="NAME">this._postDataUpdateDisplay</span><span class="PUNC">(</span><span class="NAME">this.readDataString</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1767</span> </span><span class="WHIT">	    		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1768</span> </span><span class="WHIT">	    			</span><span class="NAME">this._finishReadProcessing</span><span class="PUNC">(</span><span class="NAME">json</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1769</span> </span><span class="WHIT">    		    </span><span class="KEYW">return</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1770</span> </span><span class="WHIT">    		    </span><span class="WHIT">
<span class='line'>1771</span> </span><span class="WHIT">    		</span><span class="KEYW">default</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>1772</span> </span><span class="WHIT">	    		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">error</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Error</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">this.fileTypeRead</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1773</span> </span><span class="WHIT">				</span><span class="NAME">error.name</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"InvalidTypeException"</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1774</span> </span><span class="WHIT">				</span><span class="NAME">this.handleException</span><span class="PUNC">(</span><span class="NAME">error</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1775</span> </span><span class="WHIT">    	</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1776</span> 
<span class='line'>1777</span> </span><span class="WHIT">		</span><span class="COMM">// parse the data into activities if possible</span><span class="WHIT">
<span class='line'>1778</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.factory</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1779</span> </span><span class="WHIT">			</span><span class="COMM">// Convert the data obtained from the device into activities.</span><span class="WHIT">
<span class='line'>1780</span> </span><span class="WHIT">			</span><span class="COMM">// If we're starting a new read session (as opposed to individual </span><span class="WHIT">
<span class='line'>1781</span> </span><span class="WHIT">			</span><span class="COMM">// activity reads from the activity directory), start a new activities array</span><span class="WHIT">
<span class='line'>1782</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.activities</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1783</span> </span><span class="WHIT">				</span><span class="NAME">this.activities</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Array</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1784</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1785</span> </span><span class="WHIT">			</span><span class="WHIT">
<span class='line'>1786</span> </span><span class="WHIT">			</span><span class="COMM">// Populate this.activities</span><span class="WHIT">
<span class='line'>1787</span> </span><span class="WHIT">			</span><span class="KEYW">switch</span><span class="PUNC">(</span><span class="NAME">this.fileTypeRead</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1788</span> </span><span class="WHIT">				</span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.gpxDir</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>1789</span> </span><span class="WHIT">				</span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.tcxDir</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>1790</span> </span><span class="WHIT">				</span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.fitHealthData</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>1791</span> </span><span class="WHIT">				</span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.fitDir</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>1792</span> </span><span class="WHIT">				</span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.readableDir</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>1793</span> </span><span class="WHIT">				    </span><span class="COMM">// TODO should merge tcx and fit directory types at some point so we can share code</span><span class="WHIT">
<span class='line'>1794</span> </span><span class="WHIT">				    </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.fileTypeRead</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.tcxDir</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1795</span> </span><span class="WHIT">                        </span><span class="NAME">this.activities</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.factory.parseDocument</span><span class="PUNC">(</span><span class="NAME">this.readDataDoc</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1796</span> </span><span class="WHIT">                        </span><span class="NAME">this._createActivityDirectory</span><span class="PUNC">(</span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.tcxDir</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.activities</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1797</span> </span><span class="WHIT">				    </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.fileTypeRead</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.fitDir</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT">
<span class='line'>1798</span> </span><span class="WHIT">				              </span><span class="NAME">this.fileTypeRead</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.readableDir</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1799</span> </span><span class="WHIT">	    			    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">files</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.factory.parseDocument</span><span class="PUNC">(</span><span class="NAME">this.readDataDoc</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1800</span> </span><span class="WHIT">	    			    </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.fileTypeRead</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.fitDir</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>1801</span> </span><span class="WHIT">	    			    </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1802</span> </span><span class="WHIT">    	    				</span><span class="COMM">// Only use activity files for the activity directory</span><span class="WHIT">
<span class='line'>1803</span> </span><span class="WHIT">                        	</span><span class="NAME">files</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Garmin.DirectoryFactory.getActivityFiles</span><span class="PUNC">(</span><span class="NAME">files</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1804</span> </span><span class="WHIT">    	    			</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1805</span> </span><span class="WHIT">    	    			</span><span class="NAME">this._createActivityDirectory</span><span class="PUNC">(</span><span class="NAME">this.fileTypeRead</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">files</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1806</span> </span><span class="WHIT">				    </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.fileTypeRead</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.fitHealthData</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1807</span> </span><span class="WHIT">	    			    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">files</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.factory.parseDocument</span><span class="PUNC">(</span><span class="NAME">this.readDataDoc</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1808</span> </span><span class="WHIT">                        </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">healthFiles</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Garmin.DirectoryFactory.getHealthDataFiles</span><span class="PUNC">(</span><span class="NAME">files</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1809</span> </span><span class="WHIT">    	    			</span><span class="COMM">// Only use activity files for the activity directory</span><span class="WHIT">
<span class='line'>1810</span> </span><span class="WHIT">    	    			</span><span class="NAME">this._createActivityDirectory</span><span class="PUNC">(</span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.fitHealthData</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">healthFiles</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">				    </span><span class="WHIT">
<span class='line'>1811</span> </span><span class="WHIT">				    </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.fileTypeRead</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.gpxDir</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1812</span> </span><span class="WHIT">				    	</span><span class="NAME">this.activities</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.factory.parseDocumentByType</span><span class="PUNC">(</span><span class="NAME">this.readDataDoc</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">Garmin.GpxActivityFactory.GPX_TYPE.tracks</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1813</span> </span><span class="WHIT">				    	</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.options.uploadSelectedActivities</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1814</span> </span><span class="WHIT">				    	   </span><span class="NAME">this._createActivityDirectory</span><span class="PUNC">(</span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.gpxDir</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.activities</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1815</span> </span><span class="WHIT">				    	</span><span class="PUNC">}</span><span class="WHIT">				    	</span><span class="WHIT">
<span class='line'>1816</span> </span><span class="WHIT">				    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1817</span> </span><span class="WHIT">	    			</span><span class="WHIT">
<span class='line'>1818</span> </span><span class="WHIT">	    			</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.options.detectNewActivities</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">this.options.uploadSelectedActivities</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1819</span> </span><span class="WHIT">        	            </span><span class="COMM">// No activities on device  </span><span class="WHIT">
<span class='line'>1820</span> </span><span class="WHIT">                		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.activityDirectory.size</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1821</span> </span><span class="WHIT">        	                </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.advancedUploadMode</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1822</span> </span><span class="WHIT">                    		    </span><span class="NAME">this._updateLoadingContent</span><span class="PUNC">(</span><span class="NAME">this.options.noActivitiesOnDevice</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1823</span> </span><span class="WHIT">                    		</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1824</span> </span><span class="WHIT">                                </span><span class="NAME">this.getController</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">_broadcaster.dispatch</span><span class="PUNC">(</span><span class="STRN">"onFinishUploads"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="NAME">display</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="WHIT"> </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1825</span> </span><span class="WHIT">        	                </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1826</span> </span><span class="WHIT">                		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1827</span> </span><span class="WHIT">        	            </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1828</span> </span><span class="WHIT">    	    			    </span><span class="COMM">// There are activities to compare</span><span class="WHIT">
<span class='line'>1829</span> </span><span class="WHIT">    	    			    </span><span class="NAME">this.activityMatcher</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Garmin.ActivityMatcher</span><span class="PUNC">(</span><span class="NAME">this.garminController.getCurrentDeviceXml</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="WHIT">
<span class='line'>1830</span> </span><span class="WHIT">                                </span><span class="NAME">this.activityDirectory.getIds</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.options.syncDataUrl</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.options.syncDataOptions</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="WHIT">
<span class='line'>1831</span> </span><span class="WHIT">                                </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._finishReadProcessing</span><span class="PUNC">(</span><span class="NAME">json</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">.</span><span class="NAME">bind</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1832</span> </span><span class="WHIT">    	    			    </span><span class="NAME">this.activityMatcher.run</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1833</span> </span><span class="WHIT">        	            </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1834</span> </span><span class="WHIT">	    			</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1835</span> </span><span class="WHIT">	    			    </span><span class="COMM">// Finished reading activities in queue, if any, so list them.</span><span class="WHIT">
<span class='line'>1836</span> </span><span class="WHIT">	    			    </span><span class="NAME">this._finishReadProcessing</span><span class="PUNC">(</span><span class="NAME">json</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1837</span> </span><span class="WHIT">	    			</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1838</span> </span><span class="WHIT">					</span><span class="KEYW">break</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1839</span> </span><span class="WHIT">				</span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.gpxDetail</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>1840</span> </span><span class="WHIT">				    </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.options.uploadSelectedActivities</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">      </span><span class="WHIT">
<span class='line'>1841</span> </span><span class="WHIT">                        </span><span class="NAME">this._postDataUpdateDisplay</span><span class="PUNC">(</span><span class="NAME">this.readDataString</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1842</span> </span><span class="WHIT">                    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1843</span> </span><span class="WHIT">                    </span><span class="KEYW">break</span><span class="PUNC">;</span><span class="WHIT">          </span><span class="WHIT">
<span class='line'>1844</span> </span><span class="WHIT">				</span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.tcxDetail</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>1845</span> </span><span class="WHIT">	    			</span><span class="WHIT">
<span class='line'>1846</span> </span><span class="WHIT">	    			</span><span class="COMM">// Store this read activity</span><span class="WHIT">
<span class='line'>1847</span> </span><span class="WHIT">	    			</span><span class="COMM">// TODO: May not need this line, merge logic with binary type</span><span class="WHIT">
<span class='line'>1848</span> </span><span class="WHIT">	    			</span><span class="NAME">this.activities</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.activities.concat</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.factory.parseDocument</span><span class="PUNC">(</span><span class="NAME">this.readDataDoc</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1849</span> </span><span class="WHIT">	    			</span><span class="WHIT">
<span class='line'>1850</span> </span><span class="WHIT">		    		</span><span class="COMM">// Post to server (and finishes reading activities on the queue)</span><span class="WHIT">
<span class='line'>1851</span> </span><span class="WHIT">		    		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.options.uploadSelectedActivities</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1852</span> </span><span class="WHIT">		    		    </span><span class="COMM">// Compressed data</span><span class="WHIT">
<span class='line'>1853</span> </span><span class="WHIT">		    		    </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.options.uploadCompressedData</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1854</span> </span><span class="WHIT">                    	   </span><span class="NAME">this.readDataString</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">json.controller.gpsDataStringCompressed</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1855</span> </span><span class="WHIT">                    	</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="WHIT">
<span class='line'>1856</span> </span><span class="WHIT">                    	</span><span class="NAME">this._postDataUpdateDisplay</span><span class="PUNC">(</span><span class="NAME">this.readDataString</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1857</span> </span><span class="WHIT">		    		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1858</span> </span><span class="WHIT">		    		</span><span class="COMM">// Finished reading activities in queue, if any, so list them.</span><span class="WHIT">
<span class='line'>1859</span> </span><span class="WHIT">		    		</span><span class="NAME">this._finishReadProcessing</span><span class="PUNC">(</span><span class="NAME">json</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1860</span> </span><span class="WHIT">					</span><span class="KEYW">break</span><span class="PUNC">;</span><span class="WHIT">			</span><span class="WHIT">
<span class='line'>1861</span> </span><span class="WHIT">	    		</span><span class="KEYW">default</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>1862</span> </span><span class="WHIT">	    			</span><span class="NAME">this.activities</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.factory.parseDocument</span><span class="PUNC">(</span><span class="NAME">this.readDataDoc</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1863</span> </span><span class="WHIT">	    			</span><span class="COMM">// filter the activities</span><span class="WHIT">
<span class='line'>1864</span> </span><span class="WHIT">    				</span><span class="NAME">this._applyDataFilters</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1865</span> </span><span class="WHIT">            		</span><span class="COMM">// Finished reading activities in queue, if any, so list them.</span><span class="WHIT">
<span class='line'>1866</span> </span><span class="WHIT">    				</span><span class="NAME">this._finishReadProcessing</span><span class="PUNC">(</span><span class="NAME">json</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1867</span> </span><span class="WHIT">	    			</span><span class="KEYW">break</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1868</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1869</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>1870</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1871</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1872</span> </span><span class="WHIT">    </span><span class="WHIT">
<span class='line'>1873</span> </span><span class="WHIT">    </span><span class="NAME">_postDataUpdateDisplay</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">data</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1874</span> </span><span class="WHIT">        </span><span class="COMM">// Post to server (and finishes reading activities on the queue)</span><span class="WHIT">
<span class='line'>1875</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.loadingContentElement</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1876</span> </span><span class="WHIT">        	</span><span class="NAME">this.loadingContentElement.innerHTML</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.uploadingStatusText</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1877</span> </span><span class="WHIT">        	</span><span class="NAME">this.loadingContentElement.show</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1878</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1879</span> </span><span class="WHIT">		</span><span class="NAME">this._postActivityToServer</span><span class="PUNC">(</span><span class="NAME">data</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1880</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1881</span> 
<span class='line'>1882</span> </span><span class="WHIT">	</span><span class="NAME">_applyDataFilters</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1883</span> </span><span class="WHIT">		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">dataFilters</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.dataFilters</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1884</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">dataFilters</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1885</span> </span><span class="WHIT">			</span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">dataFilters.length</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1886</span> </span><span class="WHIT">				</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">dataFilters</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">run</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1887</span> </span><span class="WHIT">					</span><span class="NAME">dataFilters</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">run</span><span class="PUNC">(</span><span class="NAME">this.activities</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">garminFilterQueue</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1888</span> </span><span class="WHIT">				</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1889</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1890</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1891</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1892</span> 
<span class='line'>1893</span> </span><span class="WHIT">    </span><span class="COMM">/** Process the read data.  Calls afterFinishReadFromDevice when finished.
<span class='line'>1894</span>      * @see Garmin.DeviceDisplay.afterFinishReadFromDevice
<span class='line'>1895</span>      * @param {JSON} json the progress report in JSON format
<span class='line'>1896</span>      */</span><span class="WHIT">
<span class='line'>1897</span> </span><span class="WHIT">	</span><span class="NAME">_finishReadProcessing</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">json</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1898</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">garminFilterQueue</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">garminFilterQueue.length</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1899</span> </span><span class="WHIT">			</span><span class="COMM">//console.debug("waiting for filters to finish...");</span><span class="WHIT">
<span class='line'>1900</span> </span><span class="WHIT">			</span><span class="NAME">setTimeout</span><span class="PUNC">(</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="NAME">this._finishReadProcessing</span><span class="PUNC">(</span><span class="NAME">json</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="PUNC">}</span><span class="PUNC">.</span><span class="NAME">bind</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">500</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1901</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1902</span> </span><span class="WHIT">			</span><span class="WHIT">
<span class='line'>1903</span> </span><span class="WHIT">			</span><span class="COMM">// list activities and set status to indicate how many were found</span><span class="WHIT">
<span class='line'>1904</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.activityQueue</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">this.activityQueue.length</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1905</span> </span><span class="WHIT">		    	</span><span class="WHIT">
<span class='line'>1906</span> </span><span class="WHIT">	    		</span><span class="COMM">// List the activities</span><span class="WHIT">
<span class='line'>1907</span> </span><span class="WHIT">		    	</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.fileTypeRead</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.fitDir</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT">
<span class='line'>1908</span> </span><span class="WHIT">		    	   </span><span class="NAME">this.fileTypeRead</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.fitHealthData</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT">
<span class='line'>1909</span> </span><span class="WHIT">		    	   </span><span class="NAME">this.fileTypeRead</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.readableDir</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1910</span> </span><span class="WHIT">		    	    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">summary</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._listDirectory</span><span class="PUNC">(</span><span class="NAME">this.activityDirectory</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1911</span> </span><span class="WHIT">	    		    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">template</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="WHIT">
<span class='line'>1912</span> </span><span class="WHIT">                	</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.fileTypeRead</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.readableDir</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="WHIT">
<span class='line'>1913</span> </span><span class="WHIT">                		</span><span class="NAME">template</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.filesFound</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1914</span> </span><span class="WHIT">            		</span><span class="PUNC">}</span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1915</span> </span><span class="WHIT">                		</span><span class="NAME">template</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.dataFound</span><span class="WHIT">
<span class='line'>1916</span> </span><span class="WHIT">            		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1917</span> </span><span class="WHIT">	    		    </span><span class="NAME">this.setStatus</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.evaluateTemplate</span><span class="PUNC">(</span><span class="NAME">template</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">summary</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1918</span> </span><span class="WHIT">		    	</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1919</span> </span><span class="WHIT">				</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.activities</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">this.activities.length</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1920</span> </span><span class="WHIT">					</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">summary</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1921</span> </span><span class="WHIT">					</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.fileTypeRead</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.tcxDir</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT">
<span class='line'>1922</span> </span><span class="WHIT">					    </span><span class="NAME">this.fileTypeRead</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.gpxDir</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1923</span> </span><span class="WHIT">						</span><span class="NAME">summary</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._listDirectory</span><span class="PUNC">(</span><span class="NAME">this.activityDirectory</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1924</span> </span><span class="WHIT">					</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1925</span> </span><span class="WHIT">		    			</span><span class="NAME">summary</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._listActivities</span><span class="PUNC">(</span><span class="NAME">this.activities</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1926</span> </span><span class="WHIT">					</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1927</span> </span><span class="WHIT">					</span><span class="WHIT">
<span class='line'>1928</span> </span><span class="WHIT">				    </span><span class="COMM">// Display # of activities found</span><span class="WHIT">
<span class='line'>1929</span> </span><span class="WHIT">	    		    </span><span class="NAME">this.setStatus</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.evaluateTemplate</span><span class="PUNC">(</span><span class="NAME">this.options.dataFound</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">summary</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1930</span> </span><span class="WHIT">				</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1931</span> </span><span class="WHIT">		    	</span><span class="WHIT">
<span class='line'>1932</span> </span><span class="WHIT">		    	</span><span class="COMM">// Disable appropriate buttons after read is finished</span><span class="WHIT">
<span class='line'>1933</span> </span><span class="WHIT">		    	</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.options.uploadSelectedActivities</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1934</span> </span><span class="WHIT">    		    	</span><span class="KEYW">switch</span><span class="PUNC">(</span><span class="NAME">this.fileTypeRead</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1935</span> </span><span class="WHIT">    		    		</span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.gpx</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>1936</span> </span><span class="WHIT">    		    		</span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.gpxDir</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>1937</span> </span><span class="WHIT">    		    		</span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.tcx</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>1938</span> </span><span class="WHIT">    		    		</span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.crs</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>1939</span> </span><span class="WHIT">    		    		</span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.tcxDir</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>1940</span> </span><span class="WHIT">    		    		</span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.crsDir</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>1941</span> </span><span class="WHIT">    		    		</span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.fitHealthData</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>1942</span> </span><span class="WHIT">    		    		</span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.fitDir</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>1943</span> </span><span class="WHIT">    		    		</span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.readableDir</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>1944</span> </span><span class="WHIT">    		    			</span><span class="NAME">this.deviceSelectInput.disabled</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1945</span> </span><span class="WHIT">    		    			</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.advancedUploadMode</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1946</span> </span><span class="WHIT">    		    			    </span><span class="COMM">// Advanced upload</span><span class="WHIT">
<span class='line'>1947</span> </span><span class="WHIT">    		    			    </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.loadingContentElement</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1948</span> </span><span class="WHIT">                                    </span><span class="NAME">this.loadingContentElement.hide</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1949</span> </span><span class="WHIT">    		    			    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1950</span> </span><span class="WHIT">    		    			</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="WHIT">
<span class='line'>1951</span> </span><span class="WHIT">        		    			</span><span class="COMM">// Simple upload</span><span class="WHIT">
<span class='line'>1952</span> </span><span class="WHIT">        		    			</span><span class="NAME">this.progressBar.hide</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1953</span> </span><span class="WHIT">    	        	            </span><span class="NAME">this.uploadProgressBar.show</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1954</span> </span><span class="WHIT">    		    			    </span><span class="NAME">this.readFilteredActivities</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">		    			    </span><span class="WHIT">
<span class='line'>1955</span> </span><span class="WHIT">    		    			</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1956</span> </span><span class="WHIT">    		    			</span><span class="KEYW">break</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1957</span> </span><span class="WHIT">    		    		</span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.gpxDetail</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>1958</span> </span><span class="WHIT">    		    		</span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.tcxDetail</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>1959</span> </span><span class="WHIT">    		    		</span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.crsDetail</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>1960</span> </span><span class="WHIT">    		    		</span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.fit</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>1961</span> </span><span class="WHIT">    		    		</span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.binary</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>1962</span> </span><span class="WHIT">    		    			</span><span class="NAME">this.readSelectedButton.disabled</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1963</span> </span><span class="WHIT">    		    			</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.options.useLinks</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1964</span> </span><span class="WHIT">    		    			    </span><span class="NAME">this.readSelectedButton.show</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1965</span> </span><span class="WHIT">    		    			</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1966</span> </span><span class="WHIT">    		    			</span><span class="NAME">this.readSelectedButton.disabled</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1967</span> </span><span class="WHIT">    		    			</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.checkAllBox</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1968</span> </span><span class="WHIT">    		    			    </span><span class="NAME">this.checkAllBox.disabled</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1969</span> </span><span class="WHIT">    		    			</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1970</span> </span><span class="WHIT">    		    			</span><span class="KEYW">break</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1971</span> </span><span class="WHIT">    		    	</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1972</span> </span><span class="WHIT">		    	</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1973</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1974</span> </span><span class="WHIT">			</span><span class="WHIT">
<span class='line'>1975</span> </span><span class="WHIT">			</span><span class="COMM">// pass data to the user if they want it			</span><span class="WHIT">
<span class='line'>1976</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.options.afterFinishReadFromDevice</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1977</span> </span><span class="WHIT">				</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">dataString</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.factory</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">this.factory.produceString</span><span class="PUNC">(</span><span class="NAME">this.activities</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">json.controller.gpsDataString</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1978</span> </span><span class="WHIT">				</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">dataDoc</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.factory</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">Garmin.XmlConverter.toDocument</span><span class="PUNC">(</span><span class="NAME">dataString</span><span class="PUNC">)</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">json.controller.gpsData</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1979</span> </span><span class="WHIT">	    		</span><span class="NAME">this.options.afterFinishReadFromDevice</span><span class="PUNC">(</span><span class="NAME">dataString</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">dataDoc</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">json.controller.gpsDataType</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.activities</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1980</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1981</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1982</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1983</span> 
<span class='line'>1984</span> </span><span class="WHIT">    </span><span class="COMM">/** As uploads continue processing, this method will be called.  This is called once
<span class='line'>1985</span>      * per upload item.  This does not track byte-progress of a single upload.
<span class='line'>1986</span>      * @event
<span class='line'>1987</span>      * @param {JSON} json the progress report in JSON format
<span class='line'>1988</span>      * @see Garmin.DeviceDisplay#event:onFinishUploads
<span class='line'>1989</span>      */</span><span class="WHIT">
<span class='line'>1990</span> </span><span class="WHIT">    </span><span class="NAME">onProgressUpload</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">json</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1991</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.options.showProgressBar</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1992</span> </span><span class="WHIT">	    	</span><span class="NAME">this.updateProgressBar</span><span class="PUNC">(</span><span class="NAME">this.uploadProgressBarDisplay</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">json.progress.percentage</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1993</span> </span><span class="WHIT">	    	</span><span class="NAME">this.updateProgressBarText</span><span class="PUNC">(</span><span class="NAME">this.uploadProgressBarText</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">json.progress.text</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1994</span> </span><span class="WHIT">	    </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>1995</span> </span><span class="WHIT">    	   </span><span class="NAME">this.setStatus</span><span class="PUNC">(</span><span class="NAME">json.progress</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>1996</span> </span><span class="WHIT">	    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>1997</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>1998</span> </span><span class="WHIT">    </span><span class="WHIT">
<span class='line'>1999</span> </span><span class="WHIT">    </span><span class="COMM">/** Returns the current status of the upload progress based on the activity queue.
<span class='line'>2000</span>      * If there is no upload in progress, all values will be 0. 
<span class='line'>2001</span>      * @returns {JSON} json object with report values and current DeviceDisplay instance
<span class='line'>2002</span>      * @returns json.progress
<span class='line'>2003</span>      * @returns {String} json.progress.current the current upload index from the activity queue
<span class='line'>2004</span>      * @returns {String} json.progress.total whole number of uploads finished
<span class='line'>2005</span>      * @returns {String} json.progress.percentage percentage value of uploads finished 
<span class='line'>2006</span>      * @returns {String} json.progress.text upload progress text to display to user
<span class='line'>2007</span>      * @returns {Garmin.DeviceDisplay} json.display the current DeviceDisplay instance for UI purposes
<span class='line'>2008</span>      */</span><span class="WHIT">
<span class='line'>2009</span> </span><span class="WHIT">    </span><span class="NAME">getUploadProgressJson</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2010</span> </span><span class="WHIT">        </span><span class="WHIT">
<span class='line'>2011</span> </span><span class="WHIT">        </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">currentVal</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2012</span> </span><span class="WHIT">        </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">totalVal</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2013</span> </span><span class="WHIT">        </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">percentageVal</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2014</span> </span><span class="WHIT">        </span><span class="WHIT">
<span class='line'>2015</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.numQueuedActivities</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">this.activityQueue</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">this.activityQueue.length</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2016</span> </span><span class="WHIT">            </span><span class="NAME">currentVal</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2017</span> </span><span class="WHIT">            </span><span class="NAME">totalVal</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2018</span> </span><span class="WHIT">            </span><span class="NAME">percentageVal</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2019</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2020</span> </span><span class="WHIT">            </span><span class="NAME">currentVal</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.numQueuedActivities</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="WHIT"> </span><span class="NAME">this.activityQueue.length</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2021</span> </span><span class="WHIT">            </span><span class="NAME">totalVal</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.numQueuedActivities</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2022</span> </span><span class="WHIT">            </span><span class="NAME">percentageVal</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">currentVal</span><span class="WHIT"> </span><span class="PUNC">/</span><span class="WHIT"> </span><span class="NAME">totalVal</span><span class="WHIT"> </span><span class="PUNC">*</span><span class="WHIT"> </span><span class="NUMB">100</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2023</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2024</span> </span><span class="WHIT">        </span><span class="WHIT">
<span class='line'>2025</span> </span><span class="WHIT">        </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2026</span> </span><span class="WHIT">                    </span><span class="NAME">progress</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2027</span> </span><span class="WHIT">                        </span><span class="NAME">current</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">currentVal</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="WHIT">
<span class='line'>2028</span> </span><span class="WHIT">                        </span><span class="NAME">total</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">totalVal</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2029</span> </span><span class="WHIT">                        </span><span class="NAME">percentage</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">percentageVal</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2030</span> </span><span class="WHIT">                        </span><span class="NAME">text</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">this.evaluateTemplate</span><span class="PUNC">(</span><span class="NAME">this.options.uploadProgressStatusText</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">currentUpload</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">currentVal</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">totalUploads</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">totalVal</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>2031</span> </span><span class="WHIT">                    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2032</span> </span><span class="WHIT">                    </span><span class="NAME">display</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="WHIT">
<span class='line'>2033</span> </span><span class="WHIT">                </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2034</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2035</span> </span><span class="WHIT">    </span><span class="WHIT">
<span class='line'>2036</span> </span><span class="WHIT">	</span><span class="COMM">/* Reads the user-selected activities from the device by using the activity queue. 
<span class='line'>2037</span>      */</span><span class="WHIT">
<span class='line'>2038</span> </span><span class="WHIT">    </span><span class="NAME">_readNextSelected</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">    	</span><span class="WHIT">
<span class='line'>2039</span> </span><span class="WHIT">    	</span><span class="COMM">// Look at the next selected activity on the queue.  (The queue only holds selected activities)    	</span><span class="WHIT">
<span class='line'>2040</span> </span><span class="WHIT">		</span><span class="NAME">this._displayProcessingForCurrentActivity</span><span class="PUNC">(</span><span class="NAME">this.activityQueue.last</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2041</span> </span><span class="WHIT">    	</span><span class="NAME">this.setStatus</span><span class="PUNC">(</span><span class="NAME">this.options.uploadingActivities</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2042</span> </span><span class="WHIT">    	</span><span class="WHIT">
<span class='line'>2043</span> </span><span class="WHIT">    	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">currentActivityId</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">$</span><span class="PUNC">(</span><span class="NAME">this.currentActivity</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">value</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2044</span> </span><span class="WHIT">    	</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.fileTypeRead</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.tcxDetail</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2045</span> </span><span class="WHIT">    	   </span><span class="NAME">this.garminController.readDetailFromDevice</span><span class="PUNC">(</span><span class="NAME">this.fileTypeRead</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">currentActivityId</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2046</span> </span><span class="WHIT">    	</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.fileTypeRead</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.fit</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT">
<span class='line'>2047</span> </span><span class="WHIT">    			   </span><span class="NAME">this.fileTypeRead</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.fitHealthData</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT">
<span class='line'>2048</span> </span><span class="WHIT">    			   </span><span class="NAME">this.fileTypeRead</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.binary</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT">
<span class='line'>2049</span> </span><span class="WHIT">    			   </span><span class="NAME">this.fileTypeRead</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.readableDir</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2050</span> </span><span class="WHIT">    	   </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">deviceNumber</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getCurrentDevice</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getNumber</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2051</span> </span><span class="WHIT">    	   </span><span class="NAME">this.garminController.getBinaryFile</span><span class="PUNC">(</span><span class="NAME">deviceNumber</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.activityDirectory.getEntry</span><span class="PUNC">(</span><span class="NAME">currentActivityId</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">path</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="WHIT">
<span class='line'>2052</span> </span><span class="WHIT">    	</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2053</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2054</span> </span><span class="WHIT">    </span><span class="WHIT">
<span class='line'>2055</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='line'>2056</span>      * Displays the processing icon for a given activity
<span class='line'>2057</span>      * 
<span class='line'>2058</span>      * @param activity - the activity that will have the processing icon
<span class='line'>2059</span>      */</span><span class="WHIT">
<span class='line'>2060</span> </span><span class="WHIT">    </span><span class="NAME">_displayProcessingForCurrentActivity</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">activity</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2061</span> </span><span class="WHIT">    	</span><span class="NAME">this.currentActivity</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">activity</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2062</span> </span><span class="WHIT">    	</span><span class="WHIT">
<span class='line'>2063</span> </span><span class="WHIT">    	</span><span class="COMM">// Display 'processing' image next to corresponding activity in table </span><span class="WHIT">
<span class='line'>2064</span> </span><span class="WHIT">        </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">statusCellIdElement</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.currentActivityStatusElement</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2065</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">statusCellIdElement</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2066</span> </span><span class="WHIT">            </span><span class="NAME">statusCellIdElement.innerHTML</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.statusCellProcessingImg</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2067</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2068</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2069</span> </span><span class="WHIT">    </span><span class="WHIT">
<span class='line'>2070</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='line'>2071</span>      * Returns status element for current activity in queue
<span class='line'>2072</span>      * 
<span class='line'>2073</span>      * @returns {Element}
<span class='line'>2074</span>      */</span><span class="WHIT">
<span class='line'>2075</span> </span><span class="WHIT">    </span><span class="NAME">currentActivityStatusElement</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2076</span> </span><span class="WHIT">        </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.currentActivity</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">$</span><span class="PUNC">(</span><span class="NAME">this.currentActivity.replace</span><span class="PUNC">(</span><span class="REGX">/Checkbox/</span><span class="PUNC">,</span><span class="STRN">"Status"</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2077</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2078</span> </span><span class="WHIT">    </span><span class="WHIT">
<span class='line'>2079</span> </span><span class="WHIT">    </span><span class="COMM">/** Stop uploading activities in the queue, and go on to finished screen.
<span class='line'>2080</span>      * Useful for certain error cases.
<span class='line'>2081</span>      * @see Garmin.DeviceDisplay#event:onFinishUploads
<span class='line'>2082</span>      */</span><span class="WHIT">
<span class='line'>2083</span> </span><span class="WHIT">    </span><span class="NAME">stopQueuedUploads</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2084</span> </span><span class="WHIT">        </span><span class="NAME">this.clearActivityQueue</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2085</span> </span><span class="WHIT">    	</span><span class="COMM">// Broadcast all uploads finished</span><span class="WHIT">
<span class='line'>2086</span> </span><span class="WHIT">        </span><span class="NAME">this.getController</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">_broadcaster.dispatch</span><span class="PUNC">(</span><span class="STRN">"onFinishUploads"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="NAME">display</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="WHIT"> </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">  </span><span class="WHIT">
<span class='line'>2087</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2088</span> </span><span class="WHIT">    </span><span class="WHIT">
<span class='line'>2089</span> </span><span class="WHIT">    </span><span class="COMM">/* Posts the last read activity data from the activityQueue.  See {@link this.options.sendDataUrl}, 
<span class='line'>2090</span>      * {@link this.options.sendDataOptions} for designating the server and options for the AJAX request. 
<span class='line'>2091</span>      * 
<span class='line'>2092</span>      * A custom handler is also possible by defining {@link this.options.postActivityHandler}.  Defining 
<span class='line'>2093</span>      * this method will override the default Send Data implementation provided by this API.
<span class='line'>2094</span>      * 
<span class='line'>2095</span>      * @param String dataString - the data string to post to server  
<span class='line'>2096</span>      * @see Garmin.DeviceDisplayDefaultOptions.postActivityHandler
<span class='line'>2097</span>      */</span><span class="WHIT">
<span class='line'>2098</span> </span><span class="WHIT">    </span><span class="NAME">_postActivityToServer</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">dataString</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2099</span> </span><span class="WHIT">    	</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.options.sendDataUrl</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">this.options.postActivityHandler</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2100</span> </span><span class="WHIT">            </span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Error</span><span class="PUNC">(</span><span class="STRN">"Need to define either sendDataUrl or the postActivityHandler in display"</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT">
<span class='line'>2101</span> </span><span class="WHIT">                    </span><span class="STRN">" options, depending on desired behavior."</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2102</span> </span><span class="WHIT">    	</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2103</span> </span><span class="WHIT">    	</span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2104</span> </span><span class="WHIT">    	    </span><span class="COMM">// nested function</span><span class="WHIT">
<span class='line'>2105</span> </span><span class="WHIT">    	    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">finishPostProcessing</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2106</span> </span><span class="WHIT">                </span><span class="COMM">// Exceptions are handled in postToServer. Even if errors occur, doesn't necessarily mean</span><span class="WHIT">
<span class='line'>2107</span> </span><span class="WHIT">                </span><span class="COMM">// that the rest of the uploads should be stopped.  The uploadQueue needs to be cleared </span><span class="WHIT">
<span class='line'>2108</span> </span><span class="WHIT">                </span><span class="COMM">// if that is the desired behavior.</span><span class="WHIT">
<span class='line'>2109</span> </span><span class="WHIT">            	</span><span class="NAME">this.activityQueue.pop</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2110</span> </span><span class="WHIT">            	</span><span class="WHIT">
<span class='line'>2111</span> </span><span class="WHIT">                </span><span class="COMM">// Broadcast upload progress</span><span class="WHIT">
<span class='line'>2112</span> </span><span class="WHIT">                </span><span class="NAME">this.getController</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">_broadcaster.dispatch</span><span class="PUNC">(</span><span class="STRN">"onProgressUpload"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.getUploadProgressJson</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2113</span> </span><span class="WHIT">                    </span><span class="WHIT">
<span class='line'>2114</span> </span><span class="WHIT">            	</span><span class="COMM">// TODO: This doesn't quite belong here, but it's the only way to ensure synchronization.</span><span class="WHIT">
<span class='line'>2115</span> </span><span class="WHIT">            	</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.activityQueue.length</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2116</span> </span><span class="WHIT">        	    	</span><span class="COMM">// Read what's left in the queue</span><span class="WHIT">
<span class='line'>2117</span> </span><span class="WHIT">        			</span><span class="NAME">this._readNextSelected</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2118</span> </span><span class="WHIT">            	</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="WHIT">
<span class='line'>2119</span> </span><span class="WHIT">            	    </span><span class="COMM">// Broadcast all uploads finished</span><span class="WHIT">
<span class='line'>2120</span> </span><span class="WHIT">            	    </span><span class="NAME">this.getController</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">_broadcaster.dispatch</span><span class="PUNC">(</span><span class="STRN">"onFinishUploads"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="NAME">display</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="WHIT"> </span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2121</span> </span><span class="WHIT">            	</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2122</span> </span><span class="WHIT">    	    </span><span class="PUNC">}</span><span class="PUNC">.</span><span class="NAME">bind</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2123</span> </span><span class="WHIT">    	    </span><span class="WHIT">
<span class='line'>2124</span> </span><span class="WHIT">    	    </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.options.sendDataUrl</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2125</span> </span><span class="WHIT">    	           </span><span class="COMM">// post the activity and then read the next one</span><span class="WHIT">
<span class='line'>2126</span> </span><span class="WHIT">    	           </span><span class="NAME">this.postToServer</span><span class="PUNC">(</span><span class="NAME">finishPostProcessing</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2127</span> </span><span class="WHIT">    	    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2128</span> </span><span class="WHIT">    	    </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.options.postActivityHandler</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2129</span> </span><span class="WHIT">                </span><span class="NAME">this.options.postActivityHandler</span><span class="PUNC">(</span><span class="NAME">dataString</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2130</span> </span><span class="WHIT">                </span><span class="NAME">finishPostProcessing</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2131</span> </span><span class="WHIT">    	    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2132</span> </span><span class="WHIT">    	</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2133</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2134</span> </span><span class="WHIT">    </span><span class="WHIT">
<span class='line'>2135</span> </span><span class="WHIT">    </span><span class="COMM">/** Callback when all uploads are finished. The display is passed in as the single param.
<span class='line'>2136</span>      * @event
<span class='line'>2137</span>      * @param {Garmin.DeviceDisplay} the current DeviceDisplay instance
<span class='line'>2138</span>      * @see Garmin.DeviceDisplayDefaultOptions.afterFinishUploads
<span class='line'>2139</span>      */</span><span class="WHIT">
<span class='line'>2140</span> </span><span class="WHIT">    </span><span class="NAME">onFinishUploads</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">display</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2141</span> </span><span class="WHIT">        </span><span class="WHIT">
<span class='line'>2142</span> </span><span class="WHIT">        </span><span class="COMM">// Activities were uploaded</span><span class="WHIT">
<span class='line'>2143</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.loadingContentElement</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT">
<span class='line'>2144</span> </span><span class="WHIT">            </span><span class="NAME">this.numQueuedActivities</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NUMB">0</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2145</span> </span><span class="WHIT">            </span><span class="NAME">this.loadingContentElement.hide</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2146</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2147</span> </span><span class="WHIT">        </span><span class="COMM">// Nothing to upload, so show it </span><span class="WHIT">
<span class='line'>2148</span> </span><span class="WHIT">        </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="NAME">this.advancedUploadMode</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2149</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.loadingContentElement</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2150</span> </span><span class="WHIT">                </span><span class="NAME">this.loadingContentElement.className</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'shortStatus'</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2151</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2152</span> </span><span class="WHIT">            </span><span class="NAME">this.activityTable.hide</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2153</span> </span><span class="WHIT">            </span><span class="NAME">this._updateLoadingContent</span><span class="PUNC">(</span><span class="STRN">'No new activities to upload.'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">            </span><span class="WHIT">
<span class='line'>2154</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2155</span> </span><span class="WHIT">        </span><span class="COMM">// Show the directory for results </span><span class="WHIT">
<span class='line'>2156</span> </span><span class="WHIT">        </span><span class="NAME">this.activityDirectoryElement.show</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2157</span> </span><span class="WHIT">        </span><span class="NAME">this.uploadProgressBar.hide</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2158</span> </span><span class="WHIT">        </span><span class="NAME">this.findDevicesElement.hide</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2159</span> </span><span class="WHIT">        </span><span class="NAME">this.readSelectedButton.hide</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2160</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.deviceBrowserElement</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2161</span> </span><span class="WHIT">            </span><span class="NAME">this.deviceBrowserElement.hide</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2162</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2163</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.options.afterFinishUploads</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2164</span> </span><span class="WHIT">            </span><span class="NAME">this.options.afterFinishUploads.call</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2165</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="WHIT">
<span class='line'>2166</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2167</span> </span><span class="WHIT">    </span><span class="WHIT">
<span class='line'>2168</span> </span><span class="WHIT">    </span><span class="NAME">_clearActivityTable</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2169</span> </span><span class="WHIT">    	</span><span class="COMM">//clear previous data, if any, including the header</span><span class="WHIT">
<span class='line'>2170</span> </span><span class="WHIT">    	</span><span class="KEYW">while</span><span class="PUNC">(</span><span class="NAME">this.activityTableHeader.rows.length</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2171</span> </span><span class="WHIT">    	    </span><span class="NAME">this.activityTableHeader.deleteRow</span><span class="PUNC">(</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2172</span> </span><span class="WHIT">    	</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2173</span> </span><span class="WHIT">		</span><span class="KEYW">while</span><span class="PUNC">(</span><span class="NAME">this.activityTable.rows.length</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2174</span> </span><span class="WHIT">			</span><span class="NAME">this.activityTable.deleteRow</span><span class="PUNC">(</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2175</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2176</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2177</span> </span><span class="WHIT">    </span><span class="WHIT">
<span class='line'>2178</span> </span><span class="WHIT">    </span><span class="COMM">/** Creates the activity directory of all activities (activity IDs) on the device
<span class='line'>2179</span>      * of the user-selected type.  Most recent entries are first.
<span class='line'>2180</span>      * @param listType String type of directory described by the list
<span class='line'>2181</span>      * @param list Array list of directory entries, of any type. Currently expects activities (tcx) or files (fit)
<span class='line'>2182</span>      * @private 
<span class='line'>2183</span>      */</span><span class="WHIT">
<span class='line'>2184</span> </span><span class="WHIT">    </span><span class="NAME">_createActivityDirectory</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">listType</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">list</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2185</span> </span><span class="WHIT">        </span><span class="WHIT">
<span class='line'>2186</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.advancedUploadMode</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2187</span> </span><span class="WHIT">            </span><span class="NAME">this.activityDirectoryElement.show</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2188</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2189</span> </span><span class="WHIT">    	</span><span class="NAME">this.activityQueue</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Array</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// Initialized here so that we can detect activity selection read status    	</span><span class="WHIT">
<span class='line'>2190</span> </span><span class="WHIT">    	</span><span class="WHIT">
<span class='line'>2191</span> </span><span class="WHIT">    	</span><span class="NAME">this.activityDirectory</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Garmin.ActivityDirectory</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2192</span> </span><span class="WHIT">    	</span><span class="WHIT">
<span class='line'>2193</span> </span><span class="WHIT">    	</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">jj</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">jj</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">list.length</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">jj</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2194</span> </span><span class="WHIT">            </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">id</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2195</span> </span><span class="WHIT">            </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">name</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2196</span> </span><span class="WHIT">            </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">duration</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2197</span> </span><span class="WHIT">            </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">entry</span><span class="PUNC">;</span><span class="WHIT">            </span><span class="WHIT">
<span class='line'>2198</span> </span><span class="WHIT">            </span><span class="WHIT">
<span class='line'>2199</span> </span><span class="WHIT">    	    </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">listType</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.tcxDir</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2200</span> </span><span class="WHIT">    	        </span><span class="COMM">// list of Garmin.Activity</span><span class="WHIT">
<span class='line'>2201</span> </span><span class="WHIT">    	        </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">activity</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">list</span><span class="PUNC">[</span><span class="NAME">jj</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2202</span> </span><span class="WHIT">    	        </span><span class="NAME">id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">activity.getAttribute</span><span class="PUNC">(</span><span class="NAME">Garmin.Activity.ATTRIBUTE_KEYS.activityName</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2203</span> </span><span class="WHIT">    	        </span><span class="NAME">name</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">activity.getSummaryValue</span><span class="PUNC">(</span><span class="NAME">Garmin.Activity.SUMMARY_KEYS.startTime</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getValue</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getTimeString</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2204</span> </span><span class="WHIT">    	        </span><span class="NAME">duration</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">activity.getStartTime</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getDurationTo</span><span class="PUNC">(</span><span class="NAME">activity.getEndTime</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// Correct time zone</span><span class="WHIT">
<span class='line'>2205</span> </span><span class="WHIT">    	        </span><span class="WHIT">
<span class='line'>2206</span> </span><span class="WHIT">                </span><span class="NAME">entry</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.activityDirectory.addEntry</span><span class="PUNC">(</span><span class="NAME">id</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">name</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">duration</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2207</span> </span><span class="WHIT">                </span><span class="WHIT">
<span class='line'>2208</span> </span><span class="WHIT">    	    </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">listType</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.fitDir</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2209</span> </span><span class="WHIT">    	        </span><span class="COMM">// list of Garmin.Files</span><span class="WHIT">
<span class='line'>2210</span> </span><span class="WHIT">    	        </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">file</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">list</span><span class="PUNC">[</span><span class="NAME">jj</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2211</span> </span><span class="WHIT">    	        </span><span class="NAME">id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">file.getIdValue</span><span class="PUNC">(</span><span class="NAME">Garmin.FileId.KEYS.id</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2212</span> </span><span class="WHIT">    	        </span><span class="NAME">name</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">file.getAttribute</span><span class="PUNC">(</span><span class="NAME">Garmin.File.ATTRIBUTE_KEYS.creationTime</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getTimeString</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2213</span> </span><span class="WHIT">    	        </span><span class="WHIT">
<span class='line'>2214</span> </span><span class="WHIT">                </span><span class="NAME">this.activityDirectory.addEntry</span><span class="PUNC">(</span><span class="NAME">id</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">name</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2215</span> </span><span class="WHIT">                </span><span class="NAME">this.activityDirectory.getEntry</span><span class="PUNC">(</span><span class="NAME">id</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">path</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">file.getAttribute</span><span class="PUNC">(</span><span class="NAME">Garmin.File.ATTRIBUTE_KEYS.path</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">                </span><span class="WHIT">
<span class='line'>2216</span> </span><span class="WHIT">    	    </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">listType</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.readableDir</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2217</span> </span><span class="WHIT">    	        </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">file</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">list</span><span class="PUNC">[</span><span class="NAME">jj</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2218</span> </span><span class="WHIT">                </span><span class="NAME">this.activityDirectory.addFileEntry</span><span class="PUNC">(</span><span class="NAME">file</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2219</span> </span><span class="WHIT">    	    </span><span class="PUNC">}</span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">listType</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.fitHealthData</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2220</span> </span><span class="WHIT">    	        </span><span class="COMM">// list of Garmin.File</span><span class="WHIT">
<span class='line'>2221</span> </span><span class="WHIT">    	        </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">file</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">list</span><span class="PUNC">[</span><span class="NAME">jj</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2222</span> </span><span class="WHIT">    	        </span><span class="NAME">id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceDisplay.MISC.health_data_id</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2223</span> </span><span class="WHIT">	        	</span><span class="NAME">name</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.health_data_label</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2224</span> </span><span class="WHIT">    	        </span><span class="WHIT">
<span class='line'>2225</span> </span><span class="WHIT">                </span><span class="NAME">this.activityDirectory.addEntry</span><span class="PUNC">(</span><span class="NAME">id</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">name</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2226</span> </span><span class="WHIT">                </span><span class="NAME">this.activityDirectory.getEntry</span><span class="PUNC">(</span><span class="NAME">id</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">path</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">file.getAttribute</span><span class="PUNC">(</span><span class="NAME">Garmin.File.ATTRIBUTE_KEYS.path</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">                </span><span class="WHIT">
<span class='line'>2227</span> </span><span class="WHIT">    	    </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">listType</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.gpxDir</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2228</span> </span><span class="WHIT">    	    	</span><span class="COMM">// list of Garmin.Activity</span><span class="WHIT">
<span class='line'>2229</span> </span><span class="WHIT">    	    	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">activity</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">list</span><span class="PUNC">[</span><span class="NAME">jj</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2230</span> </span><span class="WHIT">    	    	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">summaryValue</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">activity.getSummaryValue</span><span class="PUNC">(</span><span class="NAME">Garmin.Activity.SUMMARY_KEYS.startTime</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2231</span> </span><span class="WHIT">    	    	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">attribute</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">activity.getAttribute</span><span class="PUNC">(</span><span class="NAME">Garmin.Activity.ATTRIBUTE_KEYS.activityName</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2232</span> </span><span class="WHIT">    	    	</span><span class="WHIT">
<span class='line'>2233</span> </span><span class="WHIT">    	    	</span><span class="COMM">// Make sure these are not null or else we will skip</span><span class="WHIT">
<span class='line'>2234</span> </span><span class="WHIT">    	    	</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">summaryValue</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">attribute</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>2235</span> </span><span class="WHIT">    	    	</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2236</span> </span><span class="WHIT">	    	    	</span><span class="NAME">id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">summaryValue.getValue</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getXsdString</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2237</span> </span><span class="WHIT">	    	    	</span><span class="NAME">name</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">attribute</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2238</span> </span><span class="WHIT">	    	    	</span><span class="WHIT">
<span class='line'>2239</span> </span><span class="WHIT">	    	    	</span><span class="NAME">this.activityDirectory.addEntry</span><span class="PUNC">(</span><span class="NAME">id</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">name</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2240</span> </span><span class="WHIT">    	    	</span><span class="PUNC">}</span><span class="WHIT"> 	    	    	    </span><span class="WHIT">
<span class='line'>2241</span> </span><span class="WHIT">    	    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2242</span> </span><span class="WHIT">    	</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2243</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2244</span> </span><span class="WHIT">    </span><span class="WHIT">
<span class='line'>2245</span> </span><span class="WHIT">    </span><span class="COMM">/* Creates the activity queue of selected activities to read in detail from device.
<span class='line'>2246</span>      * Called after the user has finished selecting activities and also after the API 
<span class='line'>2247</span>      * does its synchronization thing).  The queue is an Array that is constructed and 
<span class='line'>2248</span>      * then reversed to simulate a queue.
<span class='line'>2249</span>      */</span><span class="WHIT">
<span class='line'>2250</span> </span><span class="WHIT">    </span><span class="NAME">_populateActivityQueue</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2251</span> </span><span class="WHIT">    	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">checkBoxName</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"activityItemCheckbox"</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2252</span> </span><span class="WHIT">        </span><span class="COMM">// TODO Create a class for the activity queue</span><span class="WHIT">
<span class='line'>2253</span> </span><span class="WHIT">    	</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">jj</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">jj</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">this.activityDirectory.size</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">jj</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2254</span> </span><span class="WHIT">    		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">checkBoxElementId</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">checkBoxName</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">jj</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="WHIT">
<span class='line'>2255</span> </span><span class="WHIT">    				</span><span class="WHIT">
<span class='line'>2256</span> </span><span class="WHIT">    		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">$</span><span class="PUNC">(</span><span class="NAME">checkBoxElementId</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">checked</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2257</span> </span><span class="WHIT">    			</span><span class="NAME">this.activityQueue.push</span><span class="PUNC">(</span><span class="NAME">checkBoxElementId</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2258</span> </span><span class="WHIT">    		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2259</span> </span><span class="WHIT">    		</span><span class="WHIT">
<span class='line'>2260</span> </span><span class="WHIT">    		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">activityId</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.activityDirectory.getIds</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">[</span><span class="NAME">jj</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2261</span> </span><span class="WHIT">    		</span><span class="NAME">this.activityDirectory.getEntry</span><span class="PUNC">(</span><span class="NAME">activityId</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">displayElementId</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">checkBoxElementId</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2262</span> </span><span class="WHIT">    	</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2263</span> </span><span class="WHIT">    	</span><span class="COMM">// Reverse the array to turn it into a queue</span><span class="WHIT">
<span class='line'>2264</span> </span><span class="WHIT">    	</span><span class="NAME">this.activityQueue.reverse</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="WHIT">
<span class='line'>2265</span> </span><span class="WHIT">    	</span><span class="WHIT">
<span class='line'>2266</span> </span><span class="WHIT">    	</span><span class="COMM">// Save the original size for status reporting</span><span class="WHIT">
<span class='line'>2267</span> </span><span class="WHIT">    	</span><span class="NAME">this.numQueuedActivities</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.activityQueue.length</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2268</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2269</span> </span><span class="WHIT">    </span><span class="WHIT">
<span class='line'>2270</span> </span><span class="WHIT">    </span><span class="COMM">/** Empties the activity queue if it has any entries.
<span class='line'>2271</span>      */</span><span class="WHIT">
<span class='line'>2272</span> </span><span class="WHIT">    </span><span class="NAME">clearActivityQueue</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2273</span> </span><span class="WHIT">        </span><span class="KEYW">for</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">this.activityQueue.length</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2274</span> </span><span class="WHIT">            </span><span class="NAME">this.activityQueue.pop</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2275</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2276</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2277</span> </span><span class="WHIT">    </span><span class="WHIT">
<span class='line'>2278</span> </span><span class="WHIT">	</span><span class="COMM">/* The activityTable object is the HTML table element on the demo page.  This function
<span class='line'>2279</span> 	 * adds the necessary row to the table with the activity data.
<span class='line'>2280</span> 	 * @param int index - the internal index assigned to the activity value in order
<span class='line'>2281</span> 	 * to update the table status
<span class='line'>2282</span> 	 * @param {Garmin.ActivityDirectory.Entry} entry - entry to add to the table
<span class='line'>2283</span> 	 * @see afterTableInsert
<span class='line'>2284</span> 	 */</span><span class="WHIT">
<span class='line'>2285</span> </span><span class="WHIT">	</span><span class="NAME">_addToActivityTable</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">index</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">entry</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2286</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>2287</span> </span><span class="WHIT">		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">tableIndex</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2288</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>2289</span> </span><span class="WHIT">		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">activityId</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">entry.id</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2290</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>2291</span> </span><span class="WHIT">		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">row</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.activityTable.insertRow</span><span class="PUNC">(</span><span class="NAME">this.activityTable.rows.length</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// append a new row to the table</span><span class="WHIT">
<span class='line'>2292</span> </span><span class="WHIT">		</span><span class="COMM">// Color odd rows</span><span class="WHIT">
<span class='line'>2293</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">index</span><span class="PUNC">+</span><span class="NUMB">2</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">%</span><span class="WHIT"> </span><span class="NUMB">2</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2294</span> </span><span class="WHIT">            </span><span class="NAME">row.setAttribute</span><span class="PUNC">(</span><span class="STRN">'bgcolor'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">'#f3f3f3'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2295</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2296</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>2297</span> </span><span class="WHIT">		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">selectCell</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">row.insertCell</span><span class="PUNC">(</span><span class="NAME">tableIndex</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2298</span> </span><span class="WHIT">		</span><span class="NAME">selectCell.width</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'40'</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// Set widths to match header </span><span class="WHIT">
<span class='line'>2299</span> </span><span class="WHIT">		</span><span class="NAME">selectCell.align</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'right'</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2300</span> 
<span class='line'>2301</span> </span><span class="WHIT">		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">checkbox</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">"input"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2302</span> </span><span class="WHIT">		</span><span class="NAME">Element.extend</span><span class="PUNC">(</span><span class="NAME">checkbox</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2303</span> </span><span class="WHIT">		</span><span class="NAME">checkbox.id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"activityItemCheckbox"</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">index</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2304</span> </span><span class="WHIT">		</span><span class="NAME">checkbox.type</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"checkbox"</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2305</span> </span><span class="WHIT">		</span><span class="NAME">checkbox.value</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">activityId</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2306</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>2307</span> </span><span class="WHIT">		</span><span class="COMM">// When checkbox is clicked, pass last 2 args to callback method, which is bounded to the display object</span><span class="WHIT">
<span class='line'>2308</span> </span><span class="WHIT">		</span><span class="COMM">// TODO pass the entire directory object and handle appropriately</span><span class="WHIT">
<span class='line'>2309</span> </span><span class="WHIT">		</span><span class="NAME">checkbox.observe</span><span class="PUNC">(</span><span class="STRN">'click'</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.onActivitySelect.bind</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">checkbox.id</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.activityDirectory.getIds</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="WHIT">
<span class='line'>2310</span> </span><span class="WHIT">		</span><span class="NAME">selectCell.appendChild</span><span class="PUNC">(</span><span class="NAME">checkbox</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2311</span> 
<span class='line'>2312</span> </span><span class="WHIT">		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">nameCell</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">row.insertCell</span><span class="PUNC">(</span><span class="NAME">tableIndex</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2313</span> </span><span class="WHIT">		</span><span class="NAME">nameCell.width</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'220'</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2314</span> 
<span class='line'>2315</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">entry.duration</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2316</span> </span><span class="WHIT">    		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">durationCell</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">row.insertCell</span><span class="PUNC">(</span><span class="NAME">tableIndex</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2317</span> </span><span class="WHIT">		    </span><span class="NAME">durationCell.width</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'210'</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2318</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2319</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>2320</span> </span><span class="WHIT">		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">statusCell</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">row.insertCell</span><span class="PUNC">(</span><span class="NAME">tableIndex</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2321</span> </span><span class="WHIT">		</span><span class="NAME">statusCell.id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"activityItemStatus"</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">index</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2322</span> </span><span class="WHIT">		</span><span class="NAME">statusCell.className</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'activityStatusCell'</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2323</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>2324</span> </span><span class="WHIT">		</span><span class="COMM">// Name and duration cells </span><span class="WHIT">
<span class='line'>2325</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.fileTypeRead</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.tcxDir</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT">
<span class='line'>2326</span> </span><span class="WHIT">		    </span><span class="NAME">this.fileTypeRead</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.fitDir</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="WHIT">
<span class='line'>2327</span> </span><span class="WHIT">		    </span><span class="NAME">this.fileTypeRead</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.fitHealthData</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT">
<span class='line'>2328</span> </span><span class="WHIT">		    </span><span class="NAME">this.fileTypeRead</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.gpxDir</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT">
<span class='line'>2329</span> </span><span class="WHIT">		    </span><span class="NAME">this.fileTypeRead</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.readableDir</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2330</span> </span><span class="WHIT">			</span><span class="NAME">nameCell.innerHTML</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">entry.name</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2331</span> </span><span class="WHIT">			</span><span class="WHIT">
<span class='line'>2332</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">durationCell</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2333</span> </span><span class="WHIT">			    </span><span class="NAME">durationCell.innerHTML</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">entry.duration</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2334</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2335</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2336</span> </span><span class="WHIT">		</span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.fileTypeRead</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.crsDir</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2337</span> </span><span class="WHIT">			</span><span class="NAME">nameCell.innerHTML</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">activityId</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2338</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2339</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>2340</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.options.afterTableInsert</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2341</span> </span><span class="WHIT">		    </span><span class="NAME">this.options.afterTableInsert.call</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">index</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">entry</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">statusCell</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">checkbox</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">row</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">this.activityMatcher</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2342</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2343</span> 
<span class='line'>2344</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">activityId</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceDisplay.MISC.health_data_id</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>2345</span> </span><span class="WHIT">		</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2346</span> </span><span class="WHIT">			</span><span class="NAME">row.style.display</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'none'</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2347</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2348</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2349</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>2350</span> </span><span class="WHIT">	</span><span class="COMM">/**
<span class='line'>2351</span> 	 * Adds the single row to the activity table header.  The columns in the table
<span class='line'>2352</span> 	 * are determined by the data available in the directory, using an all or nothing 
<span class='line'>2353</span> 	 * check.
<span class='line'>2354</span> 	 * @param directory {Garmin.ActivityDirectory} the activity directory to build the table header off of
<span class='line'>2355</span> 	 */</span><span class="WHIT">
<span class='line'>2356</span> </span><span class="WHIT">	</span><span class="NAME">_addToActivityTableHeader</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">directory</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2357</span> </span><span class="WHIT">	    </span><span class="WHIT">
<span class='line'>2358</span> </span><span class="WHIT">	    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">tableIndex</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2359</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>2360</span> </span><span class="WHIT">	    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">row</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.activityTableHeader.insertRow</span><span class="PUNC">(</span><span class="NUMB">0</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// append a new row to the table</span><span class="WHIT">
<span class='line'>2361</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>2362</span> </span><span class="WHIT">		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">selectCell</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">row.insertCell</span><span class="PUNC">(</span><span class="NAME">tableIndex</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2363</span> </span><span class="WHIT">		</span><span class="NAME">selectCell.id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'selectAllHeader'</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2364</span> </span><span class="WHIT">		</span><span class="NAME">selectCell.width</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'40'</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2365</span> </span><span class="WHIT">		</span><span class="NAME">selectCell.align</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'right'</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2366</span> 
<span class='line'>2367</span> </span><span class="WHIT">		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">nameCell</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">row.insertCell</span><span class="PUNC">(</span><span class="NAME">tableIndex</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2368</span> </span><span class="WHIT">		</span><span class="NAME">nameCell.id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'nameHeader'</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2369</span> </span><span class="WHIT">		</span><span class="NAME">nameCell.width</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'220'</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2370</span> </span><span class="WHIT">		</span><span class="NAME">nameCell.align</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'left'</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2371</span> </span><span class="WHIT">		</span><span class="NAME">nameCell.innerHTML</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.getActivityDirectoryHeaderIdLabel.call</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="WHIT">
<span class='line'>2372</span> </span><span class="WHIT">        </span><span class="WHIT">
<span class='line'>2373</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">directory.size</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NUMB">0</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT">
<span class='line'>2374</span> </span><span class="WHIT">		    </span><span class="NAME">directory.getFirstEntry</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">duration</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2375</span> </span><span class="WHIT">            </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">durationCell</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">row.insertCell</span><span class="PUNC">(</span><span class="NAME">tableIndex</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2376</span> </span><span class="WHIT">    		</span><span class="NAME">durationCell.id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'durationHeader'</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2377</span> </span><span class="WHIT">    		</span><span class="NAME">durationCell.width</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'210'</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2378</span> </span><span class="WHIT">    		</span><span class="NAME">durationCell.align</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'left'</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2379</span> </span><span class="WHIT">    		</span><span class="NAME">durationCell.innerHTML</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.activityDirectoryHeaderDuration</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2380</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2381</span> 
<span class='line'>2382</span> </span><span class="WHIT">		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">statusCell</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">row.insertCell</span><span class="PUNC">(</span><span class="NAME">tableIndex</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2383</span> </span><span class="WHIT">        </span><span class="NAME">statusCell.id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'activityStatusHeader'</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2384</span> </span><span class="WHIT">		</span><span class="NAME">statusCell.innerHTML</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.activityDirectoryHeaderStatus</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2385</span> 
<span class='line'>2386</span> </span><span class="WHIT">		</span><span class="COMM">// Only display 'check all' box if there's no upload limit </span><span class="WHIT">
<span class='line'>2387</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.options.uploadMaximum</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NUMB">1</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2388</span> </span><span class="WHIT">    		</span><span class="NAME">this.checkAllBox</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">document.createElement</span><span class="PUNC">(</span><span class="STRN">"input"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2389</span> </span><span class="WHIT">    		</span><span class="NAME">Element.extend</span><span class="PUNC">(</span><span class="NAME">this.checkAllBox</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2390</span> </span><span class="WHIT">    		</span><span class="NAME">this.checkAllBox.id</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"checkAllBox"</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2391</span> </span><span class="WHIT">    		</span><span class="NAME">this.checkAllBox.type</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"checkbox"</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2392</span> </span><span class="WHIT">    		</span><span class="NAME">selectCell.appendChild</span><span class="PUNC">(</span><span class="NAME">this.checkAllBox</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2393</span> </span><span class="WHIT">    		</span><span class="NAME">this.checkAllBox.title</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.activityDirectoryCheckAllTooltip</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2394</span> </span><span class="WHIT">    		</span><span class="NAME">this.checkAllBox.checked</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="COMM">// entries are "new" by default</span><span class="WHIT">
<span class='line'>2395</span> </span><span class="WHIT">    		</span><span class="WHIT">
<span class='line'>2396</span> </span><span class="WHIT">    		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.options.uploadMaximum</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2397</span> </span><span class="WHIT">    		    </span><span class="NAME">this.checkAllBox.hide</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2398</span> </span><span class="WHIT">    		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2399</span> </span><span class="WHIT">    		</span><span class="WHIT">
<span class='line'>2400</span> </span><span class="WHIT">    		</span><span class="NAME">this.checkAllBox.onclick</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="NAME">this._checkNewDirectoryEntries</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="PUNC">}</span><span class="PUNC">.</span><span class="NAME">bind</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2401</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2402</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2403</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>2404</span> </span><span class="WHIT">	</span><span class="COMM">/** Callback for enforcing upload selection limit.  Called each time the user modifies selection.
<span class='line'>2405</span> 	 * @param String elementId - the ID of the input element selected to trigger this callback
<span class='line'>2406</span> 	 * @param Array activityDirectory - array of all activity IDs listed in the activity directory  
<span class='line'>2407</span> 	 * @see Garmin.DeviceDisplayDefaultOptions.uploadMaximum
<span class='line'>2408</span> 	 */</span><span class="WHIT">
<span class='line'>2409</span> </span><span class="WHIT">	</span><span class="NAME">onActivitySelect</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">elementId</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">activityDirectory</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2410</span> </span><span class="WHIT">	    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">selectedCount</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2411</span> </span><span class="WHIT">	    </span><span class="KEYW">for</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">jj</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">jj</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">activityDirectory.length</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">jj</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2412</span> </span><span class="WHIT">    		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">$</span><span class="PUNC">(</span><span class="STRN">"activityItemCheckbox"</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">jj</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">checked</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2413</span> </span><span class="WHIT">    			</span><span class="NAME">selectedCount</span><span class="PUNC">++</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2414</span> </span><span class="WHIT">    		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2415</span> </span><span class="WHIT">    	</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2416</span> </span><span class="WHIT">    	</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.options.uploadMaximum</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NUMB">0</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2417</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">selectedCount</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NAME">this.options.uploadMaximum</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2418</span> </span><span class="WHIT">                </span><span class="COMM">// Cancel the selection</span><span class="WHIT">
<span class='line'>2419</span> </span><span class="WHIT">                </span><span class="NAME">$</span><span class="PUNC">(</span><span class="NAME">elementId</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">checked</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2420</span> </span><span class="WHIT">                </span><span class="NAME">alert</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.evaluateTemplate</span><span class="PUNC">(</span><span class="NAME">this.options.uploadMaximumReached</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">activities</span><span class="PUNC">:</span><span class="NAME">this.options.uploadMaximum</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2421</span> </span><span class="WHIT">            </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2422</span> </span><span class="WHIT">    	</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2423</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2424</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>2425</span> </span><span class="WHIT">	</span><span class="COMM">/* Selects all checkboxes in the activity directory, which selects all activities to be read from the device.
<span class='line'>2426</span> 	 * uploadMaximum must be -1 or 0 (no limit) for this method to be called.
<span class='line'>2427</span> 	 */</span><span class="WHIT">
<span class='line'>2428</span> </span><span class="WHIT">	</span><span class="NAME">_checkNewDirectoryEntries</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2429</span> </span><span class="WHIT">		</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">boxIndex</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">boxIndex</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">this.activityDirectory.size</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">boxIndex</span><span class="PUNC">++</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2430</span> </span><span class="WHIT">		    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">activityId</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">$</span><span class="PUNC">(</span><span class="STRN">"activityItemCheckbox"</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">boxIndex</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">value</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2431</span> </span><span class="WHIT">		    </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.activityDirectory.getEntry</span><span class="PUNC">(</span><span class="NAME">activityId</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">isNew</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2432</span> </span><span class="WHIT">                </span><span class="NAME">$</span><span class="PUNC">(</span><span class="STRN">"activityItemCheckbox"</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">boxIndex</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">checked</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.checkAllBox.checked</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2433</span> </span><span class="WHIT">		    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2434</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2435</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2436</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>2437</span> </span><span class="WHIT">	</span><span class="COMM">/* Checks if any activities in directory listing are selected.  Returns true if so, false otherwise.
<span class='line'>2438</span> 	 */</span><span class="WHIT">
<span class='line'>2439</span> </span><span class="WHIT">	</span><span class="NAME">_directoryHasSelected</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2440</span> </span><span class="WHIT">		</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">boxIndex</span><span class="PUNC">=</span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">boxIndex</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">this.activityDirectory.size</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">boxIndex</span><span class="PUNC">++</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2441</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">$</span><span class="PUNC">(</span><span class="STRN">"activityItemCheckbox"</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">boxIndex</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">checked</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2442</span> </span><span class="WHIT">				</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2443</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2444</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2445</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>2446</span> </span><span class="WHIT">		</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2447</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2448</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>2449</span> </span><span class="WHIT">	</span><span class="COMM">/* Lists the directory and returns summary data (# of entries).
<span class='line'>2450</span> 	 * @param entries {Garmin.ActivityDirectory} 
<span class='line'>2451</span> 	 */</span><span class="WHIT">
<span class='line'>2452</span> </span><span class="WHIT">	</span><span class="NAME">_listDirectory</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">activityDirectory</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2453</span> </span><span class="WHIT">		</span><span class="COMM">// clear existing entries</span><span class="WHIT">
<span class='line'>2454</span> </span><span class="WHIT">		</span><span class="NAME">this._clearHtmlSelect</span><span class="PUNC">(</span><span class="NAME">this.readTracksSelect</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2455</span> </span><span class="WHIT">		</span><span class="NAME">this._addToActivityTableHeader</span><span class="PUNC">(</span><span class="NAME">activityDirectory</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2456</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>2457</span> </span><span class="WHIT">		</span><span class="COMM">// loop through each entry</span><span class="WHIT">
<span class='line'>2458</span> </span><span class="WHIT">	    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">entries</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">activityDirectory.getEntries</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2459</span> </span><span class="WHIT">		</span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">activityDirectory.size</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2460</span> </span><span class="WHIT">			</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">entry</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">entries</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2461</span> </span><span class="WHIT">			</span><span class="WHIT">
<span class='line'>2462</span> </span><span class="WHIT">			</span><span class="COMM">// Directory entry</span><span class="WHIT">
<span class='line'>2463</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.fileTypeRead</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.tcxDir</span><span class="WHIT"> </span><span class="WHIT">
<span class='line'>2464</span> </span><span class="WHIT">    			</span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">this.fileTypeRead</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.crsDir</span><span class="WHIT">
<span class='line'>2465</span> </span><span class="WHIT">    			</span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">this.fileTypeRead</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.fitDir</span><span class="WHIT">
<span class='line'>2466</span> </span><span class="WHIT">    			</span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">this.fileTypeRead</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.fitHealthData</span><span class="WHIT">
<span class='line'>2467</span> </span><span class="WHIT">    			</span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">this.fileTypeRead</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.readableDir</span><span class="WHIT">
<span class='line'>2468</span> </span><span class="WHIT">    			</span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">this.fileTypeRead</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.gpxDir</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT">				</span><span class="WHIT">
<span class='line'>2469</span> </span><span class="WHIT">				</span><span class="NAME">this._addToActivityTable</span><span class="PUNC">(</span><span class="NAME">i</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">entry</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2470</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2471</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2472</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.fileTypeRead</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.readableDir</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>2473</span> </span><span class="WHIT">        </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2474</span> </span><span class="WHIT">		  </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">files</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">activityDirectory.size</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2475</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2476</span> </span><span class="WHIT">		  </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">tracks</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">activityDirectory.size</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2477</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2478</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2479</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>2480</span> </span><span class="WHIT">	</span><span class="NAME">_listActivities</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">activities</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2481</span> </span><span class="WHIT">		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">numOfRoutes</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2482</span> </span><span class="WHIT">		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">numOfTracks</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2483</span> </span><span class="WHIT">		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">numOfWaypoints</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2484</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>2485</span> </span><span class="WHIT">		</span><span class="COMM">// clear existing entries</span><span class="WHIT">
<span class='line'>2486</span> </span><span class="WHIT">		</span><span class="NAME">this._clearHtmlSelect</span><span class="PUNC">(</span><span class="NAME">this.readRoutesSelect</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2487</span> </span><span class="WHIT">		</span><span class="NAME">this._clearHtmlSelect</span><span class="PUNC">(</span><span class="NAME">this.readTracksSelect</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2488</span> </span><span class="WHIT">    	</span><span class="NAME">this._clearHtmlSelect</span><span class="PUNC">(</span><span class="NAME">this.readWaypointsSelect</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2489</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>2490</span> </span><span class="WHIT">		</span><span class="COMM">// loop through each activity</span><span class="WHIT">
<span class='line'>2491</span> </span><span class="WHIT">		</span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">activities.length</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2492</span> </span><span class="WHIT">			</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">activity</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">activities</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2493</span> </span><span class="WHIT">			</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">series</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">activity.getSeries</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2494</span> </span><span class="WHIT">			</span><span class="COMM">// loop through each series in the activity</span><span class="WHIT">
<span class='line'>2495</span> </span><span class="WHIT">			</span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">j</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">j</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">series.length</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">j</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2496</span> </span><span class="WHIT">				</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">curSeries</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">series</span><span class="PUNC">[</span><span class="NAME">j</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">								</span><span class="WHIT">
<span class='line'>2497</span> </span><span class="WHIT">				</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">curSeries.getSeriesType</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">Garmin.Series.TYPES.history</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2498</span> </span><span class="WHIT">					</span><span class="COMM">// activity contains a series of type history, list the track</span><span class="WHIT">
<span class='line'>2499</span> </span><span class="WHIT">					</span><span class="NAME">this._listTrack</span><span class="PUNC">(</span><span class="NAME">activity</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">curSeries</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">j</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2500</span> </span><span class="WHIT">					</span><span class="NAME">numOfTracks</span><span class="PUNC">++</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2501</span> </span><span class="WHIT">				</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">curSeries.getSeriesType</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">Garmin.Series.TYPES.route</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2502</span> </span><span class="WHIT">					</span><span class="COMM">// activity contains a series of type route, list the route</span><span class="WHIT">
<span class='line'>2503</span> </span><span class="WHIT">					</span><span class="NAME">this._listRoute</span><span class="PUNC">(</span><span class="NAME">activity</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">curSeries</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">j</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2504</span> </span><span class="WHIT">					</span><span class="NAME">numOfRoutes</span><span class="PUNC">++</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2505</span> </span><span class="WHIT">				</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">curSeries.getSeriesType</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">Garmin.Series.TYPES.waypoint</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2506</span> </span><span class="WHIT">					</span><span class="COMM">// activity contains a series of type waypoint, list the waypoint</span><span class="WHIT">
<span class='line'>2507</span> </span><span class="WHIT">					</span><span class="NAME">this._listWaypoint</span><span class="PUNC">(</span><span class="NAME">activity</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">curSeries</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">j</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">				</span><span class="WHIT">
<span class='line'>2508</span> </span><span class="WHIT">					</span><span class="NAME">numOfWaypoints</span><span class="PUNC">++</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2509</span> </span><span class="WHIT">				</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2510</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2511</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2512</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.options.showReadRoutesSelect</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2513</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">numOfRoutes</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2514</span> </span><span class="WHIT">				</span><span class="NAME">Element.show</span><span class="PUNC">(</span><span class="NAME">this.readRoutesElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2515</span> </span><span class="WHIT">				</span><span class="NAME">this.readRoutesSelect.disabled</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2516</span> </span><span class="WHIT">				</span><span class="NAME">this.displayTrack</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this._seriesFromSelect</span><span class="PUNC">(</span><span class="NAME">this.readRoutesSelect</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2517</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2518</span> </span><span class="WHIT">				</span><span class="NAME">Element.hide</span><span class="PUNC">(</span><span class="NAME">this.readRoutesElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2519</span> </span><span class="WHIT">				</span><span class="NAME">this.readRoutesSelect.disabled</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2520</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2521</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2522</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.options.showReadTracksSelect</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>2523</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">numOfTracks</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2524</span> </span><span class="WHIT">				</span><span class="NAME">Element.show</span><span class="PUNC">(</span><span class="NAME">this.readTracksElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2525</span> </span><span class="WHIT">				</span><span class="NAME">this.readTracksSelect.disabled</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2526</span> </span><span class="WHIT">				</span><span class="NAME">this.displayTrack</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this._seriesFromSelect</span><span class="PUNC">(</span><span class="NAME">this.readTracksSelect</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2527</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2528</span> </span><span class="WHIT">				</span><span class="NAME">Element.hide</span><span class="PUNC">(</span><span class="NAME">this.readTracksElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2529</span> </span><span class="WHIT">				</span><span class="NAME">this.readTracksSelect.disabled</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2530</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2531</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2532</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.options.showReadWaypointsSelect</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>2533</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">numOfWaypoints</span><span class="WHIT"> </span><span class="PUNC">></span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2534</span> </span><span class="WHIT">				</span><span class="NAME">Element.show</span><span class="PUNC">(</span><span class="NAME">this.readWaypointsElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2535</span> </span><span class="WHIT">				</span><span class="NAME">this.readWaypointsSelect.disabled</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2536</span> </span><span class="WHIT">				</span><span class="NAME">this.displayWaypoint</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this._seriesFromSelect</span><span class="PUNC">(</span><span class="NAME">this.readWaypointsSelect</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2537</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2538</span> </span><span class="WHIT">				</span><span class="NAME">Element.hide</span><span class="PUNC">(</span><span class="NAME">this.readWaypointsElement</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2539</span> </span><span class="WHIT">				</span><span class="NAME">this.readWaypointsSelect.disabled</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">			</span><span class="WHIT">
<span class='line'>2540</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2541</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>2542</span> </span><span class="WHIT">		</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">routes</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">numOfRoutes</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">tracks</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">numOfTracks</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">waypoints</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">numOfWaypoints</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2543</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2544</span> 
<span class='line'>2545</span> </span><span class="WHIT">    </span><span class="COMM">/* Load route names into select UI component.
<span class='line'>2546</span>      * 
<span class='line'>2547</span>      */</span><span class="WHIT">    </span><span class="WHIT">
<span class='line'>2548</span> </span><span class="WHIT">	</span><span class="NAME">_listRoute</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">activity</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">series</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">activityIndex</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">seriesIndex</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2549</span> </span><span class="WHIT">		</span><span class="COMM">// make sure the select component exists</span><span class="WHIT">
<span class='line'>2550</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.readRoutesSelect</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2551</span> </span><span class="WHIT">			</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">routeName</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">activity.getAttribute</span><span class="PUNC">(</span><span class="NAME">Garmin.Activity.ATTRIBUTE_KEYS.activityName</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2552</span> </span><span class="WHIT">			</span><span class="NAME">this.readRoutesSelect.options</span><span class="PUNC">[</span><span class="NAME">this.readRoutesSelect.length</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Option</span><span class="PUNC">(</span><span class="NAME">routeName</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">activityIndex</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">","</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">seriesIndex</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2553</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>2554</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2555</span> 
<span class='line'>2556</span> </span><span class="WHIT">    </span><span class="COMM">/* Load track name into select UI component.
<span class='line'>2557</span>      * 
<span class='line'>2558</span>      */</span><span class="WHIT">    </span><span class="WHIT">
<span class='line'>2559</span> </span><span class="WHIT">	</span><span class="NAME">_listTrack</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">activity</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">series</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">activityIndex</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">seriesIndex</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2560</span> </span><span class="WHIT">		</span><span class="COMM">// make sure the select component exists</span><span class="WHIT">
<span class='line'>2561</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.readTracksSelect</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2562</span> </span><span class="WHIT">			</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">startDate</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">activity.getSummaryValue</span><span class="PUNC">(</span><span class="NAME">Garmin.Activity.SUMMARY_KEYS.startTime</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getValue</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2563</span> </span><span class="WHIT">			</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">endDate</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">activity.getSummaryValue</span><span class="PUNC">(</span><span class="NAME">Garmin.Activity.SUMMARY_KEYS.endTime</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">getValue</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2564</span> </span><span class="WHIT">			</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">values</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">date</span><span class="PUNC">:</span><span class="NAME">startDate.getDateString</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">duration</span><span class="PUNC">:</span><span class="NAME">startDate.getDurationTo</span><span class="PUNC">(</span><span class="NAME">endDate</span><span class="PUNC">)</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2565</span> </span><span class="WHIT">			</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">trackName</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.evaluateTemplate</span><span class="PUNC">(</span><span class="NAME">this.options.trackListing</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">values</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>2566</span> </span><span class="WHIT">			</span><span class="NAME">this.readTracksSelect.options</span><span class="PUNC">[</span><span class="NAME">this.readTracksSelect.length</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Option</span><span class="PUNC">(</span><span class="NAME">trackName</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">activityIndex</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">","</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">seriesIndex</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2567</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2568</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2569</span> 
<span class='line'>2570</span> </span><span class="WHIT">    </span><span class="COMM">/* Load waypoint name into select UI component.
<span class='line'>2571</span>      * 
<span class='line'>2572</span>      */</span><span class="WHIT">
<span class='line'>2573</span> </span><span class="WHIT">	</span><span class="NAME">_listWaypoint</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">activity</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">series</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">activityIndex</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">seriesIndex</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2574</span> </span><span class="WHIT">		</span><span class="COMM">// make sure the select component exists</span><span class="WHIT">
<span class='line'>2575</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.readWaypointsSelect</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2576</span> </span><span class="WHIT">			</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">wptName</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">activity.getAttribute</span><span class="PUNC">(</span><span class="NAME">Garmin.Activity.ATTRIBUTE_KEYS.activityName</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2577</span> </span><span class="WHIT">			</span><span class="NAME">this.readWaypointsSelect.options</span><span class="PUNC">[</span><span class="NAME">this.readWaypointsSelect.length</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Option</span><span class="PUNC">(</span><span class="NAME">wptName</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">activityIndex</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">","</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">seriesIndex</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2578</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2579</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2580</span> 
<span class='line'>2581</span> </span><span class="WHIT">    </span><span class="WHIT">
<span class='line'>2582</span> </span><span class="WHIT">    </span><span class="COMM">/* Retreive the two index string value from the selected index.
<span class='line'>2583</span>      * Activities are stored in Select objects as strings with 2 
<span class='line'>2584</span>      * numbers: "(index of array), (index of series)", for example:  "1,1".
<span class='line'>2585</span>      * @param Select select - the Select DOM instance
<span class='line'>2586</span>      * @type Garmin.Series
<span class='line'>2587</span>      * @return a Series instance
<span class='line'>2588</span>      */</span><span class="WHIT">
<span class='line'>2589</span> </span><span class="WHIT">    </span><span class="NAME">_seriesFromSelect</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">select</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2590</span> </span><span class="WHIT">    	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">indexesStr</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">select.options</span><span class="PUNC">[</span><span class="NAME">select.selectedIndex</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">value</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2591</span> </span><span class="WHIT">    	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">indexes</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">indexesStr.split</span><span class="PUNC">(</span><span class="STRN">","</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NUMB">2</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2592</span> </span><span class="WHIT">    	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">activity</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.activities</span><span class="PUNC">[</span><span class="NAME">parseInt</span><span class="PUNC">(</span><span class="NAME">indexes</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2593</span> </span><span class="WHIT">    	</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">series</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">activity.getSeries</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">[</span><span class="NAME">parseInt</span><span class="PUNC">(</span><span class="NAME">indexes</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2594</span> </span><span class="WHIT">    	</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">series</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2595</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2596</span> 
<span class='line'>2597</span> </span><span class="WHIT">    </span><span class="WHIT">
<span class='line'>2598</span> </span><span class="WHIT">    </span><span class="COMM">/** Draws a simple line on the map using the Garmin.MapController.
<span class='line'>2599</span>      * 
<span class='line'>2600</span>      * @param Garmin.Series series - that contains a track. 
<span class='line'>2601</span>      */</span><span class="WHIT">
<span class='line'>2602</span> </span><span class="WHIT">    </span><span class="NAME">displayTrack</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">series</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2603</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.options.showReadGoogleMap</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2604</span> </span><span class="WHIT">			</span><span class="NAME">this.readMapController.map.clearOverlays</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2605</span> </span><span class="WHIT">			</span><span class="NAME">this.readMapController.drawTrack</span><span class="PUNC">(</span><span class="NAME">series</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2606</span> </span><span class="WHIT">	    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2607</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2608</span> 
<span class='line'>2609</span> </span><span class="WHIT">    </span><span class="COMM">/** Draws a point (usualy as a thumb tack) on the map using the Garmin.MapController.
<span class='line'>2610</span>      * @param Garmin.Series series - that contains the lat/lon position of the point. 
<span class='line'>2611</span>      */</span><span class="WHIT">
<span class='line'>2612</span> </span><span class="WHIT">    </span><span class="NAME">displayWaypoint</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">series</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2613</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.options.showReadGoogleMap</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2614</span> </span><span class="WHIT">			</span><span class="NAME">this.readMapController.map.clearOverlays</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2615</span> </span><span class="WHIT">	        </span><span class="NAME">this.readMapController.drawWaypoint</span><span class="PUNC">(</span><span class="NAME">series</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2616</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2617</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2618</span> 
<span class='line'>2619</span> </span><span class="WHIT">    </span><span class="COMM">/** Clears overlays from map.
<span class='line'>2620</span>      * 
<span class='line'>2621</span>      */</span><span class="WHIT">
<span class='line'>2622</span> </span><span class="WHIT">	</span><span class="NAME">clearMapDisplay</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2623</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.options.showReadGoogleMap</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2624</span> </span><span class="WHIT">			</span><span class="NAME">this.readMapController.map.clearOverlays</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2625</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2626</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2627</span> 
<span class='line'>2628</span> 
<span class='line'>2629</span> </span><span class="WHIT">    </span><span class="COMM">////////////////////////////// WRITE METHODS ////////////////////////////// </span><span class="WHIT">
<span class='line'>2630</span> </span><span class="WHIT">    </span><span class="WHIT">
<span class='line'>2631</span> </span><span class="WHIT">    </span><span class="COMM">/** Writes any supported data to the device.
<span class='line'>2632</span>      * 
<span class='line'>2633</span>      * Requires that the option writeDataType field be set correctly to any of the following values 
<span class='line'>2634</span>      * located in Garmin.DeviceControl.FILE_TYPES:
<span class='line'>2635</span>      * 
<span class='line'>2636</span>      * 		gpx, crs, binary, goals
<span class='line'>2637</span>      * 
<span class='line'>2638</span>      * @throws InvalidTypeException
<span class='line'>2639</span>      * @see Garmin.DeviceDisplayDefaultOptions.writeDataType
<span class='line'>2640</span>      * @see Garmin.DeviceControl.FILE_TYPES
<span class='line'>2641</span>      */</span><span class="WHIT">
<span class='line'>2642</span> </span><span class="WHIT">    </span><span class="NAME">writeToDevice</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2643</span> </span><span class="WHIT">		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">dataType</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2644</span> </span><span class="WHIT">		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">supported</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2645</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>2646</span> </span><span class="WHIT">		</span><span class="COMM">// TODO remove this later </span><span class="WHIT">
<span class='line'>2647</span> </span><span class="WHIT">		</span><span class="COMM">// Backwards compatability for deprecated method</span><span class="WHIT">
<span class='line'>2648</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.options.writeDataType</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2649</span> </span><span class="WHIT">		    </span><span class="NAME">this.options.writeDataTypes</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Array</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2650</span> </span><span class="WHIT">		    </span><span class="NAME">this.options.writeDataTypes</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.writeDataType</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2651</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2652</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>2653</span> </span><span class="WHIT">		</span><span class="KEYW">for</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">this.options.writeDataTypes.length</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="NAME">i</span><span class="PUNC">++</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2654</span> </span><span class="WHIT">			</span><span class="NAME">dataType</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.writeDataTypes</span><span class="PUNC">[</span><span class="NAME">i</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2655</span> </span><span class="WHIT">			</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">deviceWriteSupport</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.getController</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">checkDeviceWriteSupport</span><span class="PUNC">(</span><span class="NAME">dataType</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2656</span> </span><span class="WHIT">			</span><span class="COMM">//var deviceWriteSupport = this.getController().checkDeviceWriteSupport(this.options.writeDataType);</span><span class="WHIT">
<span class='line'>2657</span> </span><span class="WHIT">			</span><span class="WHIT">
<span class='line'>2658</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">supported</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">deviceWriteSupport</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2659</span> </span><span class="WHIT">				</span><span class="NAME">supported</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">dataType</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2660</span> </span><span class="WHIT">				</span><span class="WHIT">
<span class='line'>2661</span> </span><span class="WHIT">				</span><span class="KEYW">switch</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">dataType</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2662</span> </span><span class="WHIT">                    </span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.goals</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>2663</span> </span><span class="WHIT">					</span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.gpx</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>2664</span> </span><span class="WHIT">					</span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.crs</span><span class="PUNC">:</span><span class="WHIT">					</span><span class="WHIT">
<span class='line'>2665</span> </span><span class="WHIT">					</span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.wkt</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>2666</span> </span><span class="WHIT">					</span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.tcxProfile</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>2667</span> </span><span class="WHIT">					</span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.nlf</span><span class="PUNC">:</span><span class="WHIT">                    </span><span class="WHIT">
<span class='line'>2668</span> </span><span class="WHIT">                        </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">writeData</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.getWriteData</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2669</span> </span><span class="WHIT">                        </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">writeDataFileName</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.options.getWriteDataFileName</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">                        </span><span class="WHIT">
<span class='line'>2670</span> </span><span class="WHIT">                        </span><span class="NAME">this.getController</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">writeDataToDevice</span><span class="PUNC">(</span><span class="NAME">dataType</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">writeData</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">writeDataFileName</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2671</span> </span><span class="WHIT">                        </span><span class="KEYW">break</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2672</span> </span><span class="WHIT">					</span><span class="COMM">// TODO Deprecated.  Delete this fella.</span><span class="WHIT">
<span class='line'>2673</span> </span><span class="WHIT">					</span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.gpi</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>2674</span> </span><span class="WHIT">						</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">xmlDescription</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Garmin.GpiUtil.buildMultipleDeviceDownloadsXML</span><span class="PUNC">(</span><span class="NAME">this.options.getGpiWriteDescription</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2675</span> </span><span class="WHIT">						</span><span class="NAME">this.getController</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">downloadToDevice</span><span class="PUNC">(</span><span class="NAME">xmlDescription</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2676</span> </span><span class="WHIT">						</span><span class="KEYW">break</span><span class="PUNC">;</span><span class="WHIT">					</span><span class="WHIT">
<span class='line'>2677</span> </span><span class="WHIT">					</span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.fitSettings</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>2678</span> </span><span class="WHIT">					</span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.fitSport</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>2679</span> </span><span class="WHIT">					</span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.fitCourse</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>2680</span> </span><span class="WHIT">					</span><span class="KEYW">case</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.binary</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>2681</span> </span><span class="WHIT">						</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">xmlDescription</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Garmin.GpiUtil.buildMultipleDeviceDownloadsXML</span><span class="PUNC">(</span><span class="NAME">this.options.getBinaryWriteDescription</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2682</span> </span><span class="WHIT">						</span><span class="NAME">this.getController</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">downloadToDevice</span><span class="PUNC">(</span><span class="NAME">xmlDescription</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2683</span> </span><span class="WHIT">						</span><span class="KEYW">break</span><span class="PUNC">;</span><span class="WHIT">					</span><span class="WHIT">
<span class='line'>2684</span> </span><span class="WHIT">					</span><span class="KEYW">default</span><span class="PUNC">:</span><span class="WHIT">
<span class='line'>2685</span> </span><span class="WHIT">						</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">error</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Error</span><span class="PUNC">(</span><span class="NAME">Garmin.DeviceControl.MESSAGES.invalidFileType</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">dataType</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2686</span> </span><span class="WHIT">						</span><span class="NAME">error.name</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"InvalidTypeException"</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2687</span> </span><span class="WHIT">						</span><span class="NAME">this.handleException</span><span class="PUNC">(</span><span class="NAME">error</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="WHIT">
<span class='line'>2688</span> </span><span class="WHIT">				</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2689</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2690</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2691</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>2692</span> </span><span class="WHIT">		</span><span class="COMM">// No supported types found, throw error</span><span class="WHIT">
<span class='line'>2693</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">supported</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2694</span> </span><span class="WHIT">			</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">error</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Error</span><span class="PUNC">(</span><span class="NAME">this.evaluateTemplate</span><span class="PUNC">(</span><span class="NAME">this.options.unsupportedWriteDataType</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="NAME">dataType</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">dataType</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2695</span> </span><span class="WHIT">			</span><span class="NAME">error.name</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"UnsupportedDataTypeException"</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2696</span> </span><span class="WHIT">			</span><span class="NAME">this.handleException</span><span class="PUNC">(</span><span class="NAME">error</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2697</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2698</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2699</span> 
<span class='line'>2700</span> </span><span class="WHIT">	</span><span class="COMM">/** Call-back triggered before writing to a device.
<span class='line'>2701</span>      * @see Garmin.DeviceControl
<span class='line'>2702</span>      * @event
<span class='line'>2703</span> 	 */</span><span class="WHIT">
<span class='line'>2704</span> </span><span class="WHIT">    </span><span class="NAME">onStartWriteToDevice</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">json</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="WHIT">
<span class='line'>2705</span> </span><span class="WHIT">     	</span><span class="NAME">this.setStatus</span><span class="PUNC">(</span><span class="NAME">this.options.writingToDevice</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2706</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2707</span> 
<span class='line'>2708</span> </span><span class="WHIT">	</span><span class="COMM">/** Call-back triggered when write has been cancelled.
<span class='line'>2709</span>      * @see Garmin.DeviceControl
<span class='line'>2710</span>      * @event
<span class='line'>2711</span> 	 */</span><span class="WHIT">
<span class='line'>2712</span> </span><span class="WHIT">    </span><span class="NAME">onCancelWriteToDevice</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">json</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="WHIT">
<span class='line'>2713</span> </span><span class="WHIT">    	</span><span class="NAME">this.setStatus</span><span class="PUNC">(</span><span class="NAME">this.options.writingCancelled</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2714</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2715</span> 
<span class='line'>2716</span> </span><span class="WHIT">    </span><span class="COMM">/** Call-back when the device already has a file with this name on it.  Do we want to override?  1 is yes, 2 is no
<span class='line'>2717</span>      * @see Garmin.DeviceControl
<span class='line'>2718</span>      * @event
<span class='line'>2719</span>      */</span><span class="WHIT"> </span><span class="WHIT">
<span class='line'>2720</span> </span><span class="WHIT">    </span><span class="NAME">onWaitingWriteToDevice</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">json</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="WHIT">
<span class='line'>2721</span> </span><span class="WHIT">        </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">confirm</span><span class="PUNC">(</span><span class="NAME">json.message.getText</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2722</span> </span><span class="WHIT">            </span><span class="NAME">this.setStatus</span><span class="PUNC">(</span><span class="NAME">this.options.overwritingFile</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2723</span> </span><span class="WHIT">            </span><span class="NAME">json.controller.respondToMessageBox</span><span class="PUNC">(</span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2724</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2725</span> </span><span class="WHIT">            </span><span class="NAME">this.setStatus</span><span class="PUNC">(</span><span class="NAME">this.options.notOverwritingFile</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2726</span> </span><span class="WHIT">            </span><span class="NAME">json.controller.respondToMessageBox</span><span class="PUNC">(</span><span class="KEYW">false</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2727</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2728</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2729</span> 
<span class='line'>2730</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='line'>2731</span>      * @event
<span class='line'>2732</span>      */</span><span class="WHIT">
<span class='line'>2733</span> </span><span class="WHIT">    </span><span class="NAME">onProgressWriteToDevice</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">json</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2734</span> </span><span class="WHIT">	  	</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.options.showProgressBar</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2735</span> </span><span class="WHIT">	  		</span><span class="NAME">this.updateProgressBar</span><span class="PUNC">(</span><span class="NAME">this.progressBarDisplay</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">json.progress.getPercentage</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2736</span> </span><span class="WHIT">	  	</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2737</span> </span><span class="WHIT">  		</span><span class="NAME">this.setStatus</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">json.progress.percentage</span><span class="PUNC">==</span><span class="NUMB">100</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">this.options.dataDownloadProcessing</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">json.progress</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2738</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2739</span> 
<span class='line'>2740</span> </span><span class="WHIT">    </span><span class="COMM">/**
<span class='line'>2741</span>      * @event
<span class='line'>2742</span>      */</span><span class="WHIT">
<span class='line'>2743</span> </span><span class="WHIT">    </span><span class="NAME">onFinishWriteToDevice</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">json</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2744</span> </span><span class="WHIT">    	</span><span class="NAME">this.setStatus</span><span class="PUNC">(</span><span class="NAME">this.options.writtenToDevice</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2745</span> </span><span class="WHIT">	    </span><span class="NAME">this.resetUI</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2746</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.options.afterFinishWriteToDevice</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2747</span> </span><span class="WHIT">    		</span><span class="NAME">this.options.afterFinishWriteToDevice.call</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">json.success</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2748</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2749</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2750</span> </span><span class="WHIT">    </span><span class="WHIT">
<span class='line'>2751</span> </span><span class="WHIT">    </span><span class="COMM">////////////////////////////// UTILITY METHODS ////////////////////////////// </span><span class="WHIT">
<span class='line'>2752</span> </span><span class="WHIT">    </span><span class="WHIT">
<span class='line'>2753</span> </span><span class="WHIT">    </span><span class="COMM">/** Sets up the device control which handles most of the work that isn't user
<span class='line'>2754</span>      * interface related.  The controller is lazy loaded the first time it is called.
<span class='line'>2755</span>      * Early calls must specify the unlock parameter, but read and write methods should
<span class='line'>2756</span>      * not because they should follow a call to findDevice.
<span class='line'>2757</span>      * 
<span class='line'>2758</span>      * Also initializes the RemoteTransfer object used to transfer data to remote servers.
<span class='line'>2759</span>      *   
<span class='line'>2760</span>      * @param Boolean optional request to unlock the plugin if not already done.
<span class='line'>2761</span>      */</span><span class="WHIT">
<span class='line'>2762</span> </span><span class="WHIT">	</span><span class="NAME">getController</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">unlock</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2763</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this.garminController</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2764</span> </span><span class="WHIT">			</span><span class="KEYW">try</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2765</span> </span><span class="WHIT">				</span><span class="NAME">this.garminController</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2766</span> </span><span class="WHIT">				</span><span class="NAME">this.garminController.register</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2767</span> </span><span class="WHIT">				</span><span class="NAME">this.garminController.setPluginRequiredVersion</span><span class="PUNC">(</span><span class="NAME">this.options.pluginRequiredVersion</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2768</span> </span><span class="WHIT">				</span><span class="NAME">this.garminController.setPluginLatestVersion</span><span class="PUNC">(</span><span class="NAME">this.options.pluginLatestVersion</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2769</span> </span><span class="WHIT">				</span><span class="NAME">this.garminController.validatePlugin</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2770</span> </span><span class="WHIT">	        </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">catch</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2771</span> </span><span class="WHIT">	            </span><span class="NAME">this.handleException</span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2772</span> </span><span class="WHIT">	            </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2773</span> </span><span class="WHIT">	        </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2774</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2775</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this.error</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">unlock</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="NAME">this.isUnlocked</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2776</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.garminController.unlock</span><span class="PUNC">(</span><span class="NAME">this.options.pathKeyPairsArray</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2777</span> </span><span class="WHIT">	        	</span><span class="NAME">this.setStatus</span><span class="PUNC">(</span><span class="NAME">this.options.pluginUnlocked</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2778</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2779</span> </span><span class="WHIT">	        	</span><span class="NAME">this.setStatus</span><span class="PUNC">(</span><span class="NAME">this.options.pluginNotUnlocked</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2780</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2781</span> </span><span class="WHIT">			</span><span class="NAME">this.garminRemoteTransfer</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Garmin.RemoteTransfer</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2782</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2783</span> </span><span class="WHIT">		</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.garminController</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2784</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2785</span> 
<span class='line'>2786</span> </span><span class="WHIT">	</span><span class="COMM">/** Plugin unlock status
<span class='line'>2787</span> 	 * @returns Boolean
<span class='line'>2788</span> 	 */</span><span class="WHIT">
<span class='line'>2789</span> </span><span class="WHIT">	</span><span class="NAME">isUnlocked</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2790</span> </span><span class="WHIT">		</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.garminController</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">this.garminController.isUnlocked</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2791</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2792</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>2793</span> </span><span class="WHIT">	</span><span class="COMM">/** Sets options for this display object.  Any options that are set will override
<span class='line'>2794</span> 	 * the default values.
<span class='line'>2795</span> 	 *
<span class='line'>2796</span> 	 * @see Garmin.DeviceDisplayDefaultOptions for possible options and default values.
<span class='line'>2797</span> 	 * @throws InvalidOptionException
<span class='line'>2798</span> 	 * @param Object options - Object with options.
<span class='line'>2799</span> 	 */</span><span class="WHIT">
<span class='line'>2800</span> </span><span class="WHIT">	</span><span class="NAME">setOptions</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">options</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2801</span> </span><span class="WHIT">		</span><span class="KEYW">for</span><span class="PUNC">(</span><span class="NAME">key</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">options</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2802</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">key</span><span class="WHIT"> </span><span class="KEYW">in</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceDisplayDefaultOptions</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2803</span> </span><span class="WHIT">				</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">err</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Error</span><span class="PUNC">(</span><span class="NAME">key</span><span class="PUNC">+</span><span class="STRN">" is not a valid option name, see Garmin.DeviceDisplayDefaultOptions"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2804</span> </span><span class="WHIT">				</span><span class="NAME">err.name</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"InvalidOptionException"</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2805</span> </span><span class="WHIT">				</span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="NAME">err</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2806</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2807</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2808</span> </span><span class="WHIT">		</span><span class="NAME">this.options</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Object.extend</span><span class="PUNC">(</span><span class="NAME">Garmin.DeviceDisplayDefaultOptions</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">options</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2809</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2810</span> 
<span class='line'>2811</span> </span><span class="WHIT">	</span><span class="COMM">/*Sets the size of the select to zero which essentially clears it from 
<span class='line'>2812</span> 	 * any values.
<span class='line'>2813</span> 	 * 
<span class='line'>2814</span> 	 * @param {HTMLElement} select DOM element
<span class='line'>2815</span> 	 */</span><span class="WHIT">
<span class='line'>2816</span> </span><span class="WHIT">    </span><span class="NAME">_clearHtmlSelect</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">select</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2817</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">select</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2818</span> </span><span class="WHIT">			</span><span class="NAME">select.length</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2819</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2820</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2821</span> 
<span class='line'>2822</span> </span><span class="WHIT">    </span><span class="COMM">/** Set status text if showStatusElement is visible.
<span class='line'>2823</span>      * @param String text to display.
<span class='line'>2824</span>      */</span><span class="WHIT">
<span class='line'>2825</span> </span><span class="WHIT">	</span><span class="NAME">setStatus</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">statusText</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2826</span> </span><span class="WHIT">	    </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">statusText</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2827</span> </span><span class="WHIT">	        </span><span class="NAME">statusText</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">''</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2828</span> </span><span class="WHIT">	    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2829</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.options.showStatusElement</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2830</span> </span><span class="WHIT">			</span><span class="WHIT">
<span class='line'>2831</span> </span><span class="WHIT">			</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">statusDisplayString</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2832</span> </span><span class="WHIT">			</span><span class="WHIT">
<span class='line'>2833</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">this.options.showDetailedStatus</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2834</span> </span><span class="WHIT">				</span><span class="NAME">statusDisplayString</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._buildDescriptiveStatusString</span><span class="PUNC">(</span><span class="NAME">statusText</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2835</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2836</span> </span><span class="WHIT">				</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">statusText.getText</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2837</span> </span><span class="WHIT">					</span><span class="WHIT">
<span class='line'>2838</span> </span><span class="WHIT">					</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">text</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">statusText.getText</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2839</span> </span><span class="WHIT">					</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">text</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">Array</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2840</span> </span><span class="WHIT">						</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">text.length</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="WHIT">
<span class='line'>2841</span> </span><span class="WHIT">							</span><span class="NAME">statusDisplayString</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">''</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2842</span> </span><span class="WHIT">						</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="WHIT">
<span class='line'>2843</span> </span><span class="WHIT">							</span><span class="NAME">statusDisplayString</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">statusText.getText</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2844</span> </span><span class="WHIT">						</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2845</span> </span><span class="WHIT">					</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2846</span> </span><span class="WHIT">				</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2847</span> </span><span class="WHIT">					</span><span class="NAME">statusDisplayString</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">statusText</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2848</span> </span><span class="WHIT">				</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2849</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="WHIT">
<span class='line'>2850</span> </span><span class="WHIT">		   	</span><span class="NAME">this.statusText.innerHTML</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">statusDisplayString</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2851</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2852</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2853</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>2854</span> </span><span class="WHIT">	</span><span class="COMM">/** Builds a descriptive string from the status response (typically JSON, but also can be a plain ol' string).
<span class='line'>2855</span> 	 */</span><span class="WHIT">
<span class='line'>2856</span> </span><span class="WHIT">	</span><span class="NAME">_buildDescriptiveStatusString</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">statusText</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2857</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">statusText</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2858</span> </span><span class="WHIT">	        </span><span class="NAME">statusText</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">''</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2859</span> </span><span class="WHIT">	    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2860</span> </span><span class="WHIT">		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">resultString</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">statusText</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2861</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>2862</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">statusText.getTitle</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2863</span> </span><span class="WHIT">			</span><span class="NAME">resultString</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">statusText.getTitle</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">"&lt;br />"</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2864</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2865</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">statusText.getText</span><span class="WHIT"> </span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2866</span> </span><span class="WHIT">			</span><span class="NAME">resultString</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">statusText.getText</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2867</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2868</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>2869</span> </span><span class="WHIT">		</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">resultString</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2870</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2871</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>2872</span> </span><span class="WHIT">	</span><span class="COMM">/** Helper method. Evaluates Prototype's Template object, and returns the evaluated string.
<span class='line'>2873</span> 	 * 
<span class='line'>2874</span> 	 * Templates should contain fields as in the following format: 'My cow has #{numSpots}' spots!'
<span class='line'>2875</span> 	 * Fields are in the following format: {numSpots: 22}
<span class='line'>2876</span> 	 * 
<span class='line'>2877</span> 	 * @param String template - the template to evaluate     
<span class='line'>2878</span> 	 * @param Hash fields - the fields referenced in template
<span class='line'>2879</span> 	 * @return the evaluated template string   
<span class='line'>2880</span> 	 */</span><span class="WHIT">
<span class='line'>2881</span> </span><span class="WHIT">	</span><span class="COMM">// TODO Move out to js-util</span><span class="WHIT">
<span class='line'>2882</span> </span><span class="WHIT">	</span><span class="NAME">evaluateTemplate</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">template</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">fields</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2883</span> </span><span class="WHIT">	    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Template</span><span class="PUNC">(</span><span class="NAME">template</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">evaluate</span><span class="PUNC">(</span><span class="NAME">fields</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2884</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2885</span> 
<span class='line'>2886</span> </span><span class="WHIT">    </span><span class="COMM">/** Makes progress bar visible.
<span class='line'>2887</span>      * @deprecated
<span class='line'>2888</span>      */</span><span class="WHIT">
<span class='line'>2889</span> </span><span class="WHIT">	</span><span class="NAME">showProgressBar</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2890</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.options.showStatusElement</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">this.options.showProgressBar</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2891</span> </span><span class="WHIT">		    </span><span class="NAME">Element.show</span><span class="PUNC">(</span><span class="NAME">this.progressBar</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2892</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2893</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2894</span> 
<span class='line'>2895</span> </span><span class="WHIT">    </span><span class="COMM">/** Hides progress bar.
<span class='line'>2896</span>      */</span><span class="WHIT">
<span class='line'>2897</span> </span><span class="WHIT">	</span><span class="NAME">hideProgressBar</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2898</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.options.showStatusElement</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">this.options.showProgressBar</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2899</span> </span><span class="WHIT">		    </span><span class="NAME">Element.hide</span><span class="PUNC">(</span><span class="NAME">this.progressBar</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2900</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2901</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2902</span> 
<span class='line'>2903</span> </span><span class="WHIT">    </span><span class="COMM">/** Update percentage representation of progress bar.
<span class='line'>2904</span>      * The progress bar starts out as full and then resets to empty.  This is to
<span class='line'>2905</span>      * take care of extremely short transfers.
<span class='line'>2906</span>      * @param {Element} progressBarDisplay - the progress bar display DOM element to update. 
<span class='line'>2907</span>      * @param int percentage completion: 0-100 
<span class='line'>2908</span>      */</span><span class="WHIT">
<span class='line'>2909</span> </span><span class="WHIT">	</span><span class="NAME">updateProgressBar</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">progressBarDisplay</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">value</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2910</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.options.showStatusElement</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">this.options.showProgressBar</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">value</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2911</span> </span><span class="WHIT">			</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">percent</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NUMB">0</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NAME">value</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">value</span><span class="WHIT"> </span><span class="PUNC">&lt;=</span><span class="WHIT"> </span><span class="NUMB">100</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">value</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">100</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2912</span> </span><span class="WHIT">		    </span><span class="NAME">progressBarDisplay.style.width</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">percent</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">"%"</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2913</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2914</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2915</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>2916</span> </span><span class="WHIT">	</span><span class="COMM">/** Update the progress text of the progress bar.
<span class='line'>2917</span> 	 * @param {Element} progressBarText - the progress bar text DOM element to update.
<span class='line'>2918</span> 	 * @param String the progress text to display near the progress bar
<span class='line'>2919</span> 	 */</span><span class="WHIT">
<span class='line'>2920</span> </span><span class="WHIT">	</span><span class="NAME">updateProgressBarText</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">progressBarText</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">text</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2921</span> </span><span class="WHIT">	    </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">this.options.showStatusElement</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">this.options.showProgressBar</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">text</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2922</span> </span><span class="WHIT">	        </span><span class="NAME">progressBarText.innerHTML</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">text</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2923</span> </span><span class="WHIT">	    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2924</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2925</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>2926</span> </span><span class="WHIT">    </span><span class="COMM">/** Call-back for asynchronous method exceptions.
<span class='line'>2927</span>      * @see Garmin.DeviceControl
<span class='line'>2928</span>      * @event
<span class='line'>2929</span>      */</span><span class="WHIT">
<span class='line'>2930</span> </span><span class="WHIT">	</span><span class="NAME">onException</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">json</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2931</span> </span><span class="WHIT">		</span><span class="NAME">this.handleException</span><span class="PUNC">(</span><span class="NAME">json.msg</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2932</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2933</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>2934</span> </span><span class="WHIT">    </span><span class="COMM">/** Central exception dispatch method will delegate to options.customExceptionHandler
<span class='line'>2935</span>      * if defined or call defaultExceptionHandler otherwise.
<span class='line'>2936</span>      * @param {Error} error to process.
<span class='line'>2937</span>      */</span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>2938</span> </span><span class="WHIT">	</span><span class="NAME">handleException</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">error</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2939</span> </span><span class="WHIT">		</span><span class="NAME">this.error</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2940</span> </span><span class="WHIT">   	    </span><span class="COMM">//console.debug("Display.handleException error="+error)</span><span class="WHIT">
<span class='line'>2941</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.options.customExceptionHandler</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2942</span> </span><span class="WHIT">			</span><span class="NAME">this.options.customExceptionHandler.call</span><span class="PUNC">(</span><span class="KEYW">this</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">error</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2943</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2944</span> </span><span class="WHIT">			</span><span class="NAME">this.defaultExceptionHandler</span><span class="PUNC">(</span><span class="NAME">error</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2945</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2946</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2947</span> </span><span class="WHIT">    </span><span class="COMM">/** Default exception handler method handles plug-in support/downloads/upgrades. 
<span class='line'>2948</span>      * If options.showStatusElement is true then put error messages in the status div otherwise
<span class='line'>2949</span>      * put it in a alert popup.
<span class='line'>2950</span>      * @param {Error} error - error to process.
<span class='line'>2951</span>      */</span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>2952</span> </span><span class="WHIT">	</span><span class="NAME">defaultExceptionHandler</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">error</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2953</span> </span><span class="WHIT">		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">errorStatus</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2954</span> </span><span class="WHIT">		</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">hideFromBrowser</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2955</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="NAME">error.name</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="STRN">"BrowserNotSupportedException"</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2956</span> </span><span class="WHIT">			</span><span class="NAME">errorStatus</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">error.message</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2957</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">this.options.hideIfBrowserNotSupported</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2958</span> </span><span class="WHIT">				</span><span class="NAME">hideFromBrowser</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2959</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2960</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">error.name</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="STRN">"PluginNotInstalledException"</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">error.name</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="STRN">"OutOfDatePluginException"</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2961</span> </span><span class="WHIT">			</span><span class="NAME">errorStatus</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">error.message</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2962</span> </span><span class="WHIT">			</span><span class="NAME">errorStatus</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">" &lt;a href=\""</span><span class="PUNC">+</span><span class="NAME">Garmin.DeviceDisplay.LINKS.pluginDownload</span><span class="PUNC">+</span><span class="STRN">"\" target=\"_blank\">"</span><span class="WHIT">  </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">this.options.downloadAndInstall</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">"&lt;/a>"</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2963</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">Garmin.PluginUtils.isDeviceErrorXml</span><span class="PUNC">(</span><span class="NAME">error</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2964</span> </span><span class="WHIT">			</span><span class="NAME">errorStatus</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Garmin.PluginUtils.getDeviceErrorMessage</span><span class="PUNC">(</span><span class="NAME">error</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>2965</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">error.name</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="STRN">"UnsupportedDeviceException"</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">error.name</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="STRN">"UnsupportedDataTypeException"</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">error.name</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="STRN">"RemoteTransferException"</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2966</span> </span><span class="WHIT">		    </span><span class="NAME">errorStatus</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">error.message</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2967</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2968</span> </span><span class="WHIT">			</span><span class="NAME">errorStatus</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">error.name</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">": "</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">error.message</span><span class="PUNC">;</span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>2969</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">						</span><span class="WHIT">
<span class='line'>2970</span> 
<span class='line'>2971</span> </span><span class="WHIT">		</span><span class="NAME">this.setStatus</span><span class="PUNC">(</span><span class="NAME">errorStatus</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2972</span> </span><span class="WHIT">		</span><span class="NAME">this.resetUI</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2973</span> </span><span class="WHIT">		</span><span class="COMM">//if no status UI div is defined, make sure the user sees the error</span><span class="WHIT">
<span class='line'>2974</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">this.options.showStatusElement</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="PUNC">!</span><span class="NAME">hideFromBrowser</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2975</span> </span><span class="WHIT">			</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">error.name</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="STRN">"PluginNotInstalledException"</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="NAME">error.name</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="STRN">"OutOfDatePluginException"</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2976</span> </span><span class="WHIT">				</span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">window.confirm</span><span class="PUNC">(</span><span class="NAME">error.message</span><span class="PUNC">+</span><span class="STRN">"\n"</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="NAME">this.options.installNow</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2977</span> </span><span class="WHIT">					</span><span class="NAME">window.open</span><span class="PUNC">(</span><span class="NAME">Garmin.DeviceDisplay.LINKS.pluginDownload</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"_blank"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2978</span> </span><span class="WHIT">				</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2979</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2980</span> </span><span class="WHIT">				</span><span class="NAME">alert</span><span class="PUNC">(</span><span class="NAME">errorStatus</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2981</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2982</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2983</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2984</span> </span><span class="WHIT">    </span><span class="WHIT">
<span class='line'>2985</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>2986</span> 
<span class='line'>2987</span> </span><span class="NAME">Garmin.DeviceDisplay.MISC</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2988</span> </span><span class="WHIT">		</span><span class="NAME">health_data_id</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'weight'</span><span class="WHIT">
<span class='line'>2989</span> </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>2990</span> 
<span class='line'>2991</span> </span><span class="COMM">/** Constant defining links referenced in the DeviceDisplay
<span class='line'>2992</span>  * 
<span class='line'>2993</span>  * @struct {public} Garmin.DeviceDisplay.LINKS
<span class='line'>2994</span>  */</span><span class="WHIT">
<span class='line'>2995</span> </span><span class="NAME">Garmin.DeviceDisplay.LINKS</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>2996</span> </span><span class="WHIT">	</span><span class="NAME">pluginDownload</span><span class="PUNC">:</span><span class="WHIT">	</span><span class="STRN">"http://www.garmin.com/products/communicator/"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>2997</span> </span><span class="WHIT">	</span><span class="COMM">/** Function that returns a direct download link based on the user's OS.
<span class='line'>2998</span> 	 */</span><span class="WHIT">
<span class='line'>2999</span> </span><span class="WHIT">	 </span><span class="COMM">// TODO Use this when we have a way of getting the latest version all the time.</span><span class="WHIT">
<span class='line'>3000</span> </span><span class="WHIT">	</span><span class="NAME">pluginDownloadDetectOs</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="WHIT">
<span class='line'>3001</span> </span><span class="WHIT">            </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">BrowserDetect.OS</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="STRN">"Windows"</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="STRN">"http://www.garmin.com/products/communicator/"</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>3002</span> </span><span class="WHIT">            </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="WHIT"> </span><span class="NAME">BrowserDetect.OS</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="STRN">"Mac"</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="STRN">"http://www.garmin.com/products/communicator/"</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>3003</span> </span><span class="WHIT">            </span><span class="KEYW">else</span><span class="WHIT"> </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="STRN">"http://www.garmin.com/products/communicator/"</span><span class="WHIT">
<span class='line'>3004</span> </span><span class="WHIT">	      </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>3005</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>3006</span> 
<span class='line'>3007</span> </span><span class="COMM">/** A queue of filters to be applied to activities after data is
<span class='line'>3008</span>  * obtained from the device.  Also used by display to determine
<span class='line'>3009</span>  * if the filtering process is finished; 
<span class='line'>3010</span>  */</span><span class="WHIT">
<span class='line'>3011</span> </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">garminFilterQueue</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">Array</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>3012</span> 
<span class='line'>3013</span> </span><span class="COMM">/** The default display options for the generated plug-in elements including
<span class='line'>3014</span>  * booleans for which sub-items to show.  Override specific option values by 
<span class='line'>3015</span>  * calling setOptions(optionsHash) on your instance of Garmin.DeviceDisplay
<span class='line'>3016</span>  * to customize your display options.
<span class='line'>3017</span>  *
<span class='line'>3018</span>  * @class Garmin.DeviceDisplayDefaultOptions  
<span class='line'>3019</span>  * @name Garmin.DeviceDisplayDefaultOptions 
<span class='line'>3020</span>  */</span><span class="WHIT">
<span class='line'>3021</span> </span><span class="NAME">Garmin.DeviceDisplayDefaultOptions</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT">
<span class='line'>3022</span> </span><span class="WHIT">    </span><span class="COMM">/** @lends Garmin.DeviceDisplayDefaultOptions */</span><span class="WHIT"> </span><span class="WHIT">
<span class='line'>3023</span> </span><span class="WHIT">    </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>3024</span> </span><span class="WHIT">	</span><span class="COMM">// ================== Plugin unlock ======================</span><span class="WHIT">
<span class='line'>3025</span> 
<span class='line'>3026</span> </span><span class="WHIT">	</span><span class="COMM">/**Unlock plugin when user lands on containing page which may result in security or
<span class='line'>3027</span> 	 * plugin-not-installed messages.  Set to false to supress plugin acivity
<span class='line'>3028</span> 	 * until user initiates an action.
<span class='line'>3029</span> 	 * 
<span class='line'>3030</span> 	 * @default true
<span class='line'>3031</span> 	 * @type Boolean
<span class='line'>3032</span> 	 */</span><span class="WHIT">
<span class='line'>3033</span> </span><span class="WHIT">	</span><span class="NAME">unlockOnPageLoad</span><span class="PUNC">:</span><span class="WHIT">			</span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3034</span> 
<span class='line'>3035</span> </span><span class="WHIT">	</span><span class="COMM">/**The array of strings that contain the unlock codes for the plugin.
<span class='line'>3036</span> 	* @example [URL1,KEY1,URL2,KEY2] 
<span class='line'>3037</span> 	* Add as many url/key pairs as you'd like.
<span class='line'>3038</span> 	* @type String[]
<span class='line'>3039</span> 	*/</span><span class="WHIT">
<span class='line'>3040</span> </span><span class="WHIT">	</span><span class="NAME">pathKeyPairsArray</span><span class="PUNC">:</span><span class="WHIT">			</span><span class="PUNC">[</span><span class="STRN">"file:///C:/dev/"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"bd04dc1f5e97a6ff1ea76c564d133b7e"</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3041</span> 
<span class='line'>3042</span> 
<span class='line'>3043</span> </span><span class="WHIT">	</span><span class="COMM">// ================== Global Options ======================</span><span class="WHIT">
<span class='line'>3044</span> </span><span class="WHIT">	</span><span class="COMM">/**The class name used by various parts of the display to make
<span class='line'>3045</span> 	 * CSS styling easier.
<span class='line'>3046</span> 	 * 
<span class='line'>3047</span> 	 * @see Garmin.DeviceDisplayDefaultOptions.statusElementId
<span class='line'>3048</span> 	 * @see Garmin.DeviceDisplayDefaultOptions.readDataElementId
<span class='line'>3049</span> 	 * @see Garmin.DeviceDisplayDefaultOptions.findDevicesElementId
<span class='line'>3050</span> 	 * @default "pluginElement"
<span class='line'>3051</span> 	 * @type String
<span class='line'>3052</span> 	 */</span><span class="WHIT">
<span class='line'>3053</span> </span><span class="WHIT">	</span><span class="NAME">elementClassName</span><span class="PUNC">:</span><span class="WHIT">			</span><span class="STRN">"pluginElement"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3054</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3055</span> </span><span class="WHIT">	</span><span class="COMM">/**Display link instead of buttons.  Currently this only applies to the 'Find Devices' button.
<span class='line'>3056</span> 	 * @default false
<span class='line'>3057</span> 	 * @type Boolean
<span class='line'>3058</span> 	 */</span><span class="WHIT">
<span class='line'>3059</span> </span><span class="WHIT">	</span><span class="NAME">useLinks</span><span class="PUNC">:</span><span class="WHIT">					</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3060</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3061</span> </span><span class="WHIT">	</span><span class="COMM">/**Action to take if browser is not supported:
<span class='line'>3062</span> 	 * if true on't display the application,
<span class='line'>3063</span> 	 * else if status bar is visible, display message, otherwise popup an alert dialog
<span class='line'>3064</span> 	 * @default false
<span class='line'>3065</span> 	 * @type Boolean
<span class='line'>3066</span> 	 */</span><span class="WHIT">
<span class='line'>3067</span> </span><span class="WHIT">	</span><span class="NAME">hideIfBrowserNotSupported</span><span class="PUNC">:</span><span class="WHIT">		</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3068</span> 
<span class='line'>3069</span> </span><span class="WHIT">	</span><span class="COMM">/**The function called when an error occurs.  This is here to allow
<span class='line'>3070</span> 	 * custom error handling logic.  &lt;br/>
<span class='line'>3071</span> 	 * &lt;br/>
<span class='line'>3072</span> 	 * The function should accept an arguement of type Error (Javascript 
<span class='line'>3073</span> 	 * Error Object) and a second arguement for the DeviceDisplay instance.&lt;br/>
<span class='line'>3074</span> 	 * &lt;br/>
<span class='line'>3075</span> 	 * &lt;br/>Error.name - the type of the error in a String format.
<span class='line'>3076</span> 	 * &lt;br/>Error.message - the detailed message of the error.&lt;br/>
<span class='line'>3077</span> 	 *&lt;br/>
<span class='line'>3078</span> 	 * Some Errors:&lt;br/>
<span class='line'>3079</span> 	 * 	PluginNotInstalledException - the plugin is not installed&lt;br/>
<span class='line'>3080</span> 	 *  OutOfDatePluginException - the plugin is out of date&lt;br/>
<span class='line'>3081</span> 	 *  BrowserNotSupportedException - the browser is not support by the site&lt;br/>
<span class='line'>3082</span> 	 * @example
<span class='line'>3083</span> 	 * function(error, display){ display.defaultExceptionHandler(error); }
<span class='line'>3084</span> 	 * @type function 
<span class='line'>3085</span> 	 * @function
<span class='line'>3086</span> 	 */</span><span class="WHIT">				</span><span class="WHIT">
<span class='line'>3087</span> </span><span class="WHIT">	</span><span class="NAME">customExceptionHandler</span><span class="PUNC">:</span><span class="WHIT">		</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="WHIT">
<span class='line'>3088</span> 
<span class='line'>3089</span> </span><span class="WHIT">	</span><span class="COMM">/**Class name to add for all buttons/links that perform an action
<span class='line'>3090</span> 	 * @default "actionButton"
<span class='line'>3091</span> 	 * @type String 
<span class='line'>3092</span> 	 */</span><span class="WHIT">
<span class='line'>3093</span> </span><span class="WHIT">	</span><span class="NAME">actionButtonClassName</span><span class="PUNC">:</span><span class="WHIT">		</span><span class="STRN">"actionButton"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3094</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3095</span> </span><span class="WHIT">	</span><span class="COMM">/**DEPRECATED - Use autoHideUnusedElements instead!  
<span class='line'>3096</span> 	 * Auto-hides read elements when they are not in use.  This is currently used for the Upload Activities use case.
<span class='line'>3097</span> 	 * @default false
<span class='line'>3098</span> 	 * @type String 
<span class='line'>3099</span> 	 */</span><span class="WHIT">
<span class='line'>3100</span> </span><span class="WHIT">	</span><span class="NAME">autoHideUnusedReadElements</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3101</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3102</span> </span><span class="WHIT">	</span><span class="COMM">/**Auto-hides elements when they are not in use.  This is used to simulate a UI with different screens, until we design a better way to do this. 
<span class='line'>3103</span> 	 * @default false
<span class='line'>3104</span> 	 * @type String
<span class='line'>3105</span> 	 */</span><span class="WHIT">
<span class='line'>3106</span> </span><span class="WHIT">	</span><span class="NAME">autoHideUnusedElements</span><span class="PUNC">:</span><span class="WHIT">		</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3107</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3108</span> </span><span class="WHIT">	</span><span class="COMM">/**The choice to display the about ('Powered by...') element
<span class='line'>3109</span> 	 * @default true
<span class='line'>3110</span> 	 * @type Boolean
<span class='line'>3111</span> 	 */</span><span class="WHIT">
<span class='line'>3112</span> </span><span class="WHIT">	</span><span class="NAME">showAboutElement</span><span class="PUNC">:</span><span class="WHIT">          </span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3113</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3114</span> </span><span class="WHIT">	</span><span class="COMM">/** Optional - Restricts transfer of data to specifically listed devices ONLY.  This is an array list of 
<span class='line'>3115</span> 	 * device part numbers, which can be found in the GarminDevice.XML.  
<span class='line'>3116</span> 	 * @example ["006-B1018-00"] // Forerunner 310 only
<span class='line'>3117</span> 	 * @type Array
<span class='line'>3118</span> 	 */</span><span class="WHIT">
<span class='line'>3119</span> </span><span class="WHIT">	</span><span class="NAME">restrictByDevice</span><span class="PUNC">:</span><span class="WHIT">			</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3120</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3121</span> </span><span class="WHIT">	</span><span class="COMM">/** Sets the required version of the Communicator Plugin that is compatible with the given application.
<span class='line'>3122</span> 	 * This value is set using an array of the major and minor build numbers.	 * 
<span class='line'>3123</span> 	 * @example version 2.2.0.1 is given by [2,2,0,1].
<span class='line'>3124</span> 	 * @default [2,2,0,1] (for version 2.2.0.1)
<span class='line'>3125</span> 	 * @type Array
<span class='line'>3126</span> 	 */</span><span class="WHIT">
<span class='line'>3127</span> </span><span class="WHIT">	</span><span class="NAME">pluginRequiredVersion</span><span class="PUNC">:</span><span class="WHIT">			</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">,</span><span class="NUMB">2</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">,</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3128</span> 
<span class='line'>3129</span> </span><span class="WHIT">	</span><span class="COMM">/** Sets the latest plugin version number.  This represents the latest version available for download at Garmin.
<span class='line'>3130</span> 	 * We will attempt to keep the default value of this up to date with each API release, but this is not guaranteed,
<span class='line'>3131</span> 	 * so set this to be safe or if you don't want to upgrade to the latest API.
<span class='line'>3132</span> 	 * 
<span class='line'>3133</span> 	 * @param reqVersionArray Array  The latest version to set to.  In the format [versionMajor, versionMinor, buildMajor, buildMinor]
<span class='line'>3134</span> 	 * 			i.e. [2,2,0,1]
<span class='line'>3135</span> 	 * @default [2,5,1,0] (for version 2.5.1.0)
<span class='line'>3136</span> 	 * @type Array
<span class='line'>3137</span> 	 */</span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3138</span> </span><span class="WHIT">	</span><span class="NAME">pluginLatestVersion</span><span class="PUNC">:</span><span class="WHIT">			</span><span class="PUNC">[</span><span class="NUMB">2</span><span class="PUNC">,</span><span class="NUMB">5</span><span class="PUNC">,</span><span class="NUMB">2</span><span class="PUNC">,</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3139</span> 
<span class='line'>3140</span> </span><span class="WHIT">	</span><span class="COMM">// ================== Status Element Options ======================</span><span class="WHIT">
<span class='line'>3141</span> </span><span class="WHIT">	</span><span class="COMM">/**The choice to display the feedback regarding the communications 
<span class='line'>3142</span> 	 * with the device.
<span class='line'>3143</span> 	 *
<span class='line'>3144</span> 	 * @default true 
<span class='line'>3145</span> 	 * @type Boolean
<span class='line'>3146</span> 	 */</span><span class="WHIT">
<span class='line'>3147</span> </span><span class="WHIT">	</span><span class="NAME">showStatusElement</span><span class="PUNC">:</span><span class="WHIT">			</span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3148</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3149</span> </span><span class="WHIT">	</span><span class="COMM">/** The choice to display more detailed status when transferring data to and from device.
<span class='line'>3150</span> 	 * @default false
<span class='line'>3151</span> 	 * @type Boolean
<span class='line'>3152</span> 	 */</span><span class="WHIT">
<span class='line'>3153</span> </span><span class="WHIT">	</span><span class="NAME">showDetailedStatus</span><span class="PUNC">:</span><span class="WHIT">		</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3154</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3155</span> </span><span class="WHIT">	</span><span class="COMM">/**The id of the HTML element where the statusBox is to be rendered.
<span class='line'>3156</span> 	 * @type String
<span class='line'>3157</span> 	 * @default "statusBox"
<span class='line'>3158</span> 	 */</span><span class="WHIT">
<span class='line'>3159</span> </span><span class="WHIT">	</span><span class="NAME">statusElementId</span><span class="PUNC">:</span><span class="WHIT">			</span><span class="STRN">"statusBox"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3160</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3161</span> </span><span class="WHIT">	</span><span class="COMM">/**The id of the HTML element where the status text messages are to be displayed.
<span class='line'>3162</span> 	 * @default "statusText"
<span class='line'>3163</span> 	 * @type String
<span class='line'>3164</span> 	 */</span><span class="WHIT">
<span class='line'>3165</span> </span><span class="WHIT">	</span><span class="NAME">statusTextId</span><span class="PUNC">:</span><span class="WHIT">				</span><span class="STRN">"statusText"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3166</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3167</span> </span><span class="WHIT">	</span><span class="COMM">/**The progress bar is a graphical percentage bar used to display 
<span class='line'>3168</span> 	 * the amount of reading/writing is complete.
<span class='line'>3169</span> 	 * @default true
<span class='line'>3170</span> 	 * @type Boolean 
<span class='line'>3171</span> 	 */</span><span class="WHIT">
<span class='line'>3172</span> </span><span class="WHIT">	</span><span class="NAME">showProgressBar</span><span class="PUNC">:</span><span class="WHIT">			</span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3173</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3174</span> </span><span class="WHIT">	</span><span class="COMM">/** The id of the HTML element where the progress status text is to be displayed.  
<span class='line'>3175</span> 	 * This element will be a child of the statusText element.
<span class='line'>3176</span> 	 * @default "progressText"
<span class='line'>3177</span> 	 * @type String 
<span class='line'>3178</span> 	 */</span><span class="WHIT">
<span class='line'>3179</span> </span><span class="WHIT">	</span><span class="NAME">progressTextId</span><span class="PUNC">:</span><span class="WHIT">             </span><span class="STRN">"progressText"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3180</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3181</span> </span><span class="WHIT">	</span><span class="COMM">/** The class name for the progress status text.  
<span class='line'>3182</span> 	 * This element will be a child of the statusText element.
<span class='line'>3183</span> 	 * @type String  
<span class='line'>3184</span> 	 */</span><span class="WHIT">
<span class='line'>3185</span> </span><span class="WHIT">	</span><span class="NAME">progressTextClass</span><span class="PUNC">:</span><span class="WHIT">          </span><span class="STRN">"progressTextClass"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3186</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3187</span> </span><span class="WHIT">	</span><span class="COMM">/**The class name for the progress bar container element.
<span class='line'>3188</span> 	 * @default 'progressBarClass'
<span class='line'>3189</span> 	 * @type String 
<span class='line'>3190</span> 	 */</span><span class="WHIT">
<span class='line'>3191</span> </span><span class="WHIT">	</span><span class="NAME">progressBarClass</span><span class="PUNC">:</span><span class="WHIT">           </span><span class="STRN">"progressBarClass"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3192</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3193</span> </span><span class="WHIT">	</span><span class="COMM">/** The background of the progress bar.  This stays static during transfer.
<span class='line'>3194</span> 	 * @default 'progressBarBackClass'
<span class='line'>3195</span> 	 * @type String
<span class='line'>3196</span> 	 */</span><span class="WHIT">
<span class='line'>3197</span> </span><span class="WHIT">	</span><span class="NAME">progressBarBackClass</span><span class="PUNC">:</span><span class="WHIT">       </span><span class="STRN">"progressBarBackClass"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3198</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3199</span> </span><span class="WHIT">	</span><span class="COMM">/** The class name for the dynamic progress bar that is overlaid
<span class='line'>3200</span> 	 * on top of the progressBar element.  This controls
<span class='line'>3201</span> 	 * the part that 'moves'.
<span class='line'>3202</span> 	 * @default 'progressBarDisplayClass'
<span class='line'>3203</span> 	 * @type String 
<span class='line'>3204</span> 	 */</span><span class="WHIT">
<span class='line'>3205</span> </span><span class="WHIT">	</span><span class="NAME">progressBarDisplayClass</span><span class="PUNC">:</span><span class="WHIT">    </span><span class="STRN">"progressBarDisplayClass"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3206</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3207</span> </span><span class="WHIT">	</span><span class="COMM">/**The container for the progress bar.
<span class='line'>3208</span> 	 * @default 'progressBar'
<span class='line'>3209</span> 	 * @type String 
<span class='line'>3210</span> 	 */</span><span class="WHIT">
<span class='line'>3211</span> </span><span class="WHIT">	</span><span class="NAME">progressBarId</span><span class="PUNC">:</span><span class="WHIT">				</span><span class="STRN">"progressBar"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3212</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3213</span> </span><span class="WHIT">	</span><span class="COMM">/** The background of the progress bar.  This stays static during transfer.
<span class='line'>3214</span> 	 * @default 'progressBarBack'
<span class='line'>3215</span> 	 * @type String 
<span class='line'>3216</span> 	 */</span><span class="WHIT">
<span class='line'>3217</span> </span><span class="WHIT">	</span><span class="NAME">progressBarBackId</span><span class="PUNC">:</span><span class="WHIT">          </span><span class="STRN">"progressBarBack"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3218</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3219</span> </span><span class="WHIT">	</span><span class="COMM">/**The id of the displayed progress element.  This is dynamic during transfer.
<span class='line'>3220</span> 	 * @default 'progressBarDisplay'
<span class='line'>3221</span> 	 * @type String 
<span class='line'>3222</span> 	 */</span><span class="WHIT">
<span class='line'>3223</span> </span><span class="WHIT">	</span><span class="NAME">progressBarDisplayId</span><span class="PUNC">:</span><span class="WHIT">		</span><span class="STRN">"progressBarDisplay"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3224</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3225</span> </span><span class="WHIT">	</span><span class="COMM">/** The class name for the progress bar text.  
<span class='line'>3226</span> 	 * @default progressBarTextClass 
<span class='line'>3227</span> 	 * @type String 
<span class='line'>3228</span> 	 */</span><span class="WHIT">
<span class='line'>3229</span> </span><span class="WHIT">	</span><span class="NAME">progressBarTextClass</span><span class="PUNC">:</span><span class="WHIT">      </span><span class="STRN">"progressBarTextClass"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3230</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3231</span> </span><span class="WHIT">	</span><span class="COMM">/** The id of the progress bar text.  This is generally the percentage
<span class='line'>3232</span> 	 * value text displayed, but could also be in the context of what is being transferred
<span class='line'>3233</span> 	 * (i.e. 1 of 5 activities).
<span class='line'>3234</span> 	 * @default progressBarText
<span class='line'>3235</span> 	 * @type String 
<span class='line'>3236</span> 	 */</span><span class="WHIT">
<span class='line'>3237</span> </span><span class="WHIT">	</span><span class="NAME">progressBarTextId</span><span class="PUNC">:</span><span class="WHIT">          </span><span class="STRN">"progressBarText"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3238</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3239</span> </span><span class="WHIT">	</span><span class="COMM">// Upload Progress bar</span><span class="WHIT">
<span class='line'>3240</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3241</span> </span><span class="WHIT">	</span><span class="COMM">/** The id of the HTML element where the upload progress status text is to be displayed.  
<span class='line'>3242</span> 	 * This element will be a child of the statusText element.
<span class='line'>3243</span> 	 * @type String
<span class='line'>3244</span> 	 * @default "uploadProgressText"
<span class='line'>3245</span> 	 */</span><span class="WHIT">
<span class='line'>3246</span> </span><span class="WHIT">	</span><span class="NAME">uploadProgressTextId</span><span class="PUNC">:</span><span class="WHIT">             </span><span class="STRN">"uploadProgressText"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3247</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3248</span> </span><span class="WHIT">	</span><span class="COMM">/** The class name for the uploadProgress status text.  
<span class='line'>3249</span> 	 * This element will be a child of the statusText element.
<span class='line'>3250</span> 	 * @type String
<span class='line'>3251</span> 	 * @default "uploadProgressTextClass"
<span class='line'>3252</span> 	 */</span><span class="WHIT">
<span class='line'>3253</span> </span><span class="WHIT">	</span><span class="NAME">uploadProgressTextClass</span><span class="PUNC">:</span><span class="WHIT">          </span><span class="STRN">"uploadProgressTextClass"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3254</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3255</span> </span><span class="WHIT">	</span><span class="COMM">/**The class name for the uploadProgress bar container element.
<span class='line'>3256</span> 	 * @default 'uploadProgressBarClass'
<span class='line'>3257</span> 	 * @type String 
<span class='line'>3258</span> 	 */</span><span class="WHIT">
<span class='line'>3259</span> </span><span class="WHIT">	</span><span class="NAME">uploadProgressBarClass</span><span class="PUNC">:</span><span class="WHIT">           </span><span class="STRN">"uploadProgressBarClass"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3260</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3261</span> </span><span class="WHIT">	</span><span class="COMM">/** The background of the uploadProgress bar.  This stays static during transfer.
<span class='line'>3262</span> 	 * @default 'uploadProgressBarBackClass'
<span class='line'>3263</span> 	 * @type String
<span class='line'>3264</span> 	 */</span><span class="WHIT">
<span class='line'>3265</span> </span><span class="WHIT">	</span><span class="NAME">uploadProgressBarBackClass</span><span class="PUNC">:</span><span class="WHIT">       </span><span class="STRN">"uploadProgressBarBackClass"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3266</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3267</span> </span><span class="WHIT">	</span><span class="COMM">/** The class name for the dynamic uploadProgress bar that is overlaid
<span class='line'>3268</span> 	 * on top of the uploadProgressBar element.  This controls
<span class='line'>3269</span> 	 * the part that 'moves'.
<span class='line'>3270</span> 	 * @default 'uploadProgressBarDisplayClass'
<span class='line'>3271</span> 	 * @type String 
<span class='line'>3272</span> 	 */</span><span class="WHIT">
<span class='line'>3273</span> </span><span class="WHIT">	</span><span class="NAME">uploadProgressBarDisplayClass</span><span class="PUNC">:</span><span class="WHIT">    </span><span class="STRN">"uploadProgressBarDisplayClass"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3274</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3275</span> </span><span class="WHIT">	</span><span class="COMM">/**The container for the uploadProgress bar.
<span class='line'>3276</span> 	 * @default 'uploadProgressBar'
<span class='line'>3277</span> 	 * @type String 
<span class='line'>3278</span> 	 */</span><span class="WHIT">
<span class='line'>3279</span> </span><span class="WHIT">	</span><span class="NAME">uploadProgressBarId</span><span class="PUNC">:</span><span class="WHIT">				</span><span class="STRN">"uploadProgressBar"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3280</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3281</span> </span><span class="WHIT">	</span><span class="COMM">/** The background of the uploadProgress bar.  This stays static during transfer.
<span class='line'>3282</span> 	 * @default 'uploadProgressBarBack'
<span class='line'>3283</span> 	 * @type String 
<span class='line'>3284</span> 	 */</span><span class="WHIT">
<span class='line'>3285</span> </span><span class="WHIT">	</span><span class="NAME">uploadProgressBarBackId</span><span class="PUNC">:</span><span class="WHIT">          </span><span class="STRN">"uploadProgressBarBack"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3286</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3287</span> </span><span class="WHIT">	</span><span class="COMM">/**The id of the displayed uploadProgress element.  This is dynamic during transfer.
<span class='line'>3288</span> 	 * @default 'uploadProgressBarDisplay'
<span class='line'>3289</span> 	 * @type String 
<span class='line'>3290</span> 	 */</span><span class="WHIT">
<span class='line'>3291</span> </span><span class="WHIT">	</span><span class="NAME">uploadProgressBarDisplayId</span><span class="PUNC">:</span><span class="WHIT">		</span><span class="STRN">"uploadProgressBarDisplay"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3292</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3293</span> </span><span class="WHIT">	</span><span class="COMM">/** The class name for the uploadProgress bar text.  
<span class='line'>3294</span> 	 * @default uploadProgressBarTextClass 
<span class='line'>3295</span> 	 * @type String 
<span class='line'>3296</span> 	 */</span><span class="WHIT">
<span class='line'>3297</span> </span><span class="WHIT">	</span><span class="NAME">uploadProgressBarTextClass</span><span class="PUNC">:</span><span class="WHIT">      </span><span class="STRN">"uploadProgressBarTextClass"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3298</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3299</span> </span><span class="WHIT">	</span><span class="COMM">/** The id of the uploadProgress bar text.  This is generally the percentage
<span class='line'>3300</span> 	 * value text displayed, but could also be in the context of what is being transferred
<span class='line'>3301</span> 	 * (i.e. 1 of 5 activities).
<span class='line'>3302</span> 	 * @default uploadProgressBarText
<span class='line'>3303</span> 	 * @type String
<span class='line'>3304</span> 	 */</span><span class="WHIT">
<span class='line'>3305</span> </span><span class="WHIT">	</span><span class="NAME">uploadProgressBarTextId</span><span class="PUNC">:</span><span class="WHIT">          </span><span class="STRN">"uploadProgressBarText"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3306</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3307</span> </span><span class="WHIT">	</span><span class="COMM">/** The text to display above the upload progress bar.  This is a static string.
<span class='line'>3308</span> 	 * @default "Uploading activities..."
<span class='line'>3309</span> 	 * @type String
<span class='line'>3310</span> 	 */</span><span class="WHIT">
<span class='line'>3311</span> </span><span class="WHIT">	</span><span class="NAME">uploadingStatusText</span><span class="PUNC">:</span><span class="WHIT">                 </span><span class="STRN">"Uploading activities..."</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3312</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3313</span> </span><span class="WHIT">	</span><span class="COMM">/** Templated string used to display the upload progress status.
<span class='line'>3314</span> 	 * The template parameters currentUpload and totalUploads must be included
<span class='line'>3315</span> 	 * to work properly, as the default value does.
<span class='line'>3316</span>      * 
<span class='line'>3317</span>      * @default #{currentUpload} of #{totalUploads} completed.
<span class='line'>3318</span>      * @type String
<span class='line'>3319</span>      */</span><span class="WHIT">
<span class='line'>3320</span> </span><span class="WHIT">    </span><span class="NAME">uploadProgressStatusText</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'#{currentUpload} of #{totalUploads} completed.'</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3321</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3322</span> </span><span class="WHIT">	</span><span class="COMM">//===================  Find Devices Element Options ===============</span><span class="WHIT">
<span class='line'>3323</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3324</span> </span><span class="WHIT">	</span><span class="COMM">/**Choice to display the find devices area that will search for connected devices.
<span class='line'>3325</span> 	 * @type Boolean
<span class='line'>3326</span> 	 * @default true
<span class='line'>3327</span> 	 */</span><span class="WHIT">
<span class='line'>3328</span> </span><span class="WHIT">	</span><span class="NAME">showFindDevicesElement</span><span class="PUNC">:</span><span class="WHIT">		</span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3329</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3330</span> </span><span class="WHIT">	</span><span class="COMM">/**Choice to display the find devices area that will search for connected devices when the page loads.
<span class='line'>3331</span> 	 * @type Boolean
<span class='line'>3332</span> 	 * @default true
<span class='line'>3333</span> 	 */</span><span class="WHIT">
<span class='line'>3334</span> </span><span class="WHIT">	</span><span class="NAME">showFindDevicesElementOnLoad</span><span class="PUNC">:</span><span class="WHIT">	</span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3335</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3336</span> </span><span class="WHIT">    </span><span class="COMM">/**Looks for devices as soon as the page is loaded and the plugin unlocked.
<span class='line'>3337</span>      * This might be particularly annoying in many situations since the plugin 
<span class='line'>3338</span>      * requires the user to authorize access to device information via a 
<span class='line'>3339</span>      * dialog box.
<span class='line'>3340</span> 	 * @type Boolean
<span class='line'>3341</span> 	 * @default false
<span class='line'>3342</span>      */</span><span class="WHIT">
<span class='line'>3343</span> </span><span class="WHIT">	</span><span class="NAME">autoFindDevices</span><span class="PUNC">:</span><span class="WHIT">			</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3344</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3345</span> </span><span class="WHIT">	</span><span class="COMM">/**Controls the view of the buttons related to find devices (find & cancel) if 
<span class='line'>3346</span> 	 * based on if the plugin finds one or more devices.  
<span class='line'>3347</span> 	 * When set to &lt;b>false&lt;/b> and  
<span class='line'>3348</span> 	 * used with {@link showDeviceButtonsOnLoad} =false 
<span class='line'>3349</span> 	 * and {@link autoFindDevices} =true these buttons will only
<span class='line'>3350</span> 	 * show up if a device is not found (minimizing confusion for the user).
<span class='line'>3351</span> 	 * &lt;p>
<span class='line'>3352</span> 	 * More granular control is provided on each of the device buttons 
<span class='line'>3353</span> 	 * {@link showFindDevicesButton}  and {@link showCancelFindDevicesButton} .
<span class='line'>3354</span> 	 * &lt;/p>
<span class='line'>3355</span> 	 * @see Garmin.DeviceDisplayDefaultOptions.showFindDevicesElement
<span class='line'>3356</span> 	 * @type Boolean
<span class='line'>3357</span> 	 * @default true
<span class='line'>3358</span> 	 */</span><span class="WHIT">
<span class='line'>3359</span> </span><span class="WHIT">	</span><span class="NAME">showDeviceButtonsOnFound</span><span class="PUNC">:</span><span class="WHIT">	</span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3360</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3361</span> </span><span class="WHIT">	</span><span class="COMM">/**If true the buttons will show when the page is rendered. 
<span class='line'>3362</span> 	 * If false, the buttons will not be displayed until the plugin detects that a device is not found. 
<span class='line'>3363</span> 	 * If you choose not to see the buttons at all (regardless if device is found or not) then 
<span class='line'>3364</span> 	 * {@link showFindDevicesElement}  should be set to false.
<span class='line'>3365</span> 	 * 
<span class='line'>3366</span> 	 * @see Garmin.DeviceDisplayDefaultOptions.showDeviceButtonsOnFound
<span class='line'>3367</span> 	 * @see Garmin.DeviceDisplayDefaultOptions.showFindDevicesElement
<span class='line'>3368</span> 	 * @type Boolean
<span class='line'>3369</span> 	 * @default true 
<span class='line'>3370</span> 	 */</span><span class="WHIT">
<span class='line'>3371</span> </span><span class="WHIT">	</span><span class="NAME">showDeviceButtonsOnLoad</span><span class="PUNC">:</span><span class="WHIT">	</span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3372</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3373</span> </span><span class="WHIT">	</span><span class="COMM">/**Allows granular control to hide the find devices button independent
<span class='line'>3374</span> 	 * of the {@link showCancelFindDevicesButton}  cancel button contol.
<span class='line'>3375</span> 	 * @type Boolean 
<span class='line'>3376</span> 	 * @default true
<span class='line'>3377</span> 	 */</span><span class="WHIT">
<span class='line'>3378</span> </span><span class="WHIT">	</span><span class="NAME">showFindDevicesButton</span><span class="PUNC">:</span><span class="WHIT">		</span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3379</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3380</span> </span><span class="WHIT">	</span><span class="COMM">/**The id referencing the HTML container around the find devices buttons.
<span class='line'>3381</span> 	 * This is useful for CSS customizations. 
<span class='line'>3382</span> 	 * &lt;p>
<span class='line'>3383</span> 	 * @default deviceBox
<span class='line'>3384</span> 	 * &lt;/p>
<span class='line'>3385</span> 	 * @type String 
<span class='line'>3386</span> 	 * @default "deviceBox"
<span class='line'>3387</span> 	 */</span><span class="WHIT">
<span class='line'>3388</span> </span><span class="WHIT">	</span><span class="NAME">findDevicesElementId</span><span class="PUNC">:</span><span class="WHIT">		</span><span class="STRN">"deviceBox"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3389</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3390</span> </span><span class="WHIT">	</span><span class="COMM">/**The id referencing the find devices button.  This is useful for
<span class='line'>3391</span> 	 * CSS customizations.
<span class='line'>3392</span> 	 * 
<span class='line'>3393</span> 	 * @type String 
<span class='line'>3394</span> 	 * @default findDevicesButton
<span class='line'>3395</span> 	 */</span><span class="WHIT">
<span class='line'>3396</span> </span><span class="WHIT">	</span><span class="NAME">findDevicesButtonId</span><span class="PUNC">:</span><span class="WHIT">		</span><span class="STRN">"findDevicesButton"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3397</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3398</span> </span><span class="WHIT">	</span><span class="COMM">/**The text for the find device button.
<span class='line'>3399</span> 	 * @type String
<span class='line'>3400</span> 	 * @default "Find Devices" 
<span class='line'>3401</span> 	 */</span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>3402</span> </span><span class="WHIT">	</span><span class="NAME">findDevicesButtonText</span><span class="PUNC">:</span><span class="WHIT">			</span><span class="STRN">"Find Devices"</span><span class="PUNC">,</span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3403</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3404</span> </span><span class="WHIT">	</span><span class="COMM">/**Controls the view of the cancel find devices button. When
<span class='line'>3405</span> 	 * set to &lt;b>false&lt;/b> the button will never show.  When
<span class='line'>3406</span> 	 * set to &lt;b>true&lt;/b> the button's behavior will depend on other
<span class='line'>3407</span> 	 * settings such as {@link showFindDevicesButton} , 
<span class='line'>3408</span> 	 * {@link showDeviceButtonsOnFound} , {@link showDeviceButtonsOnLoad} ,
<span class='line'>3409</span> 	 * and {@link showFindDevicesElement} .
<span class='line'>3410</span> 	 * @default false
<span class='line'>3411</span> 	 * @type Boolean 
<span class='line'>3412</span> 	 */</span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3413</span> </span><span class="WHIT">	</span><span class="NAME">showCancelFindDevicesButton</span><span class="PUNC">:</span><span class="WHIT">		</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3414</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3415</span> </span><span class="WHIT">	</span><span class="COMM">/**The id referencing the cancel find devices button.  This is useful for
<span class='line'>3416</span> 	 * CSS customizations.
<span class='line'>3417</span> 	 * @default cancelFindDevicesButton
<span class='line'>3418</span> 	 * @type String 
<span class='line'>3419</span> 	 */</span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3420</span> </span><span class="WHIT">	</span><span class="NAME">cancelFindDevicesButtonId</span><span class="PUNC">:</span><span class="WHIT">	</span><span class="STRN">"cancelFindDevicesButton"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3421</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3422</span> </span><span class="WHIT">	</span><span class="COMM">/**The text for the cancel find device button.
<span class='line'>3423</span> 	 * @type String 
<span class='line'>3424</span> 	 * @default "Cancel Find Devices"
<span class='line'>3425</span> 	 */</span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>3426</span> </span><span class="WHIT">	</span><span class="NAME">cancelFindDevicesButtonText</span><span class="PUNC">:</span><span class="WHIT">		</span><span class="STRN">"Cancel Find Devices"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3427</span> 
<span class='line'>3428</span> </span><span class="WHIT">	</span><span class="COMM">/**Controls the view of the device select box.
<span class='line'>3429</span> 	 * When set to &lt;b>true&lt;/b> the select device box will show even when only
<span class='line'>3430</span> 	 * one device is found.
<span class='line'>3431</span> 	 * When set to &lt;b>false&lt;/b> the select device box will hide when only
<span class='line'>3432</span> 	 * one device is found.
<span class='line'>3433</span> 	 * When {@link showFindDevicesElement}  is set to false, the device select
<span class='line'>3434</span> 	 * box will never show.
<span class='line'>3435</span> 	 * @default false
<span class='line'>3436</span> 	 * @see Garmin.DeviceDisplayDefaultOptions.showDeviceSelectNoDevice
<span class='line'>3437</span> 	 * @see Garmin.DeviceDisplayDefaultOptions.showDeviceSelectOnLoad	  	 
<span class='line'>3438</span> 	 * @see Garmin.DeviceDisplayDefaultOptions.showFindDevicesElement	 
<span class='line'>3439</span> 	 * @type Boolean 
<span class='line'>3440</span> 	 */</span><span class="WHIT">
<span class='line'>3441</span> </span><span class="WHIT">	</span><span class="NAME">showDeviceSelectOnSingle</span><span class="PUNC">:</span><span class="WHIT">	</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3442</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3443</span> </span><span class="WHIT">	</span><span class="COMM">/**Controls the view of the device select box.
<span class='line'>3444</span> 	 * When set to &lt;b>true&lt;/b> the select device box will show even when
<span class='line'>3445</span> 	 * no device is found.
<span class='line'>3446</span> 	 * When set to &lt;b>false&lt;/b> the select device box will hide when
<span class='line'>3447</span> 	 * no device is found.
<span class='line'>3448</span> 	 * When {@link showFindDevicesElement}  is set to false, the device select
<span class='line'>3449</span> 	 * box will never show.
<span class='line'>3450</span> 	 * 
<span class='line'>3451</span> 	 * @default true
<span class='line'>3452</span> 	 * 
<span class='line'>3453</span> 	 * @see Garmin.DeviceDisplayDefaultOptions.showDeviceSelectOnSingle
<span class='line'>3454</span> 	 * @see Garmin.DeviceDisplayDefaultOptions.showDeviceSelectOnLoad	  
<span class='line'>3455</span> 	 * @see Garmin.DeviceDisplayDefaultOptions.showFindDevicesElement	 
<span class='line'>3456</span> 	 * @type Boolean 
<span class='line'>3457</span> 	 */</span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3458</span> </span><span class="WHIT">	</span><span class="NAME">showDeviceSelectNoDevice</span><span class="PUNC">:</span><span class="WHIT">	</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3459</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3460</span> </span><span class="WHIT">	</span><span class="COMM">/**Controls the view of the device select box.
<span class='line'>3461</span> 	 * When set to &lt;b>true&lt;/b> the select device box will show when
<span class='line'>3462</span> 	 * the display loads.
<span class='line'>3463</span> 	 * When set to &lt;b>false&lt;/b> the select device box will never be visible.
<span class='line'>3464</span> 	 * When {@link showFindDevicesElement}  is set to false, the device select
<span class='line'>3465</span> 	 * box will never show.
<span class='line'>3466</span> 	 * 
<span class='line'>3467</span> 	 * @default true
<span class='line'>3468</span> 	 * 
<span class='line'>3469</span> 	 * @see Garmin.DeviceDisplayDefaultOptions.showDeviceSelectOnSingle
<span class='line'>3470</span> 	 * @see Garmin.DeviceDisplayDefaultOptions.showDeviceSelectNoDevice	  
<span class='line'>3471</span> 	 * @see Garmin.DeviceDisplayDefaultOptions.showFindDevicesElement	 
<span class='line'>3472</span> 	 * @type Boolean 
<span class='line'>3473</span> 	 */</span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>3474</span> </span><span class="WHIT">	</span><span class="NAME">showDeviceSelectOnLoad</span><span class="PUNC">:</span><span class="WHIT">		</span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3475</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3476</span> </span><span class="WHIT">	</span><span class="COMM">/**When more than one device is detected automaticly pick the first device.
<span class='line'>3477</span> 	 * This allows single button interfaces to avoid having to ask the user to 
<span class='line'>3478</span> 	 * choose the device and keeps the deviceSelect hidden.
<span class='line'>3479</span> 	 * 
<span class='line'>3480</span> 	 * @default false
<span class='line'>3481</span> 	 * 
<span class='line'>3482</span> 	 * @see Garmin.DeviceDisplayDefaultOptions.showDeviceSelectOnSingle
<span class='line'>3483</span> 	 * @see Garmin.DeviceDisplayDefaultOptions.showDeviceSelectNoDevice	  
<span class='line'>3484</span> 	 * @see Garmin.DeviceDisplayDefaultOptions.showFindDevicesElement	 
<span class='line'>3485</span> 	 * @type Boolean
<span class='line'>3486</span> 	 */</span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>3487</span> </span><span class="WHIT">	</span><span class="NAME">autoSelectFirstDevice</span><span class="PUNC">:</span><span class="WHIT">		</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3488</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3489</span> </span><span class="WHIT">	</span><span class="COMM">//===================  Upload UI Options ===============</span><span class="WHIT">
<span class='line'>3490</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3491</span> </span><span class="WHIT">	</span><span class="COMM">/**The id referencing the device select box.  This is useful for
<span class='line'>3492</span> 	 * CSS customizations.
<span class='line'>3493</span> 	 * 
<span class='line'>3494</span> 	 * @default deviceSelectBox
<span class='line'>3495</span> 	 * @type String 
<span class='line'>3496</span> 	 */</span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>3497</span> </span><span class="WHIT">	</span><span class="NAME">deviceSelectElementId</span><span class="PUNC">:</span><span class="WHIT">		</span><span class="STRN">"deviceSelectBox"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3498</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3499</span> </span><span class="WHIT">	</span><span class="COMM">/**The label for the device select box.  Shows up next to the
<span class='line'>3500</span> 	 * device select box.
<span class='line'>3501</span> 	 * @type String 
<span class='line'>3502</span> 	 * @default "Devices: "
<span class='line'>3503</span> 	 */</span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>3504</span> </span><span class="WHIT">	</span><span class="NAME">deviceSelectLabel</span><span class="PUNC">:</span><span class="WHIT">			</span><span class="STRN">"Devices: "</span><span class="PUNC">,</span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3505</span> 
<span class='line'>3506</span> </span><span class="WHIT">	</span><span class="COMM">/**The id referencing the device select box label.  This is useful for
<span class='line'>3507</span> 	 * CSS customizations.
<span class='line'>3508</span> 	 * 
<span class='line'>3509</span> 	 * @default deviceSelectLabel
<span class='line'>3510</span> 	 * @type String 
<span class='line'>3511</span> 	 */</span><span class="WHIT">			</span><span class="WHIT">
<span class='line'>3512</span> </span><span class="WHIT">	</span><span class="NAME">deviceSelectLabelId</span><span class="PUNC">:</span><span class="WHIT">		</span><span class="STRN">"deviceSelectLabel"</span><span class="PUNC">,</span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3513</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3514</span> </span><span class="WHIT">	</span><span class="COMM">/** The class name referencing the device select element.  This is useful for CSS customizations.
<span class='line'>3515</span> 	 * 
<span class='line'>3516</span> 	 * @default deviceSelectClass
<span class='line'>3517</span> 	 * @type String
<span class='line'>3518</span> 	 */</span><span class="WHIT">
<span class='line'>3519</span> </span><span class="WHIT">	</span><span class="NAME">deviceSelectClass</span><span class="PUNC">:</span><span class="WHIT">          </span><span class="STRN">"deviceSelectClass"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3520</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3521</span> </span><span class="WHIT">	</span><span class="COMM">/**The id referencing the device select element.  This is useful for
<span class='line'>3522</span> 	 * CSS customizations.
<span class='line'>3523</span> 	 * 
<span class='line'>3524</span> 	 * @default deviceSelect
<span class='line'>3525</span> 	 * @type String 
<span class='line'>3526</span> 	 */</span><span class="WHIT">			</span><span class="WHIT">
<span class='line'>3527</span> </span><span class="WHIT">	</span><span class="NAME">deviceSelectId</span><span class="PUNC">:</span><span class="WHIT">				</span><span class="STRN">"deviceSelect"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3528</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3529</span> </span><span class="WHIT">	</span><span class="COMM">/**The id referencing the element that displays what device was selected.  This is useful for CSS customizations.
<span class='line'>3530</span> 	 *
<span class='line'>3531</span> 	 * @default deviceSelected
<span class='line'>3532</span> 	 * @type String 
<span class='line'>3533</span> 	 */</span><span class="WHIT">
<span class='line'>3534</span> </span><span class="WHIT">	</span><span class="NAME">deviceSelectedElementId</span><span class="PUNC">:</span><span class="WHIT">	</span><span class="STRN">"deviceSelected"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3535</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3536</span> </span><span class="WHIT">	</span><span class="COMM">/**The label for the device selected element.  This label preceeds the device selected element.  This is useful for CSS customizations.
<span class='line'>3537</span> 	 *
<span class='line'>3538</span> 	 * @default "Previewing "
<span class='line'>3539</span> 	 * @type String 
<span class='line'>3540</span> 	 */</span><span class="WHIT">
<span class='line'>3541</span> </span><span class="WHIT">	</span><span class="NAME">deviceSelectedLabel</span><span class="PUNC">:</span><span class="WHIT">		</span><span class="STRN">"Previewing "</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3542</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3543</span> </span><span class="WHIT">	</span><span class="COMM">/**The id referencing the label for the element that displays what device was selected.  This is useful for CSS customizations.
<span class='line'>3544</span> 	 *
<span class='line'>3545</span> 	 * @default deviceSelectedLabel
<span class='line'>3546</span> 	 * @type String 
<span class='line'>3547</span> 	 */</span><span class="WHIT">
<span class='line'>3548</span> </span><span class="WHIT">	</span><span class="NAME">deviceSelectedLabelId</span><span class="PUNC">:</span><span class="WHIT">		</span><span class="STRN">"deviceSelectedLabel"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3549</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3550</span> </span><span class="WHIT">	</span><span class="COMM">/**The status text that is displayed when no devices are found.  The Find Devices button is 
<span class='line'>3551</span> 	 * displayed to allow the user to try again.  To change the button text, set findDevicesButtonText.
<span class='line'>3552</span> 	 * 
<span class='line'>3553</span> 	 * @type String 
<span class='line'>3554</span> 	 * @default "No devices found."
<span class='line'>3555</span> 	 */</span><span class="WHIT">			</span><span class="WHIT">
<span class='line'>3556</span> </span><span class="WHIT">	</span><span class="NAME">noDeviceDetectedStatusText</span><span class="PUNC">:</span><span class="WHIT">	</span><span class="STRN">"No devices found."</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3557</span> </span><span class="WHIT">	</span><span class="COMM">/**The status text that prepends itself to the device name when a single device is found.
<span class='line'>3558</span> 	 * 
<span class='line'>3559</span> 	 * @type String
<span class='line'>3560</span> 	 * @default "Found " 
<span class='line'>3561</span> 	 */</span><span class="WHIT">
<span class='line'>3562</span> </span><span class="WHIT">	</span><span class="NAME">singleDeviceDetectedStatusText</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"Found "</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3563</span> 
<span class='line'>3564</span> </span><span class="WHIT">    </span><span class="COMM">/**The function called when device search completes successfully or unsuccessfully.
<span class='line'>3565</span>      * The function should have two arguments:
<span class='line'>3566</span>      *  devices {Array&lt;Garmin.Device>}  - an array of device descriptors or an empty array in none were found.
<span class='line'>3567</span>      *  display {Garmin.DeviceDisplay}  - the current instance of the DeveiceDisplay
<span class='line'>3568</span> 	 * @example function(devices){...}
<span class='line'>3569</span> 	 * @type function 
<span class='line'>3570</span> 	 * @function
<span class='line'>3571</span> 	 */</span><span class="WHIT">				</span><span class="WHIT">
<span class='line'>3572</span> </span><span class="WHIT">	</span><span class="NAME">afterFinishFindDevices</span><span class="PUNC">:</span><span class="WHIT">	</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3573</span> 
<span class='line'>3574</span> </span><span class="WHIT">    </span><span class="COMM">/** The function called after all item uploads complete successfully or unsuccessfully.
<span class='line'>3575</span>      * The function will have one argument:
<span class='line'>3576</span>      * display {Garmin.DeviceDisplay - the current instance of the DeviceDisplay
<span class='line'>3577</span>      * @example
<span class='line'>3578</span>      * function(display) {...}
<span class='line'>3579</span>      * @type function
<span class='line'>3580</span>      * @function
<span class='line'>3581</span>      */</span><span class="WHIT">
<span class='line'>3582</span> </span><span class="WHIT">    </span><span class="NAME">afterFinishUploads</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3583</span> 
<span class='line'>3584</span> </span><span class="WHIT">	</span><span class="COMM">// ================== Read Element Options ======================</span><span class="WHIT">
<span class='line'>3585</span> </span><span class="WHIT">	</span><span class="COMM">/**Start reading data from the device when one or more device(s)
<span class='line'>3586</span> 	 * is found.
<span class='line'>3587</span> 	 * 
<span class='line'>3588</span> 	 * @default false
<span class='line'>3589</span> 	 * 
<span class='line'>3590</span> 	 * @see Garmin.DeviceDisplayDefaultOptions.autoFindDevices
<span class='line'>3591</span> 	 * @see Garmin.DeviceDisplayDefaultOptions.autoWriteData	  
<span class='line'>3592</span> 	 * @type Boolean 
<span class='line'>3593</span> 	 */</span><span class="WHIT">					</span><span class="WHIT">
<span class='line'>3594</span> </span><span class="WHIT">	</span><span class="NAME">autoReadData</span><span class="PUNC">:</span><span class="WHIT">				</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3595</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3596</span> </span><span class="WHIT">	</span><span class="COMM">/**Display the user interface associated with reading from
<span class='line'>3597</span> 	 * a connected device.
<span class='line'>3598</span> 	 * 
<span class='line'>3599</span> 	 * @default true
<span class='line'>3600</span> 	 * @type Boolean 
<span class='line'>3601</span> 	 */</span><span class="WHIT">
<span class='line'>3602</span> </span><span class="WHIT">	</span><span class="NAME">showReadDataElement</span><span class="PUNC">:</span><span class="WHIT">		</span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3603</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3604</span> </span><span class="WHIT">	</span><span class="COMM">/**Controls the view of the read data button. When
<span class='line'>3605</span> 	 * set to &lt;b>false&lt;/b> the button will never show.  When
<span class='line'>3606</span> 	 * set to &lt;b>true&lt;/b> the button's behavior will depend on other
<span class='line'>3607</span> 	 * settings such as {@link showReadDataElement} .
<span class='line'>3608</span> 	 * 
<span class='line'>3609</span> 	 * @default true
<span class='line'>3610</span> 	 * @type Boolean 
<span class='line'>3611</span> 	 */</span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3612</span> </span><span class="WHIT">	</span><span class="NAME">showReadDataButton</span><span class="PUNC">:</span><span class="WHIT">        </span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3613</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3614</span> </span><span class="WHIT">	</span><span class="COMM">/**Controls the view of the read data element. When
<span class='line'>3615</span> 	 * set to &lt;b>true&lt;/b> the element will only show after a
<span class='line'>3616</span> 	 * device has been found.  When set to &lt;b>false&lt;/b> the
<span class='line'>3617</span> 	 * element will show on page load.
<span class='line'>3618</span> 	 * Behavior will depend on other settings such as
<span class='line'>3619</span> 	 * and {@link showReadDataElement} .
<span class='line'>3620</span> 	 * 
<span class='line'>3621</span> 	 * @default false
<span class='line'>3622</span> 	 * @type Boolean 
<span class='line'>3623</span> 	 */</span><span class="WHIT">
<span class='line'>3624</span> </span><span class="WHIT">	</span><span class="NAME">showReadDataElementOnDeviceFound</span><span class="PUNC">:</span><span class="WHIT">		</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3625</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3626</span> </span><span class="WHIT">	</span><span class="COMM">/**The id referencing the box containing read elements.  This is 
<span class='line'>3627</span> 	 * useful for CSS customizations.
<span class='line'>3628</span> 	 * 
<span class='line'>3629</span> 	 * @default readBox
<span class='line'>3630</span> 	 * @type String 
<span class='line'>3631</span> 	 */</span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>3632</span> </span><span class="WHIT">	</span><span class="NAME">readDataElementId</span><span class="PUNC">:</span><span class="WHIT">			</span><span class="STRN">"readBox"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3633</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3634</span> </span><span class="WHIT">	</span><span class="COMM">/**The id referencing the read data button.  This is useful for
<span class='line'>3635</span> 	 * CSS customizations.
<span class='line'>3636</span> 	 * 
<span class='line'>3637</span> 	 * @default readDataButton
<span class='line'>3638</span> 	 * @type String 
<span class='line'>3639</span> 	 */</span><span class="WHIT">			</span><span class="WHIT">
<span class='line'>3640</span> </span><span class="WHIT">	</span><span class="NAME">readDataButtonId</span><span class="PUNC">:</span><span class="WHIT">			</span><span class="STRN">"readDataButton"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3641</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3642</span> </span><span class="WHIT">	</span><span class="COMM">/**The text on the read button.
<span class='line'>3643</span> 	 * 
<span class='line'>3644</span> 	 * @type String
<span class='line'>3645</span> 	 */</span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>3646</span> </span><span class="WHIT">	</span><span class="NAME">readDataButtonText</span><span class="PUNC">:</span><span class="WHIT">			</span><span class="STRN">"Get Data"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3647</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3648</span> </span><span class="WHIT">	</span><span class="COMM">/**The text on the read button.
<span class='line'>3649</span> 	 * 
<span class='line'>3650</span> 	 * @type String
<span class='line'>3651</span> 	 */</span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>3652</span> </span><span class="WHIT">	</span><span class="NAME">readDataButtonTitleText</span><span class="PUNC">:</span><span class="WHIT">			</span><span class="STRN">"Get Data"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3653</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3654</span> </span><span class="WHIT">	</span><span class="COMM">/**Controls the view of the cancel read data button. When
<span class='line'>3655</span> 	 * set to &lt;b>false&lt;/b> the button will never show.  When
<span class='line'>3656</span> 	 * set to &lt;b>true&lt;/b> the button's behavior will depend on other
<span class='line'>3657</span> 	 * settings such as {@link showReadDataButton} , 
<span class='line'>3658</span> 	 * and {@link showReadDataElement} .
<span class='line'>3659</span> 	 * 
<span class='line'>3660</span> 	 * @default true
<span class='line'>3661</span> 	 * @type Boolean 
<span class='line'>3662</span> 	 */</span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3663</span> </span><span class="WHIT">	</span><span class="NAME">showCancelReadDataButton</span><span class="PUNC">:</span><span class="WHIT">		</span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3664</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3665</span> </span><span class="WHIT">	</span><span class="COMM">/**The id referencing the cancel read data button.  This is 
<span class='line'>3666</span> 	 * useful for CSS customizations.
<span class='line'>3667</span> 	 * 
<span class='line'>3668</span> 	 * @default cancelReadDataButton
<span class='line'>3669</span> 	 * @type String 
<span class='line'>3670</span> 	 */</span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>3671</span> </span><span class="WHIT">	</span><span class="NAME">cancelReadDataButtonId</span><span class="PUNC">:</span><span class="WHIT">		</span><span class="STRN">"cancelReadDataButton"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3672</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3673</span> </span><span class="WHIT">	</span><span class="COMM">/**The text on the cancel read button.
<span class='line'>3674</span> 	 * 
<span class='line'>3675</span> 	 * @type String 
<span class='line'>3676</span> 	 */</span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>3677</span> </span><span class="WHIT">	</span><span class="NAME">cancelReadDataButtonText</span><span class="PUNC">:</span><span class="WHIT">	</span><span class="STRN">"Cancel Get Data"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3678</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3679</span> </span><span class="WHIT">	</span><span class="COMM">/**The status text that is displayed when user cancels the
<span class='line'>3680</span> 	 * read progress.
<span class='line'>3681</span> 	 * 
<span class='line'>3682</span> 	 * @type String
<span class='line'>3683</span> 	 */</span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>3684</span> </span><span class="WHIT">	</span><span class="NAME">cancelReadStatusText</span><span class="PUNC">:</span><span class="WHIT">		</span><span class="STRN">"Read cancelled"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3685</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3686</span> </span><span class="WHIT">	</span><span class="COMM">/**Controls the view of the device select box.
<span class='line'>3687</span> 	 * When set to &lt;b>true&lt;/b> the select device box will show when
<span class='line'>3688</span> 	 * the display loads.
<span class='line'>3689</span> 	 * When set to &lt;b>false&lt;/b> the select device box will hide when
<span class='line'>3690</span> 	 * the display loads.
<span class='line'>3691</span> 	 * When {@link showReadDataElement}  is set to false, the results select
<span class='line'>3692</span> 	 * box will never show.
<span class='line'>3693</span> 	 * 
<span class='line'>3694</span> 	 * @default false
<span class='line'>3695</span> 	 *  
<span class='line'>3696</span> 	 * @see Garmin.DeviceDisplayDefaultOptions.showReadDataElement	 
<span class='line'>3697</span> 	 * @type Boolean 
<span class='line'>3698</span> 	 */</span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>3699</span> </span><span class="WHIT">	</span><span class="NAME">showReadResultsSelectOnLoad</span><span class="PUNC">:</span><span class="WHIT">	</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3700</span> 
<span class='line'>3701</span> </span><span class="WHIT">	</span><span class="COMM">/**The class to set for select lists that are displaying results
<span class='line'>3702</span> 	 * from a read operation.  This is useful for CSS customizations.
<span class='line'>3703</span> 	 * 
<span class='line'>3704</span> 	 * @default readResultsSelect
<span class='line'>3705</span> 	 * @type String 
<span class='line'>3706</span> 	 */</span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>3707</span> </span><span class="WHIT">	</span><span class="NAME">readResultsSelectClass</span><span class="PUNC">:</span><span class="WHIT">			</span><span class="STRN">"readResultsSelect"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3708</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3709</span> </span><span class="WHIT">	</span><span class="COMM">/**The class to set for results elements.  This is useful for CSS customizations.
<span class='line'>3710</span> 	 * 
<span class='line'>3711</span> 	 * @default readResultsElement
<span class='line'>3712</span> 	 * @type String 
<span class='line'>3713</span> 	 */</span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>3714</span> </span><span class="WHIT">	</span><span class="NAME">readResultsElementClass</span><span class="PUNC">:</span><span class="WHIT">		</span><span class="STRN">"readResultsElement"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3715</span> 
<span class='line'>3716</span> </span><span class="WHIT">	</span><span class="COMM">/**Display the route select dropdown.  When
<span class='line'>3717</span> 	 * &lt;@link showReadDataElement> is set to false, the select
<span class='line'>3718</span> 	 * track dropdown will not show.
<span class='line'>3719</span> 	 * 
<span class='line'>3720</span> 	 * @default true
<span class='line'>3721</span> 	 * @see Garmin.DeviceDisplayDefaultOptions.showReadDataElement
<span class='line'>3722</span> 	 * @type Boolean 
<span class='line'>3723</span> 	 */</span><span class="WHIT">
<span class='line'>3724</span> </span><span class="WHIT">	</span><span class="NAME">showReadRoutesSelect</span><span class="PUNC">:</span><span class="WHIT">		</span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3725</span> 
<span class='line'>3726</span> </span><span class="WHIT">	</span><span class="COMM">/**The id referencing the read routes element.  This is 
<span class='line'>3727</span> 	 * useful for CSS customizations.
<span class='line'>3728</span> 	 * 
<span class='line'>3729</span> 	 * @default readRoutesElement
<span class='line'>3730</span> 	 * @type String
<span class='line'>3731</span> 	 */</span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>3732</span> </span><span class="WHIT">	</span><span class="NAME">readRoutesElementId</span><span class="WHIT">	</span><span class="PUNC">:</span><span class="WHIT">		</span><span class="STRN">"readRoutesElement"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3733</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>3734</span> </span><span class="WHIT">	</span><span class="COMM">/**The id referencing the route select dropdown.  This is 
<span class='line'>3735</span> 	 * useful for CSS customizations.
<span class='line'>3736</span> 	 * 
<span class='line'>3737</span> 	 * @default readRoutesSelect
<span class='line'>3738</span> 	 * @type String 
<span class='line'>3739</span> 	 */</span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>3740</span> </span><span class="WHIT">	</span><span class="NAME">readRoutesSelectId</span><span class="PUNC">:</span><span class="WHIT">			</span><span class="STRN">"readRoutesSelect"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3741</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3742</span> </span><span class="WHIT">	</span><span class="COMM">/**The label for the read routes select box.  Shows up next to the
<span class='line'>3743</span> 	 * read routes select box.
<span class='line'>3744</span> 	 * 
<span class='line'>3745</span> 	 * @type String 
<span class='line'>3746</span> 	 */</span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>3747</span> </span><span class="WHIT">	</span><span class="NAME">readRoutesSelectLabel</span><span class="PUNC">:</span><span class="WHIT">		</span><span class="STRN">"Routes: "</span><span class="PUNC">,</span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3748</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>3749</span> </span><span class="WHIT">	</span><span class="COMM">/**The id referencing the read routes select box label.  This is useful for
<span class='line'>3750</span> 	 * CSS customizations.
<span class='line'>3751</span> 	 * 
<span class='line'>3752</span> 	 * @default readRoutesSelectLabel
<span class='line'>3753</span> 	 * @type String 
<span class='line'>3754</span> 	 */</span><span class="WHIT">			</span><span class="WHIT">
<span class='line'>3755</span> </span><span class="WHIT">	</span><span class="NAME">readRoutesSelectLabelId</span><span class="PUNC">:</span><span class="WHIT">	</span><span class="STRN">"readRoutesSelectLabel"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3756</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3757</span> </span><span class="WHIT">	</span><span class="COMM">/** The id referencing the button for uploading selected activities button.  This is useful for CSS customizations.
<span class='line'>3758</span> 	 * 
<span class='line'>3759</span> 	 * @default readSelectedButton
<span class='line'>3760</span> 	 * @type String 
<span class='line'>3761</span> 	 */</span><span class="WHIT">
<span class='line'>3762</span> </span><span class="WHIT">	</span><span class="NAME">readSelectedButtonId</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"readSelectedButton"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3763</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3764</span> </span><span class="WHIT">	</span><span class="COMM">/** The text label for the upload selected data button.  This is useful for CSS customizations.
<span class='line'>3765</span> 	 * 
<span class='line'>3766</span> 	 * @default Upload Selected
<span class='line'>3767</span> 	 * @type String 
<span class='line'>3768</span> 	 */</span><span class="WHIT">
<span class='line'>3769</span> </span><span class="WHIT">	</span><span class="NAME">readSelectedButtonText</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"Upload Selected"</span><span class="PUNC">,</span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>3770</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>3771</span> </span><span class="WHIT">	</span><span class="COMM">/**Display the track select dropdown.  When
<span class='line'>3772</span> 	 * &lt;@link showReadDataElement> is set to false, the select
<span class='line'>3773</span> 	 * track dropdown will not show.
<span class='line'>3774</span> 	 * 
<span class='line'>3775</span> 	 * @default true
<span class='line'>3776</span> 	 * @see Garmin.DeviceDisplayDefaultOptions.showReadDataElement
<span class='line'>3777</span> 	 * @type Boolean 
<span class='line'>3778</span> 	 */</span><span class="WHIT">
<span class='line'>3779</span> </span><span class="WHIT">	</span><span class="NAME">showReadTracksSelect</span><span class="PUNC">:</span><span class="WHIT">		</span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>3780</span> </span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>3781</span> </span><span class="WHIT">	</span><span class="COMM">/**The id referencing the read tracks element.  This is 
<span class='line'>3782</span> 	 * useful for CSS customizations.
<span class='line'>3783</span> 	 * 
<span class='line'>3784</span> 	 * @default readTracksElement
<span class='line'>3785</span> 	 * @type String 
<span class='line'>3786</span> 	 */</span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>3787</span> </span><span class="WHIT">	</span><span class="NAME">readTracksElementId</span><span class="PUNC">:</span><span class="WHIT">		</span><span class="STRN">"readTracksElement"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3788</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3789</span> </span><span class="WHIT">	</span><span class="COMM">/**The id referencing the track select dropdown.  This is 
<span class='line'>3790</span> 	 * useful for CSS customizations.
<span class='line'>3791</span> 	 * 
<span class='line'>3792</span> 	 * @default readTracksSelect
<span class='line'>3793</span> 	 * @type String 
<span class='line'>3794</span> 	 */</span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>3795</span> </span><span class="WHIT">	</span><span class="NAME">readTracksSelectId</span><span class="PUNC">:</span><span class="WHIT">			</span><span class="STRN">"readTracksSelect"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3796</span> 
<span class='line'>3797</span> </span><span class="WHIT">	</span><span class="COMM">/**The label for the read tracks select box.  Shows up next to the
<span class='line'>3798</span> 	 * read tracks select box.
<span class='line'>3799</span> 	 * 
<span class='line'>3800</span> 	 * @type String 
<span class='line'>3801</span> 	 */</span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>3802</span> </span><span class="WHIT">	</span><span class="NAME">readTracksSelectLabel</span><span class="PUNC">:</span><span class="WHIT">		</span><span class="STRN">"Tracks: "</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3803</span> 
<span class='line'>3804</span> </span><span class="WHIT">	</span><span class="COMM">/**The id referencing the read tracks select box label.  This is useful for
<span class='line'>3805</span> 	 * CSS customizations.
<span class='line'>3806</span> 	 * 
<span class='line'>3807</span> 	 * @default deviceSelectLabel
<span class='line'>3808</span> 	 * @type String 
<span class='line'>3809</span> 	 */</span><span class="WHIT">			</span><span class="WHIT">
<span class='line'>3810</span> </span><span class="WHIT">	</span><span class="NAME">readTracksSelectLabelId</span><span class="PUNC">:</span><span class="WHIT">	</span><span class="STRN">"readTracksSelectLabel"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3811</span> 
<span class='line'>3812</span> </span><span class="WHIT">	</span><span class="COMM">/**The id referencing the read tracks element.  This is 
<span class='line'>3813</span> 	 * useful for CSS customizations.
<span class='line'>3814</span> 	 * 
<span class='line'>3815</span> 	 * @default readTracksElement
<span class='line'>3816</span> 	 * @type String 
<span class='line'>3817</span> 	 */</span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>3818</span> </span><span class="WHIT">	</span><span class="NAME">readWaypointsElementId</span><span class="PUNC">:</span><span class="WHIT">		</span><span class="STRN">"readWaypointsElement"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3819</span> 
<span class='line'>3820</span> </span><span class="WHIT">	</span><span class="COMM">/**Display the waypoint select dropdown.  When
<span class='line'>3821</span> 	 * &lt;@link showReadDataElement> is set to false, the select
<span class='line'>3822</span> 	 * waypoint dropdown will not show.
<span class='line'>3823</span> 	 * 
<span class='line'>3824</span> 	 * @default true
<span class='line'>3825</span> 	 * @see Garmin.DeviceDisplayDefaultOptions.showReadDataElement
<span class='line'>3826</span> 	 * @type Boolean 
<span class='line'>3827</span> 	 */</span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3828</span> </span><span class="WHIT">	</span><span class="NAME">showReadWaypointsSelect</span><span class="PUNC">:</span><span class="WHIT">	</span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3829</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3830</span> </span><span class="WHIT">	</span><span class="COMM">/**The id referencing the waypoint select dropdown.  This is 
<span class='line'>3831</span> 	 * useful for CSS customizations.
<span class='line'>3832</span> 	 * 
<span class='line'>3833</span> 	 * @default readWaypointsSelect
<span class='line'>3834</span> 	 * @type String 
<span class='line'>3835</span> 	 */</span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>3836</span> </span><span class="WHIT">	</span><span class="NAME">readWaypointsSelectId</span><span class="PUNC">:</span><span class="WHIT">		</span><span class="STRN">"readWaypointsSelect"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3837</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3838</span> </span><span class="WHIT">	</span><span class="COMM">/**The label for the read waypoints select box.  Shows up next to the
<span class='line'>3839</span> 	 * read tracks select box.
<span class='line'>3840</span> 	 * 
<span class='line'>3841</span> 	 * @type String 
<span class='line'>3842</span> 	 */</span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>3843</span> </span><span class="WHIT">	</span><span class="NAME">readWaypointsSelectLabel</span><span class="PUNC">:</span><span class="WHIT">	</span><span class="STRN">"Waypoints: "</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3844</span> 
<span class='line'>3845</span> </span><span class="WHIT">	</span><span class="COMM">/**The id referencing the read waypoints select box label.  This is useful for
<span class='line'>3846</span> 	 * CSS customizations.
<span class='line'>3847</span> 	 * 
<span class='line'>3848</span> 	 * @default readWaypointsSelectLabel
<span class='line'>3849</span> 	 * @type String
<span class='line'>3850</span> 	 */</span><span class="WHIT">			</span><span class="WHIT">
<span class='line'>3851</span> </span><span class="WHIT">	</span><span class="NAME">readWaypointsSelectLabelId</span><span class="PUNC">:</span><span class="WHIT">	</span><span class="STRN">"readWaypointsSelectLabel"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3852</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3853</span> </span><span class="WHIT">	</span><span class="COMM">/**Display Google map to show tracks and laps that have been read.  When &lt;@link showReadDataElement> is 
<span class='line'>3854</span> 	 * set to false, the Google map will not show.
<span class='line'>3855</span> 	 * 
<span class='line'>3856</span> 	 * @default false
<span class='line'>3857</span> 	 * @see Garmin.DeviceDisplayDefaultOptions.showReadDataElement
<span class='line'>3858</span> 	 * @type Boolean 
<span class='line'>3859</span> 	 */</span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>3860</span> </span><span class="WHIT">	</span><span class="NAME">showReadGoogleMap</span><span class="PUNC">:</span><span class="WHIT">			</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3861</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3862</span> </span><span class="WHIT">	</span><span class="COMM">/**The id referencing the google map display.  This is 
<span class='line'>3863</span> 	 * useful for CSS customizations.
<span class='line'>3864</span> 	 * 
<span class='line'>3865</span> 	 * @default readMap
<span class='line'>3866</span> 	 * @type String 
<span class='line'>3867</span> 	 */</span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>3868</span> </span><span class="WHIT">	</span><span class="NAME">readGoogleMapId</span><span class="PUNC">:</span><span class="WHIT">			</span><span class="STRN">"readMap"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3869</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3870</span> </span><span class="WHIT">	</span><span class="COMM">/**DEPRECATED - Use {@link Garmin.DeviceDisplayDefaultOptions.readDataTypes} Tells the plug-in what data type to read from the device.  Options for this
<span class='line'>3871</span> 	 * are currently constants listed in {@link Garmin.DeviceControl.FILE_TYPES} , 
<span class='line'>3872</span> 	 * and the values are: crs, gpx, gpi, or null to skip this option altogether and get the default data type from 
<span class='line'>3873</span> 	 * the device.
<span class='line'>3874</span> 	 * &lt;p>
<span class='line'>3875</span> 	 * This property works in conjunction with the following functions, based on the datatype:
<span class='line'>3876</span> 	 * &lt;p>
<span class='line'>3877</span> 	 * For CRS and GPX:	Define the getWriteData() and getWriteDataFileName() functions in your options section.
<span class='line'>3878</span> 	 * &lt;p>
<span class='line'>3879</span> 	 * For GPI: Define the getWriteData() and getWriteDataFileName() functions in your options section.
<span class='line'>3880</span> 	 * 			The getGpiWriteDescription() function replaces getWriteData().
<span class='line'>3881</span> 	 * &lt;p>
<span class='line'>3882</span> 	 * @default Garmin.DeviceControl.FILE_TYPES.gpx
<span class='line'>3883</span> 	 * @see Garmin.DeviceDisplayDefaultOptions.showReadDataElement
<span class='line'>3884</span> 	 * @see Garmin.DeviceControl.FILE_TYPES
<span class='line'>3885</span> 	 * @see Garmin.DeviceDisplayDefaultOptions.readDataTypes
<span class='line'>3886</span> 	 * @type String 
<span class='line'>3887</span> 	 * @deprecated
<span class='line'>3888</span> 	 */</span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>3889</span> </span><span class="WHIT">	</span><span class="NAME">readDataType</span><span class="PUNC">:</span><span class="WHIT">	</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3890</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3891</span> </span><span class="WHIT">	</span><span class="COMM">/** OVERRIDES readDataType! 
<span class='line'>3892</span> 	 * 
<span class='line'>3893</span> 	 * Tells the plug-in what data types to read from the device, in order of preference.  Options for this
<span class='line'>3894</span> 	 * are currently constants listed in {@link Garmin.DeviceControl.FILE_TYPES}.
<span class='line'>3895</span>      *
<span class='line'>3896</span> 	 * @see Garmin.DeviceDisplayDefaultOptions.showReadDataElement
<span class='line'>3897</span> 	 * @see Garmin.DeviceControl.FILE_TYPES
<span class='line'>3898</span> 	 * @default TCX, GPX
<span class='line'>3899</span> 	 * @example ["FitnessHistory", "GPSData"]
<span class='line'>3900</span> 	 * @type Array 
<span class='line'>3901</span> 	 */</span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>3902</span> </span><span class="WHIT">	</span><span class="NAME">readDataTypes</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="STRN">"GPSData"</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3903</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3904</span> </span><span class="WHIT">	</span><span class="COMM">/**Specify additional options for file listing operations. &lt;br/>
<span class='line'>3905</span> 	 * Some readDataTypes {@link Garmin.DeviceControl.FILE_TYPES} such as "readableDir" 
<span class='line'>3906</span> 	 * require these options to be set in order to complete successfully. &lt;br/>
<span class='line'>3907</span>      * &lt;strong>fileListingOptions properties:&lt;/strong> &lt;br/>
<span class='line'>3908</span>      * {String} dataTypeName: Name from GarminDevice.xml &lt;br/>
<span class='line'>3909</span>      * {String} dataTypeID: Identifier from GarminDevice.xml&lt;br/>
<span class='line'>3910</span>      * {Boolean} computeMD5: Compute MD5 checksum for each listed file&lt;br/>
<span class='line'>3911</span>      * @type {Object} fileListingOptions
<span class='line'>3912</span> 	 * @see Garmin.DeviceDisplayDefaultOptions.readDataTypes
<span class='line'>3913</span> 	 * @see Garmin.DeviceControl.readDataFromDevice
<span class='line'>3914</span> 	 * @see Garmin.DevicePlugin.startReadableFileListing
<span class='line'>3915</span> 	 * @default null
<span class='line'>3916</span>      * @example
<span class='line'>3917</span>      * var theOptions = {dataTypeName: 'UserDataSync',
<span class='line'>3918</span>      *                     dataTypeID: 'http://www.topografix.com/GPX/1/1',
<span class='line'>3919</span>      *                     computeMD5: false};
<span class='line'>3920</span> 	 */</span><span class="WHIT">
<span class='line'>3921</span> </span><span class="WHIT">	</span><span class="NAME">fileListingOptions</span><span class="PUNC">:</span><span class="WHIT">	</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3922</span> 
<span class='line'>3923</span> </span><span class="WHIT">	</span><span class="COMM">/**Display the dropdown select box for selecting what type
<span class='line'>3924</span> 	 * of data to read from the device.  When 
<span class='line'>3925</span> 	 * &lt;@link showReadDataElement> is set to false, 
<span class='line'>3926</span> 	 * this device type select will not show.
<span class='line'>3927</span> 	 * 
<span class='line'>3928</span> 	 * @default false
<span class='line'>3929</span> 	 * @see Garmin.DeviceDisplayDefaultOptions.showReadDataElement
<span class='line'>3930</span> 	 * @type Boolean 
<span class='line'>3931</span> 	 */</span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>3932</span> </span><span class="WHIT">	</span><span class="NAME">showReadDataTypesSelect</span><span class="PUNC">:</span><span class="WHIT">	</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3933</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3934</span> </span><span class="WHIT">	</span><span class="COMM">/**The id referencing the data type select.  This is 
<span class='line'>3935</span> 	 * useful for CSS customizations.
<span class='line'>3936</span> 	 * 
<span class='line'>3937</span> 	 * @default readDataTypesSelect
<span class='line'>3938</span> 	 * @type String 
<span class='line'>3939</span> 	 */</span><span class="WHIT">			</span><span class="WHIT">
<span class='line'>3940</span> </span><span class="WHIT">	</span><span class="NAME">readDataTypesSelectId</span><span class="PUNC">:</span><span class="WHIT">		</span><span class="STRN">"readDataTypesSelect"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3941</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3942</span> </span><span class="WHIT">	</span><span class="COMM">/**The function called when data is successfully read from
<span class='line'>3943</span> 	 * the device.  The function should have three arguements:&lt;br/>
<span class='line'>3944</span> 	 * &lt;br/>
<span class='line'>3945</span> 	 * 	dataString - the xml received from the device in String format&lt;br/>
<span class='line'>3946</span> 	 *  dataDoc - the xml received from the device in Document format&lt;br/>
<span class='line'>3947</span> 	 *  extension - the file type extension of the data, used to determine
<span class='line'>3948</span> 	 * 				the type of data received.&lt;br/>
<span class='line'>3949</span> 	 *  activities - list of &lt;@link Garmin.Activity> parsed from the xml.&lt;br/>
<span class='line'>3950</span> 	 *  display - the display object&lt;br/>
<span class='line'>3951</span> 	 * @see Garmin.DeviceDisplayDefaultOptions.Garmin.Activity
<span class='line'>3952</span> 	 * @example function(dataString, dataDoc, extension, activities, display){...} 
<span class='line'>3953</span> 	 * @type function
<span class='line'>3954</span> 	 * @function 
<span class='line'>3955</span> 	 */</span><span class="WHIT">				</span><span class="WHIT">
<span class='line'>3956</span> </span><span class="WHIT">	</span><span class="NAME">afterFinishReadFromDevice</span><span class="PUNC">:</span><span class="WHIT">	</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3957</span> 
<span class='line'>3958</span> </span><span class="WHIT">	</span><span class="COMM">/**Load tracks even if they don't have a timestamp (technically these are
<span class='line'>3959</span> 	 * routes).  Set to false if you need to do synchronization with existing
<span class='line'>3960</span> 	 * track log database.
<span class='line'>3961</span> 	 * 
<span class='line'>3962</span> 	 * @default true
<span class='line'>3963</span> 	 * @see Garmin.DeviceDisplayDefaultOptions._listTracks
<span class='line'>3964</span> 	 * @type Boolean 
<span class='line'>3965</span> 	 */</span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>3966</span> </span><span class="WHIT">	</span><span class="NAME">loadTracksWithoutATimestamp</span><span class="PUNC">:</span><span class="WHIT">	</span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3967</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3968</span> </span><span class="WHIT">	</span><span class="COMM">// ================== Write Element Options ======================</span><span class="WHIT">
<span class='line'>3969</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3970</span> </span><span class="WHIT">	</span><span class="COMM">/**Start writing data to the device when one or more device(s)
<span class='line'>3971</span> 	 * is found.
<span class='line'>3972</span> 	 * 
<span class='line'>3973</span> 	 * @default false
<span class='line'>3974</span> 	 * 
<span class='line'>3975</span> 	 * @see Garmin.DeviceDisplayDefaultOptions.autoFindDevices
<span class='line'>3976</span> 	 * @see Garmin.DeviceDisplayDefaultOptions.autoReadData
<span class='line'>3977</span> 	 * @type Boolean 
<span class='line'>3978</span> 	 */</span><span class="WHIT">					</span><span class="WHIT">
<span class='line'>3979</span> </span><span class="WHIT">	</span><span class="NAME">autoWriteData</span><span class="PUNC">:</span><span class="WHIT">				</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3980</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3981</span> </span><span class="WHIT">	</span><span class="COMM">/**Display the user interface associated with writing to
<span class='line'>3982</span> 	 * a connected device.
<span class='line'>3983</span> 	 * 
<span class='line'>3984</span> 	 * @default false
<span class='line'>3985</span> 	 * @type Boolean 
<span class='line'>3986</span> 	 */</span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>3987</span> </span><span class="WHIT">	</span><span class="NAME">showWriteDataElement</span><span class="PUNC">:</span><span class="WHIT">		</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>3988</span> 
<span class='line'>3989</span> </span><span class="WHIT">	</span><span class="COMM">/**Controls the view of the write data element. When
<span class='line'>3990</span> 	 * set to &lt;b>true&lt;/b> the element will only show after a
<span class='line'>3991</span> 	 * device has been found.  When set to &lt;b>false&lt;/b> the
<span class='line'>3992</span> 	 * element will show on page load.
<span class='line'>3993</span> 	 * Behavior will depend on other settings such as
<span class='line'>3994</span> 	 * and {@link showWriteDataElement} .
<span class='line'>3995</span> 	 * 
<span class='line'>3996</span> 	 * @default false
<span class='line'>3997</span> 	 * @type Boolean 
<span class='line'>3998</span> 	 */</span><span class="WHIT">
<span class='line'>3999</span> </span><span class="WHIT">	</span><span class="NAME">showWriteDataElementOnDeviceFound</span><span class="PUNC">:</span><span class="WHIT">		</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4000</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4001</span> </span><span class="WHIT">	</span><span class="COMM">/**The id referencing the box containing write elements.  This is 
<span class='line'>4002</span> 	 * useful for CSS customizations.
<span class='line'>4003</span> 	 * 
<span class='line'>4004</span> 	 * @default writeBox
<span class='line'>4005</span> 	 * @type String 
<span class='line'>4006</span> 	 */</span><span class="WHIT">
<span class='line'>4007</span> </span><span class="WHIT">	</span><span class="NAME">writeDataElementId</span><span class="PUNC">:</span><span class="WHIT">			</span><span class="STRN">"writeBox"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4008</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4009</span> </span><span class="WHIT">	</span><span class="COMM">/**The id referencing the write data button.  This is 
<span class='line'>4010</span> 	 * useful for CSS customizations.
<span class='line'>4011</span> 	 * 
<span class='line'>4012</span> 	 * @default writeDataButton
<span class='line'>4013</span> 	 * @type String 
<span class='line'>4014</span> 	 */</span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>4015</span> </span><span class="WHIT">	</span><span class="NAME">writeDataButtonId</span><span class="PUNC">:</span><span class="WHIT">			</span><span class="STRN">"writeDataButton"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4016</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4017</span> </span><span class="WHIT">	</span><span class="COMM">/**The text on the write button.
<span class='line'>4018</span> 	 * 
<span class='line'>4019</span> 	 * @type String 
<span class='line'>4020</span> 	 */</span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>4021</span> </span><span class="WHIT">	</span><span class="NAME">writeDataButtonText</span><span class="PUNC">:</span><span class="WHIT">		</span><span class="STRN">"Write"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4022</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4023</span> </span><span class="WHIT">	</span><span class="COMM">/**Controls the view of the cancel write data button. When
<span class='line'>4024</span> 	 * set to &lt;b>false&lt;/b> the button will never show.  When
<span class='line'>4025</span> 	 * set to &lt;b>true&lt;/b> the button's behavior will depend on other
<span class='line'>4026</span> 	 * settings such as {@link showWriteDataButton} , 
<span class='line'>4027</span> 	 * and {@link showWriteDataElement} .
<span class='line'>4028</span> 	 * 
<span class='line'>4029</span> 	 * @default true
<span class='line'>4030</span> 	 * @type Boolean 
<span class='line'>4031</span> 	 */</span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4032</span> </span><span class="WHIT">	</span><span class="NAME">showCancelWriteDataButton</span><span class="PUNC">:</span><span class="WHIT">		</span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4033</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4034</span> </span><span class="WHIT">	</span><span class="COMM">/**The id referencing the cancel write data button.  This is 
<span class='line'>4035</span> 	 * useful for CSS customizations.
<span class='line'>4036</span> 	 * 
<span class='line'>4037</span> 	 * @default cancelWriteDataButton
<span class='line'>4038</span> 	 * @type String 
<span class='line'>4039</span> 	 */</span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>4040</span> </span><span class="WHIT">	</span><span class="NAME">cancelWriteDataButtonId</span><span class="PUNC">:</span><span class="WHIT">	</span><span class="STRN">"cancelWriteDataButton"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4041</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4042</span> </span><span class="WHIT">	</span><span class="COMM">/**The text on the cancel write button.
<span class='line'>4043</span> 	 * 
<span class='line'>4044</span> 	 * @type String 
<span class='line'>4045</span> 	 */</span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>4046</span> </span><span class="WHIT">	</span><span class="NAME">cancelWriteDataButtonText</span><span class="PUNC">:</span><span class="WHIT">  </span><span class="STRN">"Cancel Write"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4047</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4048</span> </span><span class="WHIT">	</span><span class="COMM">/**The function called when data is successfully written to
<span class='line'>4049</span> 	 * the device.  This method takes two parameters:
<span class='line'>4050</span> 	 *  success Boolean  - true if data was written
<span class='line'>4051</span> 	 *  display {Garmin.DeviceDisplay}  - the current instance of the DeviceDisplay
<span class='line'>4052</span> 	 * @type function 
<span class='line'>4053</span> 	 * @example function(success, display) {...}
<span class='line'>4054</span> 	 * @function
<span class='line'>4055</span> 	 */</span><span class="WHIT">				</span><span class="WHIT">
<span class='line'>4056</span> </span><span class="WHIT">	</span><span class="NAME">afterFinishWriteToDevice</span><span class="PUNC">:</span><span class="WHIT">	</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4057</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4058</span> </span><span class="WHIT">	</span><span class="COMM">/**Array of filters to sequencialy apply to activities before being sent or displayed.
<span class='line'>4059</span> 	 * 
<span class='line'>4060</span> 	 * @see Garmin.FILTERS
<span class='line'>4061</span> 	 * @type Array dataFilters
<span class='line'>4062</span> 	 * @example [Garmin.FILTERS.historyOnly]
<span class='line'>4063</span> 	 */</span><span class="WHIT">				</span><span class="WHIT">
<span class='line'>4064</span> </span><span class="WHIT">	</span><span class="NAME">dataFilters</span><span class="PUNC">:</span><span class="WHIT">				</span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4065</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4066</span> </span><span class="WHIT">	</span><span class="COMM">/**The function called by the display in order to acquire the data
<span class='line'>4067</span> 	 * that will be written to the device during the writing operation.
<span class='line'>4068</span> 	 * 
<span class='line'>4069</span> 	 * This function should return a String.
<span class='line'>4070</span> 	 * 
<span class='line'>4071</span> 	 * @see Garmin.DeviceDisplayDefaultOptions.getWriteDataFileName
<span class='line'>4072</span> 	 * @type function 
<span class='line'>4073</span> 	 * @example function() { return $("myTextAreaId").value; }
<span class='line'>4074</span> 	 * @function
<span class='line'>4075</span> 	 */</span><span class="WHIT">
<span class='line'>4076</span> </span><span class="WHIT">	</span><span class="NAME">getWriteData</span><span class="PUNC">:</span><span class="WHIT">				</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4077</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4078</span> </span><span class="WHIT">	</span><span class="COMM">/**The function called by the display in order to acquire the filename
<span class='line'>4079</span> 	 * of the data that will be written to the device during the writing 
<span class='line'>4080</span> 	 * operation.
<span class='line'>4081</span> 	 * 
<span class='line'>4082</span> 	 * This function should return a String.
<span class='line'>4083</span> 	 * @default function(){ return "myData.gpx"; }
<span class='line'>4084</span> 	 * @see Garmin.DeviceDisplayDefaultOptions.getWriteData
<span class='line'>4085</span> 	 * @type function
<span class='line'>4086</span> 	 */</span><span class="WHIT">
<span class='line'>4087</span> </span><span class="WHIT">	</span><span class="NAME">getWriteDataFileName</span><span class="PUNC">:</span><span class="WHIT">		</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">{</span><span class="WHIT"> </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="STRN">"myData.gpx"</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4088</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4089</span> </span><span class="WHIT">	</span><span class="COMM">/**DEPRECATED (see {@link getBinaryWriteDescription}) - The function called by the display in order to acquire the data
<span class='line'>4090</span> 	 * that will be written to the device during the writing operation.
<span class='line'>4091</span> 	 * 
<span class='line'>4092</span> 	 * This function should return an array of strings where adjacent items
<span class='line'>4093</span> 	 * indicate the source (URL) of the gpi to be written and the destination
<span class='line'>4094</span> 	 * (device path and filename) to write to the device.
<span class='line'>4095</span> 	 *
<span class='line'>4096</span> 	 * e.g.: [SOURCE,DESTINATION,SOURCE2,DESTINATION2] add as many source/destination 
<span class='line'>4097</span> 	 * pairs as you'd like.
<span class='line'>4098</span> 	 * 
<span class='line'>4099</span> 	 * @example function() { return ["http://developer.garmin.com/SampleGpi.gpi", "Garmin\\POI\\Test.gpi"] } 
<span class='line'>4100</span> 	 * @type function 
<span class='line'>4101</span> 	 * @function
<span class='line'>4102</span> 	 */</span><span class="WHIT">
<span class='line'>4103</span> </span><span class="WHIT">	</span><span class="NAME">getGpiWriteDescription</span><span class="PUNC">:</span><span class="WHIT">		</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4104</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4105</span> </span><span class="WHIT">	</span><span class="COMM">/**The function called by the display in order to acquire the data
<span class='line'>4106</span> 	 * that will be written to the device during the writing operation.
<span class='line'>4107</span> 	 * 
<span class='line'>4108</span> 	 * This function should return an array of strings where adjacent items
<span class='line'>4109</span> 	 * indicate the source (URL) of the binary data to be written and the destination
<span class='line'>4110</span> 	 * (device path and filename) to write to the device.
<span class='line'>4111</span> 	 *
<span class='line'>4112</span> 	 * e.g.: [SOURCE,DESTINATION,SOURCE2,DESTINATION2] add as many source/destination 
<span class='line'>4113</span> 	 * pairs as you'd like.
<span class='line'>4114</span> 	 * 
<span class='line'>4115</span> 	 * @example function() { return ["http://developer.garmin.com/SampleGpi.gpi", "Garmin\\POI\\Test.gpi"] }
<span class='line'>4116</span> 	 * @type function
<span class='line'>4117</span> 	 * @function 
<span class='line'>4118</span> 	 */</span><span class="WHIT">
<span class='line'>4119</span> </span><span class="WHIT">	</span><span class="NAME">getBinaryWriteDescription</span><span class="PUNC">:</span><span class="WHIT">		</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4120</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4121</span> </span><span class="WHIT">	</span><span class="COMM">/**DEPRECATED - Use {@link Garmin.DeviceDisplayDefaultOptions.writeDataTypes}
<span class='line'>4122</span> 	 * Tells the plug-in what data type to write to the device.  
<span class='line'>4123</span> 	 * Options are "gpx" which will use {@link getWriteData}  to get the data
<span class='line'>4124</span> 	 * or "gpi" which will use {@link getGpiWriteDescription}  to get the data to
<span class='line'>4125</span> 	 * save to the device.
<span class='line'>4126</span> 	 *
<span class='line'>4127</span> 	 * @default Garmin.DeviceControl.FILE_TYPES.gpx
<span class='line'>4128</span> 	 * @see Garmin.DeviceDisplayDefaultOptions.showWriteDataElement
<span class='line'>4129</span> 	 * @see Garmin.DeviceDisplayDefaultOptions.getWriteData
<span class='line'>4130</span> 	 * @see Garmin.DeviceDisplayDefaultOptions.getGpiWriteDescription
<span class='line'>4131</span> 	 * @see Garmin.DeviceDisplayDefaultOptions.writeDataTypes
<span class='line'>4132</span> 	 * @type String 
<span class='line'>4133</span> 	 * @deprecated
<span class='line'>4134</span> 	 */</span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>4135</span> </span><span class="WHIT">	</span><span class="NAME">writeDataType</span><span class="PUNC">:</span><span class="WHIT">	</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4136</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4137</span> </span><span class="WHIT">	</span><span class="COMM">/** OVERRIDES writeDataType!
<span class='line'>4138</span> 	 *
<span class='line'>4139</span> 	 * Tells the plug-in what data type to write to the device.  
<span class='line'>4140</span> 	 * Options are "gpx" which will use {@link getWriteData}  to get the data
<span class='line'>4141</span> 	 * or "gpi" which will use {@link getGpiWriteDescription}  to get the data to
<span class='line'>4142</span> 	 * save to the device.
<span class='line'>4143</span> 	 *
<span class='line'>4144</span> 	 * @default Garmin.DeviceControl.FILE_TYPES.gpx
<span class='line'>4145</span> 	 * @see Garmin.DeviceDisplayDefaultOptions.showWriteDataElement
<span class='line'>4146</span> 	 * @see Garmin.DeviceDisplayDefaultOptions.getWriteData
<span class='line'>4147</span> 	 * @see Garmin.DeviceDisplayDefaultOptions.getGpiWriteDescription
<span class='line'>4148</span> 	 * @type Array 
<span class='line'>4149</span> 	 */</span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>4150</span> </span><span class="WHIT">	</span><span class="NAME">writeDataTypes</span><span class="PUNC">:</span><span class="WHIT">	</span><span class="PUNC">[</span><span class="STRN">"GPSData"</span><span class="PUNC">]</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4151</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4152</span> </span><span class="WHIT">	</span><span class="COMM">//===================  Activity Directory Element Options ===============</span><span class="WHIT">
<span class='line'>4153</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4154</span> </span><span class="WHIT">	</span><span class="COMM">/** Displays the activity directory table, which essentially 
<span class='line'>4155</span> 	 * allows users to select individual activities to read from 
<span class='line'>4156</span> 	 * the device.  showReadDataElement must be true for this 
<span class='line'>4157</span> 	 * to display.
<span class='line'>4158</span> 	 * 
<span class='line'>4159</span> 	 * @default true
<span class='line'>4160</span> 	 * 
<span class='line'>4161</span> 	 * @see Garmin.DeviceDisplayDefaultOptions.showReadDataElement
<span class='line'>4162</span> 	 * @type Boolean 
<span class='line'>4163</span> 	 */</span><span class="WHIT">
<span class='line'>4164</span> </span><span class="WHIT">	</span><span class="NAME">showActivityDirectoryElement</span><span class="PUNC">:</span><span class="WHIT">	</span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4165</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4166</span> </span><span class="WHIT">	</span><span class="COMM">/**
<span class='line'>4167</span> 	 * The classname referencing the element that lists individual activities. This element includes the 
<span class='line'>4168</span> 	 * data table as well as the related buttons (such as for uploading data). This is useful for CSS customizations.
<span class='line'>4169</span> 	 * @default activityDirectoryClass
<span class='line'>4170</span> 	 * @type String 
<span class='line'>4171</span> 	 */</span><span class="WHIT">
<span class='line'>4172</span> </span><span class="WHIT">	</span><span class="NAME">activityDirectoryClass</span><span class="PUNC">:</span><span class="WHIT">        </span><span class="STRN">"activityDirectoryClass"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4173</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4174</span> </span><span class="WHIT">	</span><span class="COMM">/** The id referencing the table that holds the activity directory data.  This is useful for CSS customizations.
<span class='line'>4175</span> 	 * 
<span class='line'>4176</span> 	 * @default activityDirectoryData
<span class='line'>4177</span> 	 * @type String 
<span class='line'>4178</span> 	 */</span><span class="WHIT">
<span class='line'>4179</span> </span><span class="WHIT">	</span><span class="NAME">activityDirectoryDataId</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"activityDirectoryData"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4180</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4181</span> </span><span class="WHIT">	</span><span class="COMM">/** The id referencing the element that lists individual activities. This element includes the 
<span class='line'>4182</span> 	 * data table as well as the related buttons (such as for uploading data). This is useful for CSS customizations.
<span class='line'>4183</span> 	 * 
<span class='line'>4184</span> 	 * @default activityDirectory
<span class='line'>4185</span> 	 * @type String 
<span class='line'>4186</span> 	 */</span><span class="WHIT">
<span class='line'>4187</span> </span><span class="WHIT">	</span><span class="NAME">activityDirectoryElementId</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"activityDirectory"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4188</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4189</span> </span><span class="WHIT">	</span><span class="COMM">/** The id referencing the header of the activity table that lists individual activities. 
<span class='line'>4190</span> 	 * This is useful for CSS customizations.
<span class='line'>4191</span> 	 * @default activityTableHeader
<span class='line'>4192</span> 	 * @type String 
<span class='line'>4193</span> 	 */</span><span class="WHIT">
<span class='line'>4194</span> </span><span class="WHIT">	</span><span class="NAME">activityTableHeaderId</span><span class="PUNC">:</span><span class="WHIT">      </span><span class="STRN">"activityTableHeader"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4195</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4196</span> </span><span class="WHIT">	</span><span class="COMM">/** The id referencing the activity table that lists individual activities. This table contains
<span class='line'>4197</span> 	 * the activity data. This is useful for CSS customizations.
<span class='line'>4198</span> 	 * 
<span class='line'>4199</span> 	 * @default activityTable
<span class='line'>4200</span> 	 * @type String 
<span class='line'>4201</span> 	 */</span><span class="WHIT">
<span class='line'>4202</span> </span><span class="WHIT">	</span><span class="NAME">activityTableId</span><span class="PUNC">:</span><span class="WHIT">           </span><span class="STRN">"activityTable"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4203</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4204</span> </span><span class="WHIT">	</span><span class="COMM">/** The function called after an activity entry is added to the activity listing table.
<span class='line'>4205</span> 	 * Useful for updating the status cell in a unique way.
<span class='line'>4206</span> 	 * @param Boolean index - the index in the table where the activity was added
<span class='line'>4207</span> 	 * @param {Garmin.Activity} activity
<span class='line'>4208</span> 	 * @param {Element} statusCell - the status td element associated with the activity
<span class='line'>4209</span> 	 * @param {Element} checkbox - the checkbox input element associated with the activity
<span class='line'>4210</span> 	 * @param Object row - the table row element associated with the activity
<span class='line'>4211</span> 	 * @param {Garmin.ActivityMatcher} activityMatcher - the activity matcher object, if available.
<span class='line'>4212</span> 	 * @param {Garmin.DeviceDisplay} display - the current instance of the display object
<span class='line'>4213</span> 	 * @type function
<span class='line'>4214</span> 	 * @function
<span class='line'>4215</span> 	 * @example function(index, activity, statusCell, checkbox, row, this.activityMatcher, this) {...}
<span class='line'>4216</span> 	 */</span><span class="WHIT">
<span class='line'>4217</span> </span><span class="WHIT">	</span><span class="NAME">afterTableInsert</span><span class="PUNC">:</span><span class="WHIT">          </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4218</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4219</span> </span><span class="WHIT">	</span><span class="COMM">//===================  Upload Options ===============</span><span class="WHIT">
<span class='line'>4220</span> 
<span class='line'>4221</span> </span><span class="WHIT">    </span><span class="COMM">/** Class name for the cancel upload button. 
<span class='line'>4222</span>      * Useful for CSS customizations.
<span class='line'>4223</span>      * @default cancelUploadButtonClass
<span class='line'>4224</span>      * @type String 
<span class='line'>4225</span>      */</span><span class="WHIT">
<span class='line'>4226</span> </span><span class="WHIT">	</span><span class="NAME">cancelUploadButtonClass</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'cancelUploadButtonClass'</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4227</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4228</span> </span><span class="WHIT">	</span><span class="COMM">/** Element ID for the cancel upload button.
<span class='line'>4229</span> 	 * @default 'cancelUploadButton'
<span class='line'>4230</span> 	 * @type String 
<span class='line'>4231</span> 	 */</span><span class="WHIT">
<span class='line'>4232</span> </span><span class="WHIT">	</span><span class="NAME">cancelUploadButtonId</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'cancelUploadButton'</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4233</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4234</span> </span><span class="WHIT">	</span><span class="COMM">/** Text to display on Cancel upload button.
<span class='line'>4235</span> 	 * @default '(Cancel)'
<span class='line'>4236</span> 	 * @type String 
<span class='line'>4237</span> 	 */</span><span class="WHIT">
<span class='line'>4238</span> </span><span class="WHIT">	</span><span class="NAME">cancelUploadButtonText</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'(Cancel)'</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4239</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4240</span> </span><span class="WHIT">	</span><span class="COMM">/**Display the user interface associated with uploading new activities from a connected device.  
<span class='line'>4241</span> 	 * 
<span class='line'>4242</span> 	 * @default true
<span class='line'>4243</span> 	 * @type Boolean 
<span class='line'>4244</span> 	 */</span><span class="WHIT">
<span class='line'>4245</span> </span><span class="WHIT">	</span><span class="NAME">showUploadNewButton</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4246</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4247</span> </span><span class="WHIT">	</span><span class="COMM">/**Display the user interface associated with uploading health data from a connected device.  
<span class='line'>4248</span> 	 * 
<span class='line'>4249</span> 	 * @default true
<span class='line'>4250</span> 	 * @type Boolean 
<span class='line'>4251</span> 	 */</span><span class="WHIT">
<span class='line'>4252</span> </span><span class="WHIT">	</span><span class="NAME">showHealthDataUploadButton</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4253</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4254</span> </span><span class="WHIT">	</span><span class="COMM">/** The id referencing the button for uploading data to a server. This is useful for CSS customizations.
<span class='line'>4255</span> 	 * 
<span class='line'>4256</span> 	 * @default uploadNewButton
<span class='line'>4257</span> 	 * @type String  
<span class='line'>4258</span> 	 */</span><span class="WHIT">
<span class='line'>4259</span> </span><span class="WHIT">	</span><span class="NAME">uploadNewButtonId</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"uploadNewButton"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4260</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4261</span> </span><span class="WHIT">	</span><span class="COMM">/** The id referencing the button for uploading data to a server. This is useful for CSS customizations.
<span class='line'>4262</span> 	 * 
<span class='line'>4263</span> 	 * @default uploadNewButton
<span class='line'>4264</span> 	 * @type String  
<span class='line'>4265</span> 	 */</span><span class="WHIT">
<span class='line'>4266</span> </span><span class="WHIT">	</span><span class="NAME">uploadHealthDataButtonId</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"uploadHealthDataButton"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4267</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4268</span> </span><span class="WHIT">	</span><span class="COMM">/** The text label for the upload data button.  This is useful for CSS customizations.
<span class='line'>4269</span> 	 * 
<span class='line'>4270</span> 	 * @default activityDirectory
<span class='line'>4271</span> 	 * @type String 
<span class='line'>4272</span> 	 */</span><span class="WHIT">
<span class='line'>4273</span> </span><span class="WHIT">	</span><span class="NAME">uploadNewButtonText</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"Upload new activities"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4274</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4275</span> </span><span class="WHIT">	</span><span class="COMM">/** The title text for the upload data button.  This is useful for CSS customizations.
<span class='line'>4276</span> 	 * 
<span class='line'>4277</span> 	 * @default activityDirectory
<span class='line'>4278</span> 	 * @type String 
<span class='line'>4279</span> 	 */</span><span class="WHIT">
<span class='line'>4280</span> </span><span class="WHIT">	</span><span class="NAME">uploadNewButtonTitleText</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"Upload new activities"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4281</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4282</span> </span><span class="WHIT">	</span><span class="COMM">/** The text label for the upload data button.  This is useful for CSS customizations.
<span class='line'>4283</span> 	 * 
<span class='line'>4284</span> 	 * @default activityDirectory
<span class='line'>4285</span> 	 * @type String 
<span class='line'>4286</span> 	 */</span><span class="WHIT">
<span class='line'>4287</span> </span><span class="WHIT">	</span><span class="NAME">uploadHealthDataButtonText</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"Upload Health Data"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4288</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4289</span> </span><span class="WHIT">	</span><span class="COMM">/** The title for the upload data button.  This is useful for CSS customizations.
<span class='line'>4290</span> 	 * 
<span class='line'>4291</span> 	 * @default activityDirectory
<span class='line'>4292</span> 	 * @type String 
<span class='line'>4293</span> 	 */</span><span class="WHIT">
<span class='line'>4294</span> </span><span class="WHIT">	</span><span class="NAME">uploadHealthDataButtonTitleText</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"Upload Health Data"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4295</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4296</span> </span><span class="WHIT">	</span><span class="COMM">/** Select activities to upload, rather than all activities read off the device.
<span class='line'>4297</span> 	 * 
<span class='line'>4298</span> 	 * @default false
<span class='line'>4299</span> 	 * @type Boolean 
<span class='line'>4300</span> 	 */</span><span class="WHIT">
<span class='line'>4301</span> </span><span class="WHIT">	</span><span class="NAME">uploadSelectedActivities</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4302</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4303</span> </span><span class="WHIT">	</span><span class="COMM">/** Upload compressed data.  Compressed data is gzip base 64 encoded.  Compression is supported
<span class='line'>4304</span> 	 * for fitness history activities only.
<span class='line'>4305</span> 	 * 
<span class='line'>4306</span> 	 * @default false
<span class='line'>4307</span> 	 * @type Boolean
<span class='line'>4308</span> 	 */</span><span class="WHIT">
<span class='line'>4309</span> </span><span class="WHIT">	</span><span class="NAME">uploadCompressedData</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4310</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4311</span> </span><span class="WHIT">	</span><span class="COMM">/** Maximum number of activities allowed for upload selection.  Users are notified during the selection
<span class='line'>4312</span> 	 * process if they try to exceed this value.  uploadSelectedActivities must be set to true 
<span class='line'>4313</span> 	 * for this to work.  Note that if this value is > 0, the 'select all activities' feature will not be available.  
<span class='line'>4314</span> 	 * 
<span class='line'>4315</span> 	 * Set this value to 0 for no limit with NO 'select all activities' checkbox.
<span class='line'>4316</span> 	 * 
<span class='line'>4317</span> 	 * @default -1 (no limit with 'select all' checkbox)
<span class='line'>4318</span> 	 * @type int
<span class='line'>4319</span> 	 * @see Garmin.DeviceDisplayDefaultOptions.uploadSelectedActivities
<span class='line'>4320</span> 	 */</span><span class="WHIT">
<span class='line'>4321</span> </span><span class="WHIT">	</span><span class="NAME">uploadMaximum</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="WHIT">
<span class='line'>4322</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4323</span> </span><span class="WHIT">	</span><span class="COMM">// ================== Post to Server ======================</span><span class="WHIT">
<span class='line'>4324</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4325</span> </span><span class="WHIT">	</span><span class="COMM">/** The function called when a single activity is finished reading, and the data is ready to post.
<span class='line'>4326</span> 	 * Use this if you need a custom way of uploading data to your server (advanced users).&lt;br/>  
<span class='line'>4327</span> 	 * &lt;br/>
<span class='line'>4328</span> 	 * Otherwise, if you just need an AJAX call, use Send Data. (See {@link this.options.sendDataUrl} 
<span class='line'>4329</span> 	 * and {@link this.options.sendDataOptions}.)
<span class='line'>4330</span> 	 *  
<span class='line'>4331</span>      * Parameters to this function:&lt;br/>
<span class='line'>4332</span>      *  &lt;br/>datastring String  - The XML datastring of the activity read from the device.&lt;br/>
<span class='line'>4333</span>      *  &lt;br/>display {GarminDeviceDisplay} - the display object
<span class='line'>4334</span>      * @example function(datastring, display){...}
<span class='line'>4335</span>      * @function
<span class='line'>4336</span>      * @type function  
<span class='line'>4337</span> 	 */</span><span class="WHIT">
<span class='line'>4338</span> </span><span class="WHIT">	</span><span class="NAME">postActivityHandler</span><span class="PUNC">:</span><span class="WHIT"> 		</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="WHIT">
<span class='line'>4339</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4340</span> </span><span class="WHIT">	</span><span class="COMM">/** Show the element to send data to a remote server.
<span class='line'>4341</span> 	 * 
<span class='line'>4342</span> 	 * @type Boolean 
<span class='line'>4343</span> 	 */</span><span class="WHIT">
<span class='line'>4344</span> </span><span class="WHIT">	</span><span class="NAME">showSendDataElement</span><span class="PUNC">:</span><span class="WHIT">		</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4345</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4346</span> </span><span class="WHIT">	</span><span class="COMM">/**Controls the view of the send data element. When
<span class='line'>4347</span> 	 * set to &lt;b>true&lt;/b> the element will only show after a
<span class='line'>4348</span> 	 * device has been found.  When set to &lt;b>false&lt;/b> the
<span class='line'>4349</span> 	 * element will show on page load.
<span class='line'>4350</span> 	 * Behavior will depend on other settings such as
<span class='line'>4351</span> 	 * and {@link showSendDataElement} .
<span class='line'>4352</span> 	 * 
<span class='line'>4353</span> 	 * @default false
<span class='line'>4354</span> 	 * @type Boolean 
<span class='line'>4355</span> 	 */</span><span class="WHIT">
<span class='line'>4356</span> </span><span class="WHIT">	</span><span class="NAME">showSendDataElementOnDeviceFound</span><span class="PUNC">:</span><span class="WHIT">		</span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4357</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4358</span> </span><span class="WHIT">	</span><span class="COMM">/** The callback function to set the request options when hitting the remote server.
<span class='line'>4359</span> 	 * This function is passed these parameters:
<span class='line'>4360</span> 	 * 
<span class='line'>4361</span> 	 * options - The options object.  Use this object to set the property values.  
<span class='line'>4362</span> 	 *           Some may already be set by sendDataOptions.  getSendOptions will overwrite any existing ones. 
<span class='line'>4363</span> 	 * deviceXml - the active device's XML
<span class='line'>4364</span> 	 * data - read data from the device, if any
<span class='line'>4365</span> 	 * 
<span class='line'>4366</span> 	 * Don't forget to return the options object!
<span class='line'>4367</span> 	 * 
<span class='line'>4368</span> 	 * @type function 
<span class='line'>4369</span> 	 * @example function(options, deviceXml, data) {} 
<span class='line'>4370</span> 	 * @function
<span class='line'>4371</span> 	 */</span><span class="WHIT">
<span class='line'>4372</span> </span><span class="WHIT">	</span><span class="NAME">getSendOptions</span><span class="PUNC">:</span><span class="WHIT">					</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4373</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4374</span> </span><span class="WHIT">	</span><span class="COMM">/** The URL to send the data to.
<span class='line'>4375</span> 	 * 
<span class='line'>4376</span> 	 * @type String 
<span class='line'>4377</span> 	 */</span><span class="WHIT">
<span class='line'>4378</span> </span><span class="WHIT">	</span><span class="NAME">sendDataUrl</span><span class="PUNC">:</span><span class="WHIT">					</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4379</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4380</span> </span><span class="WHIT">	</span><span class="COMM">/** The AJAX request options to use for sending data to a server.  To be used in conjunction with {@link sendDataUrl} .
<span class='line'>4381</span> 	 * 
<span class='line'>4382</span> 	 * See the &lt;a href="http://www.prototypejs.org/api/ajax/options">AJAX options page&lt;/a> for configurable options and default values. 
<span class='line'>4383</span> 	 * 
<span class='line'>4384</span> 	 * @type Object 
<span class='line'>4385</span> 	 */</span><span class="WHIT">
<span class='line'>4386</span> </span><span class="WHIT">	</span><span class="NAME">sendDataOptions</span><span class="PUNC">:</span><span class="WHIT">				</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4387</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4388</span> </span><span class="WHIT">	</span><span class="COMM">/**The id referencing the box containing send elements.  This is 
<span class='line'>4389</span> 	 * useful for CSS customizations.
<span class='line'>4390</span> 	 * 
<span class='line'>4391</span> 	 * @default sendBox
<span class='line'>4392</span> 	 * @type String 
<span class='line'>4393</span> 	 */</span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>4394</span> </span><span class="WHIT">	</span><span class="NAME">sendDataElementId</span><span class="PUNC">:</span><span class="WHIT">			</span><span class="STRN">"sendBox"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4395</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4396</span> </span><span class="WHIT">	</span><span class="COMM">/**The id referencing the send data button.  This is useful for
<span class='line'>4397</span> 	 * CSS customizations.
<span class='line'>4398</span> 	 * 
<span class='line'>4399</span> 	 * @default sendDataButton
<span class='line'>4400</span> 	 * @type String 
<span class='line'>4401</span> 	 */</span><span class="WHIT">			</span><span class="WHIT">
<span class='line'>4402</span> </span><span class="WHIT">	</span><span class="NAME">sendDataButtonId</span><span class="PUNC">:</span><span class="WHIT">			</span><span class="STRN">"sendDataButton"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4403</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4404</span> </span><span class="WHIT">	</span><span class="COMM">/**The text on the read button.
<span class='line'>4405</span> 	 * 
<span class='line'>4406</span> 	 * @type String 
<span class='line'>4407</span> 	 */</span><span class="WHIT">		</span><span class="WHIT">
<span class='line'>4408</span> </span><span class="WHIT">	</span><span class="NAME">sendDataButtonText</span><span class="PUNC">:</span><span class="WHIT">			</span><span class="STRN">"Send Data"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4409</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4410</span> </span><span class="WHIT">	</span><span class="COMM">/** The callback function that will be passed the AJAX response 
<span class='line'>4411</span> 	 * after making the request.  The display object is passed in, so you can 
<span class='line'>4412</span> 	 * make follow-up read or write calls if so desired.
<span class='line'>4413</span> 	 *
<span class='line'>4414</span> 	 * @see Garmin.DeviceDisplayDefaultOptions.sendDataUrl
<span class='line'>4415</span> 	 * @see Garmin.DeviceDisplayDefaultOptions.getSendOptions
<span class='line'>4416</span> 	 * @param response object (see &lt;a href="http://www.prototypejs.org/api/ajax/response">Ajax.Response&lt;/a> for response attributes)
<span class='line'>4417</span> 	 * @default null
<span class='line'>4418</span> 	 * @type function
<span class='line'>4419</span> 	 * @function 
<span class='line'>4420</span> 	 * @example function(response){}
<span class='line'>4421</span> 	 */</span><span class="WHIT">
<span class='line'>4422</span> </span><span class="WHIT">	</span><span class="NAME">afterFinishSendData</span><span class="PUNC">:</span><span class="WHIT">			</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4423</span> 
<span class='line'>4424</span> </span><span class="WHIT">	</span><span class="COMM">//===================  Device Browser Element Options ===============</span><span class="WHIT">
<span class='line'>4425</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4426</span> </span><span class="WHIT">	</span><span class="COMM">/** The callback function that will be called when the user selects a
<span class='line'>4427</span> 	 * device from the device browser. 
<span class='line'>4428</span> 	 *
<span class='line'>4429</span> 	 * @default null
<span class='line'>4430</span> 	 * @param deviceNum the device number of the selected device
<span class='line'>4431</span> 	 * @param devices an array of the detected devices 
<span class='line'>4432</span> 	 * @param deviceXml the device xml of the selected device
<span class='line'>4433</span> 	 * @type function 
<span class='line'>4434</span> 	 * @function
<span class='line'>4435</span> 	 * @example function(deviceXml){...}
<span class='line'>4436</span> 	 */</span><span class="WHIT">
<span class='line'>4437</span> </span><span class="WHIT">	</span><span class="NAME">afterSelectDevice</span><span class="PUNC">:</span><span class="WHIT">       </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4438</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4439</span> </span><span class="WHIT">	</span><span class="COMM">/** Show the device browser list.  Currently the browser list is only available
<span class='line'>4440</span> 	 * when activity directory reading is on (readDataType = Garmin.DeviceControl.FILE_TYPES.tcxDir). 
<span class='line'>4441</span> 	 * 
<span class='line'>4442</span> 	 * @default true
<span class='line'>4443</span> 	 * 
<span class='line'>4444</span> 	 * @see Garmin.DeviceDisplayDefaultOptions.uploadSelectedActivities
<span class='line'>4445</span> 	 * @type Boolean 
<span class='line'>4446</span> 	 */</span><span class="WHIT">
<span class='line'>4447</span> </span><span class="WHIT">	</span><span class="NAME">useDeviceBrowser</span><span class="PUNC">:</span><span class="WHIT">   </span><span class="KEYW">true</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4448</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4449</span> </span><span class="WHIT">	</span><span class="COMM">/**Display list instead of select drop down.  
<span class='line'>4450</span> 	 * @default false
<span class='line'>4451</span> 	 * @type Boolean 
<span class='line'>4452</span> 	 */</span><span class="WHIT">
<span class='line'>4453</span> </span><span class="WHIT">	</span><span class="NAME">useDeviceSelectList</span><span class="PUNC">:</span><span class="WHIT">                 </span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4454</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4455</span> </span><span class="WHIT">	</span><span class="COMM">/** The classname for the device browser element.  This is useful for custom CSS.
<span class='line'>4456</span> 	 * @default deviceBrowserBoxClass
<span class='line'>4457</span> 	 * @type String 
<span class='line'>4458</span> 	 */</span><span class="WHIT">
<span class='line'>4459</span> </span><span class="WHIT">	</span><span class="NAME">deviceBrowserElementClass</span><span class="PUNC">:</span><span class="WHIT">    </span><span class="STRN">"deviceBrowserBoxClass"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4460</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4461</span> </span><span class="WHIT">	</span><span class="COMM">/** The id referencing the device browser element.  This is useful for custom CSS.
<span class='line'>4462</span> 	 * @default deviceBrowserList
<span class='line'>4463</span> 	 * @type String 
<span class='line'>4464</span> 	 */</span><span class="WHIT">
<span class='line'>4465</span> </span><span class="WHIT">	</span><span class="NAME">deviceBrowserElementId</span><span class="PUNC">:</span><span class="WHIT">    </span><span class="STRN">"deviceBrowserBox"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4466</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4467</span> </span><span class="WHIT">	</span><span class="COMM">/** The classname for the device browser text label.  This is useful for custom CSS.
<span class='line'>4468</span> 	 * @default deviceBrowserLabelClass
<span class='line'>4469</span> 	 * @type String  
<span class='line'>4470</span> 	 */</span><span class="WHIT">
<span class='line'>4471</span> </span><span class="WHIT">	</span><span class="NAME">deviceBrowserLabelClass</span><span class="PUNC">:</span><span class="WHIT">      </span><span class="STRN">"deviceBrowserLabelClass"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4472</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4473</span> </span><span class="WHIT">	</span><span class="COMM">/** The id referencing the device browser text label.  This is useful for custom CSS.
<span class='line'>4474</span> 	 * @default deviceBrowserLabelId
<span class='line'>4475</span> 	 * @type String  
<span class='line'>4476</span> 	 */</span><span class="WHIT">
<span class='line'>4477</span> </span><span class="WHIT">	</span><span class="NAME">deviceBrowserLabelId</span><span class="PUNC">:</span><span class="WHIT">      </span><span class="STRN">"deviceBrowserLabel"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4478</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4479</span> </span><span class="WHIT">	</span><span class="COMM">/** The text label to display above the device browser list.  This is useful for custom CSS.
<span class='line'>4480</span> 	 * @default 'Browse devices:'
<span class='line'>4481</span> 	 * @type String  
<span class='line'>4482</span> 	 */</span><span class="WHIT">
<span class='line'>4483</span> </span><span class="WHIT">	</span><span class="NAME">deviceBrowserLabel</span><span class="PUNC">:</span><span class="WHIT">        </span><span class="STRN">"Browse devices:"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4484</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4485</span> </span><span class="WHIT">	</span><span class="COMM">/** The id referencing the device browser list.  This is useful for
<span class='line'>4486</span> 	 * CSS customizations.
<span class='line'>4487</span> 	 * 
<span class='line'>4488</span> 	 * @default deviceBrowserList
<span class='line'>4489</span> 	 * @type String 
<span class='line'>4490</span> 	 */</span><span class="WHIT">
<span class='line'>4491</span> </span><span class="WHIT">	</span><span class="NAME">deviceBrowserListId</span><span class="PUNC">:</span><span class="WHIT">       </span><span class="STRN">"deviceBrowserList"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4492</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4493</span> </span><span class="WHIT">	</span><span class="COMM">/** The classname referencing the button that displays the UI for browsing the user's
<span class='line'>4494</span> 	 * file system.  
<span class='line'>4495</span> 	 * @default browseComputerButtonClass
<span class='line'>4496</span> 	 * @type String 
<span class='line'>4497</span> 	 */</span><span class="WHIT">
<span class='line'>4498</span> </span><span class="WHIT">	</span><span class="NAME">browseComputerButtonClass</span><span class="PUNC">:</span><span class="WHIT">    </span><span class="STRN">"browseComputerButtonClass"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4499</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4500</span> </span><span class="WHIT">	</span><span class="COMM">/** The id referencing the button that displays the UI for browsing the user's
<span class='line'>4501</span> 	 * file system.  
<span class='line'>4502</span> 	 * @default browseComputerButton
<span class='line'>4503</span> 	 * @type String 
<span class='line'>4504</span> 	 */</span><span class="WHIT">
<span class='line'>4505</span> </span><span class="WHIT">	</span><span class="NAME">browseComputerButtonId</span><span class="PUNC">:</span><span class="WHIT">    </span><span class="STRN">"browseComputerButton"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4506</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4507</span> </span><span class="WHIT">	</span><span class="COMM">/** The text for the button that displays the UI for browsing the user's file system.
<span class='line'>4508</span> 	 * @default "Browse Computer"
<span class='line'>4509</span> 	 * @type String 
<span class='line'>4510</span> 	 */</span><span class="WHIT">
<span class='line'>4511</span> </span><span class="WHIT">	</span><span class="NAME">browseComputerButtonText</span><span class="PUNC">:</span><span class="WHIT">  </span><span class="STRN">"Browse Computer"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4512</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4513</span> </span><span class="WHIT">	</span><span class="COMM">/** The title the button that displays the UI for browsing the user's file system.
<span class='line'>4514</span> 	 * @default "Browse Computer"
<span class='line'>4515</span> 	 * @type String 
<span class='line'>4516</span> 	 */</span><span class="WHIT">
<span class='line'>4517</span> </span><span class="WHIT">	</span><span class="NAME">browseComputerButtonTitleText</span><span class="PUNC">:</span><span class="WHIT">  </span><span class="STRN">"Browse Computer"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4518</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4519</span> </span><span class="WHIT">	</span><span class="COMM">/** The classname for the browse computer container.
<span class='line'>4520</span> 	 * @type String
<span class='line'>4521</span> 	 */</span><span class="WHIT">
<span class='line'>4522</span> </span><span class="WHIT">	</span><span class="NAME">browseComputerElementClass</span><span class="PUNC">:</span><span class="WHIT">    </span><span class="STRN">"browseComputerElementClass"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4523</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4524</span> </span><span class="WHIT">	</span><span class="COMM">/** The id for the browse computer container. 
<span class='line'>4525</span> 	 * @type String
<span class='line'>4526</span> 	 */</span><span class="WHIT">
<span class='line'>4527</span> </span><span class="WHIT">	</span><span class="NAME">browseComputerElementId</span><span class="PUNC">:</span><span class="WHIT">       </span><span class="STRN">"browseComputerElement"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4528</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4529</span> </span><span class="WHIT">    </span><span class="COMM">/** The url of the iframe to load into the browse computer container.
<span class='line'>4530</span>      * The iframe object is generated by the API.  See browseComputerElementClass
<span class='line'>4531</span>      * to change the dimensions of the iframe.
<span class='line'>4532</span>      * @type String
<span class='line'>4533</span>      */</span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4534</span> </span><span class="WHIT">	</span><span class="NAME">browseComputerContentUrl</span><span class="PUNC">:</span><span class="WHIT">       </span><span class="STRN">"about:blank"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4535</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4536</span> </span><span class="WHIT">	</span><span class="COMM">/** The text label to display in the browser list for browsing the computer.
<span class='line'>4537</span> 	 * @default My Computer
<span class='line'>4538</span> 	 * @type String 
<span class='line'>4539</span> 	 */</span><span class="WHIT">
<span class='line'>4540</span> </span><span class="WHIT">	</span><span class="NAME">browseComputerLabel</span><span class="PUNC">:</span><span class="WHIT">       </span><span class="STRN">"My Computer"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4541</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4542</span> </span><span class="WHIT">	</span><span class="COMM">/** The text to display on the loading content screen.  This is useful for internationalization.
<span class='line'>4543</span> 	 * @default 'Loading content...'
<span class='line'>4544</span> 	 * @type String 
<span class='line'>4545</span> 	 */</span><span class="WHIT">
<span class='line'>4546</span> </span><span class="WHIT">	</span><span class="NAME">loadingContentText</span><span class="PUNC">:</span><span class="WHIT">        </span><span class="STRN">"Loading content from #{deviceName}, please wait..."</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4547</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4548</span> </span><span class="WHIT">	</span><span class="COMM">/** The text to display on the loading health content screen.  This is useful for internationalization.
<span class='line'>4549</span> 	 * @default 'Loading content...'
<span class='line'>4550</span> 	 * @type String 
<span class='line'>4551</span> 	 */</span><span class="WHIT">
<span class='line'>4552</span> </span><span class="WHIT">	</span><span class="NAME">loadingHealthContentText</span><span class="PUNC">:</span><span class="WHIT">        </span><span class="STRN">"Loading health content from #{deviceName}, please wait..."</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4553</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4554</span> </span><span class="WHIT">	</span><span class="COMM">/** The text to display to change the device.  This is useful for internationalization.
<span class='line'>4555</span> 	 * @default '(Change)'
<span class='line'>4556</span> 	 * @type String 
<span class='line'>4557</span> 	 */</span><span class="WHIT">
<span class='line'>4558</span> </span><span class="WHIT">	</span><span class="NAME">changeDeviceButtonText</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"(Change)"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4559</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4560</span> </span><span class="WHIT">	</span><span class="COMM">/** The classname referencing the change device element, which is a link that allows
<span class='line'>4561</span> 	 * the user to change device in list mode.
<span class='line'>4562</span> 	 * @default changeDevice
<span class='line'>4563</span> 	 * @type String 
<span class='line'>4564</span> 	 */</span><span class="WHIT">
<span class='line'>4565</span> </span><span class="WHIT">	</span><span class="NAME">changeDeviceClass</span><span class="PUNC">:</span><span class="WHIT">            </span><span class="STRN">"change"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4566</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4567</span> </span><span class="WHIT">	</span><span class="COMM">/** The id referencing the change device element, which is a link that allows
<span class='line'>4568</span> 	 * the user to change device in list mode.
<span class='line'>4569</span> 	 * @default changeDevice
<span class='line'>4570</span> 	 * @type String 
<span class='line'>4571</span> 	 */</span><span class="WHIT">
<span class='line'>4572</span> </span><span class="WHIT">	</span><span class="NAME">changeDeviceElementId</span><span class="PUNC">:</span><span class="WHIT">                </span><span class="STRN">"changeDevice"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4573</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4574</span> </span><span class="WHIT">	</span><span class="COMM">/** The class name referencing the connected devices label displayed when using
<span class='line'>4575</span> 	 * the device select list.
<span class='line'>4576</span> 	 * @default connectedDevicesClass
<span class='line'>4577</span> 	 * @type String 
<span class='line'>4578</span> 	 */</span><span class="WHIT">
<span class='line'>4579</span> </span><span class="WHIT">	</span><span class="NAME">connectedDevicesClass</span><span class="PUNC">:</span><span class="WHIT">                 </span><span class="STRN">"connectedDevicesClass"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4580</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4581</span> </span><span class="WHIT">	</span><span class="COMM">/** The image to display in the connected devices label.
<span class='line'>4582</span> 	 * @type String 
<span class='line'>4583</span> 	 */</span><span class="WHIT">
<span class='line'>4584</span> </span><span class="WHIT">	</span><span class="NAME">connectedDevicesImg</span><span class="PUNC">:</span><span class="WHIT">                   </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4585</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4586</span> </span><span class="WHIT">	</span><span class="COMM">/** The label for connected devices, displayed when using the device select list.
<span class='line'>4587</span> 	 * @default 'Connected devices:'
<span class='line'>4588</span> 	 * @type String 
<span class='line'>4589</span> 	 */</span><span class="WHIT">
<span class='line'>4590</span> </span><span class="WHIT">	</span><span class="NAME">connectedDevicesLabel</span><span class="PUNC">:</span><span class="WHIT">                 </span><span class="STRN">"Connected devices:"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4591</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4592</span> </span><span class="WHIT">	</span><span class="COMM">/** The classname referencing the preview device element, which displays an image
<span class='line'>4593</span> 	 * depending on the device selected.
<span class='line'>4594</span> 	 * 
<span class='line'>4595</span> 	 * @default previewDevice
<span class='line'>4596</span> 	 * @see Garmin.DeviceDisplayDefaultOptions.previewDeviceDefaultImg
<span class='line'>4597</span> 	 * @type String 
<span class='line'>4598</span> 	 */</span><span class="WHIT">
<span class='line'>4599</span> </span><span class="WHIT">	</span><span class="NAME">previewDeviceClass</span><span class="PUNC">:</span><span class="WHIT">           </span><span class="STRN">"preview"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4600</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4601</span> </span><span class="WHIT">	</span><span class="COMM">/** The id referencing the change device element, which is a link that allows
<span class='line'>4602</span> 	 * the user to change device in list mode.
<span class='line'>4603</span> 	 * @default changeDevice
<span class='line'>4604</span> 	 * @type String 
<span class='line'>4605</span> 	 */</span><span class="WHIT">
<span class='line'>4606</span> </span><span class="WHIT">	</span><span class="NAME">previewDeviceElementId</span><span class="PUNC">:</span><span class="WHIT">                 </span><span class="STRN">"previewDevice"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4607</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4608</span> </span><span class="WHIT">	</span><span class="COMM">/** The default image URL to display for any selected device. 
<span class='line'>4609</span> 	 * @see Garmin.DeviceDisplayDefaultOptions.previewDeviceId
<span class='line'>4610</span> 	 * @see Garmin.DeviceDisplayDefaultOptions.useDeviceSelectList
<span class='line'>4611</span> 	 * @type String 
<span class='line'>4612</span> 	 */</span><span class="WHIT">
<span class='line'>4613</span> </span><span class="WHIT">	</span><span class="NAME">previewDeviceDefaultImg</span><span class="PUNC">:</span><span class="WHIT">   </span><span class="STRN">"../../../theme/upload/images/icon-edge.png"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4614</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4615</span> </span><span class="WHIT">	</span><span class="COMM">/**The maximum number of characters to display for a device name.
<span class='line'>4616</span> 	 *@type int 
<span class='line'>4617</span> 	 */</span><span class="WHIT">
<span class='line'>4618</span> </span><span class="WHIT">	</span><span class="NAME">deviceLabelMaxSize</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">20</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4619</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4620</span> </span><span class="WHIT">	</span><span class="COMM">/** Allows the user to browse their file system for upload. 
<span class='line'>4621</span> 	 * {@link uploadSelectedActivities} must be set to true for this
<span class='line'>4622</span> 	 * option to take effect.
<span class='line'>4623</span> 	 * @default false
<span class='line'>4624</span> 	 * @type Boolean 
<span class='line'>4625</span> 	 */</span><span class="WHIT">
<span class='line'>4626</span> </span><span class="WHIT">	</span><span class="NAME">showBrowseComputer</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4627</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4628</span> </span><span class="WHIT">	</span><span class="COMM">// ================== Synchronization ======================</span><span class="WHIT">
<span class='line'>4629</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4630</span> </span><span class="WHIT">	</span><span class="COMM">/**Detect new activities in the activity listing by comparing the device list to a server list.
<span class='line'>4631</span> 	 * @default true
<span class='line'>4632</span> 	 * @type Boolean 
<span class='line'>4633</span> 	 */</span><span class="WHIT">
<span class='line'>4634</span> </span><span class="WHIT">	</span><span class="NAME">detectNewActivities</span><span class="PUNC">:</span><span class="WHIT">                  </span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4635</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4636</span> </span><span class="WHIT">	</span><span class="COMM">/**
<span class='line'>4637</span> 	 * The URL to make the sync request to.  To be used in conjuntion with {@link syncDataOptions}.
<span class='line'>4638</span> 	 * {@link detectNewActivities} must be set to true.
<span class='line'>4639</span> 	 * @type String 
<span class='line'>4640</span> 	 */</span><span class="WHIT">
<span class='line'>4641</span> </span><span class="WHIT">	</span><span class="NAME">syncDataUrl</span><span class="PUNC">:</span><span class="WHIT">                          </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4642</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4643</span> </span><span class="WHIT">	</span><span class="COMM">/** The AJAX request options to use for posting the parameters to a server.  To be used in conjunction with {@link syncDataUrl} .
<span class='line'>4644</span> 	 * 
<span class='line'>4645</span> 	 * See the &lt;a href="http://www.prototypejs.org/api/ajax/options">AJAX options page&lt;/a> for configurable options and default values. 
<span class='line'>4646</span> 	 * 
<span class='line'>4647</span> 	 * @type Object 
<span class='line'>4648</span> 	 */</span><span class="WHIT">
<span class='line'>4649</span> </span><span class="WHIT">	</span><span class="NAME">syncDataOptions</span><span class="PUNC">:</span><span class="WHIT">                      </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4650</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4651</span> </span><span class="WHIT">	</span><span class="COMM">// ================== Internationalization ======================</span><span class="WHIT">
<span class='line'>4652</span> </span><span class="WHIT">	</span><span class="COMM">/** Status message exposed for internationalization. @type String  */</span><span class="WHIT">
<span class='line'>4653</span> </span><span class="WHIT">	</span><span class="NAME">pluginUnlocked</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"Plug-in initialized.  Find some devices to get started."</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4654</span> </span><span class="WHIT">	</span><span class="COMM">/** Status message exposed for internationalization. @type String  */</span><span class="WHIT">
<span class='line'>4655</span> </span><span class="WHIT">	</span><span class="NAME">pluginNotUnlocked</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"The plug-in was not unlocked successfully"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4656</span> </span><span class="WHIT">	</span><span class="COMM">/** Read data selection option exposed for internationalization. @type String  */</span><span class="WHIT">
<span class='line'>4657</span> </span><span class="WHIT">	</span><span class="NAME">gpsData</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"GPS Data"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4658</span> </span><span class="WHIT">	</span><span class="COMM">/** Read data selection option exposed for internationalization. @type String  */</span><span class="WHIT">
<span class='line'>4659</span> </span><span class="WHIT">	</span><span class="NAME">trainingData</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"Training Data"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4660</span> </span><span class="WHIT">	</span><span class="COMM">/** Status message exposed for internationalization. Prepended to the device name after user selects which device to use.  
<span class='line'>4661</span> 	 * i.e. "Using Diana's Forerunner 305"  
<span class='line'>4662</span> 	 * @default "Using "
<span class='line'>4663</span> 	 * @type String  
<span class='line'>4664</span> 	 */</span><span class="WHIT">
<span class='line'>4665</span> </span><span class="WHIT">	</span><span class="NAME">usingDevice</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"Using #{deviceName}"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4666</span> </span><span class="WHIT">	</span><span class="COMM">/** Track list box item template exposed for internationalization. @type String  */</span><span class="WHIT">
<span class='line'>4667</span> </span><span class="WHIT">	</span><span class="NAME">trackListing</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"#{date}  (Duration: #{duration} )"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4668</span> </span><span class="WHIT">	</span><span class="COMM">/** Status message template exposed for internationalization. @type String  */</span><span class="WHIT">
<span class='line'>4669</span> </span><span class="WHIT">	</span><span class="NAME">dataFound</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"#{routes}  routes, #{tracks}  tracks and #{waypoints}  waypoints found"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4670</span> </span><span class="WHIT">	</span><span class="COMM">/** Status message template for file listings exposed for internationalization. @type String  */</span><span class="WHIT">
<span class='line'>4671</span> </span><span class="WHIT">	</span><span class="NAME">filesFound</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"#{files} files found"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4672</span> </span><span class="WHIT">	</span><span class="COMM">/** Status message exposed for internationalization. @type String  */</span><span class="WHIT">
<span class='line'>4673</span> </span><span class="WHIT">	</span><span class="NAME">writingToDevice</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"Writing data to the device"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4674</span> </span><span class="WHIT">	</span><span class="COMM">/** Status message exposed for internationalization. @type String  */</span><span class="WHIT">
<span class='line'>4675</span> </span><span class="WHIT">	</span><span class="NAME">writtenToDevice</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"Data written to the device"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4676</span> </span><span class="WHIT">	</span><span class="COMM">/** Status message exposed for internationalization. @type String  */</span><span class="WHIT">
<span class='line'>4677</span> </span><span class="WHIT">	</span><span class="NAME">writingCancelled</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"Writing cancelled"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4678</span> </span><span class="WHIT">	</span><span class="COMM">/** Status message exposed for internationalization. @type String  */</span><span class="WHIT">
<span class='line'>4679</span> </span><span class="WHIT">	</span><span class="NAME">overwritingFile</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"Overwriting file"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4680</span> </span><span class="WHIT">	</span><span class="COMM">/** Status message exposed for internationalization. @type String  */</span><span class="WHIT">
<span class='line'>4681</span> </span><span class="WHIT">	</span><span class="NAME">notOverwritingFile</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"Will not be overwriting file"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4682</span> </span><span class="WHIT">	</span><span class="COMM">/** Status message exposed for internationalization. @type String  */</span><span class="WHIT">
<span class='line'>4683</span> </span><span class="WHIT">	</span><span class="NAME">lookingForDevices</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"Looking for connected devices..."</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4684</span> </span><span class="WHIT">	</span><span class="COMM">/** Status template exposed for internationalization. When single device is found. @type String  */</span><span class="WHIT">
<span class='line'>4685</span> </span><span class="WHIT">	</span><span class="NAME">foundDevice</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"Found #{deviceName} "</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4686</span> </span><span class="WHIT">	</span><span class="COMM">/** Status template exposed for internationalization. When multiple devices are found. @type String  */</span><span class="WHIT">
<span class='line'>4687</span> </span><span class="WHIT">	</span><span class="NAME">foundDevices</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"Found #{deviceCount}  devices"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4688</span> </span><span class="WHIT">	</span><span class="COMM">/** Status message exposed for internationalization. When user cancels Find Devices.@type String  */</span><span class="WHIT">
<span class='line'>4689</span> </span><span class="WHIT">	</span><span class="NAME">findCancelled</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"Find cancelled"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4690</span> </span><span class="WHIT">	</span><span class="COMM">/** Status message exposed for internationalization. When reading data from the device. @type String  */</span><span class="WHIT">
<span class='line'>4691</span> </span><span class="WHIT">	</span><span class="NAME">dataReadProcessing</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"Data read from device. Processing..."</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4692</span> </span><span class="WHIT">	</span><span class="COMM">/** Status message exposed for internationalization. When large files are being written to device.  @type String  */</span><span class="WHIT">
<span class='line'>4693</span> </span><span class="WHIT">	</span><span class="NAME">dataDownloadProcessing</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"Processing data to write... "</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4694</span> </span><span class="WHIT">	</span><span class="COMM">/** Status message exposed for internationalization. When uploads have completed.  @type String  */</span><span class="WHIT">
<span class='line'>4695</span> </span><span class="WHIT">	</span><span class="NAME">uploadsFinished</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"Transfer Complete!"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4696</span> </span><span class="WHIT">	</span><span class="COMM">/** Error message exposed for internationalization. @type String  */</span><span class="WHIT">
<span class='line'>4697</span> </span><span class="WHIT">	</span><span class="NAME">noParseSupportForType</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"The plugin does not have parsing support for file type "</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4698</span> </span><span class="WHIT">	</span><span class="COMM">/** Request message exposed for internationalization. @type String  */</span><span class="WHIT">
<span class='line'>4699</span> </span><span class="WHIT">	</span><span class="NAME">installNow</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"Install now?"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4700</span> </span><span class="WHIT">	</span><span class="COMM">/** Request message exposed for internationalization. @type String  */</span><span class="WHIT">
<span class='line'>4701</span> </span><span class="WHIT">	</span><span class="NAME">downloadAndInstall</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"Download and install now"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4702</span> </span><span class="WHIT">	</span><span class="COMM">/** Powered-by message. Required for plugin license agreement. @type String  */</span><span class="WHIT">
<span class='line'>4703</span> </span><span class="WHIT">	</span><span class="NAME">poweredByGarmin</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"Powered by &lt;a href='http://www.garmin.com/products/communicator/' target='_new'>Garmin Communicator&lt;/a>"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4704</span> </span><span class="WHIT">	</span><span class="COMM">/** Status message for devices that are not in the allowed devices list, or do not support any of the application's supported filetypes. @type String  */</span><span class="WHIT">
<span class='line'>4705</span> </span><span class="WHIT">	</span><span class="NAME">unsupportedDevice</span><span class="PUNC">:</span><span class="WHIT">	</span><span class="STRN">"Your device is not supported by this application."</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4706</span> </span><span class="WHIT">	</span><span class="COMM">/** Error message to display when user attempts to upload 0 activities. @type String  */</span><span class="WHIT">
<span class='line'>4707</span> </span><span class="WHIT">	</span><span class="NAME">errorActivitySelect</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"No selected or new activities to upload."</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4708</span> </span><span class="WHIT">	</span><span class="COMM">/** Tooltip message to describe the check all box for the activity directory. Useful for CSS customizations and internationalization.  @type String */</span><span class="WHIT">
<span class='line'>4709</span> </span><span class="WHIT">	</span><span class="NAME">activityDirectoryCheckAllTooltip</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"Check all new"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4710</span> </span><span class="WHIT">	</span><span class="COMM">/** DEPRECATED Column header for the Date fields in the activity directory.  Useful for CSS customizations and internationalization.  @type String @deprecated @see Garmin.DeviceDisplayDefaultOptions.getActivityDirectoryHeaderIdLabel */</span><span class="WHIT">
<span class='line'>4711</span> </span><span class="WHIT">	</span><span class="NAME">activityDirectoryHeaderDate</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"&lt;b>Date&lt;/b>"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4712</span> </span><span class="WHIT">	</span><span class="COMM">/** Column header for the Date/Name fields in the activity directory.  Useful for CSS customizations and internationalization. Default to Date if nothing is specified @type String  */</span><span class="WHIT">
<span class='line'>4713</span> </span><span class="WHIT">	</span><span class="NAME">getActivityDirectoryHeaderIdLabel</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT"> </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.fileTypeRead</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">Garmin.DeviceControl.FILE_TYPES.readableDir</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="STRN">"&lt;b>File&lt;/b>"</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"&lt;b>Date&lt;/b>"</span><span class="PUNC">;</span><span class="WHIT"> </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4714</span> </span><span class="WHIT">	</span><span class="COMM">/** Column header for the Duration fields in the activity directory.  Useful for CSS customizations and internationalization.  @type String  */</span><span class="WHIT">
<span class='line'>4715</span> </span><span class="WHIT">	</span><span class="NAME">activityDirectoryHeaderDuration</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"&lt;b>Duration&lt;/b>"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4716</span> </span><span class="WHIT">	</span><span class="COMM">/** Column header for the Status fields in the activity directory.  Useful for CSS customizations and internationalization.  @type String  */</span><span class="WHIT">
<span class='line'>4717</span> </span><span class="WHIT">	</span><span class="NAME">activityDirectoryHeaderStatus</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"&lt;b>Status&lt;/b>"</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4718</span> </span><span class="WHIT">	</span><span class="COMM">/** Error message to display when attempting to write to a device that does not support the provided datatype. Useful for CSS customizations and internationalization.  @type String  */</span><span class="WHIT">
<span class='line'>4719</span> </span><span class="WHIT">	</span><span class="NAME">unsupportedReadDataType</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"Your device does not support reading of the type #{dataType}."</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4720</span> </span><span class="WHIT">	</span><span class="COMM">/** Error message to display when attempting to write to a device that does not support the provided datatype. Useful for CSS customizations and internationalization.  @type String  */</span><span class="WHIT">
<span class='line'>4721</span> </span><span class="WHIT">	</span><span class="NAME">unsupportedWriteDataType</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"Your device does not support writing of the type #{dataType}."</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4722</span> </span><span class="WHIT">	</span><span class="COMM">/** Status message to display when activities are being uploaded.  @type String  */</span><span class="WHIT">
<span class='line'>4723</span> </span><span class="WHIT">	</span><span class="NAME">uploadingActivities</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"Uploading activities..."</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4724</span> </span><span class="WHIT">	</span><span class="COMM">/** Error message exposed for internationalization.  When maximum selection for upload is reached. @type String  */</span><span class="WHIT">
<span class='line'>4725</span> </span><span class="WHIT">	</span><span class="NAME">uploadMaximumReached</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"Maximum upload selection of #{activities} activities reached."</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4726</span> </span><span class="WHIT">	</span><span class="COMM">/** The innerHTML to use for status while an activity is processing (for upload).  Define using the img tag if you wish to use an image.  
<span class='line'>4727</span> 	 * 
<span class='line'>4728</span> 	 * @default '&lt;img src="style/ajax-loader.gif" />'
<span class='line'>4729</span> 	 * 
<span class='line'>4730</span> 	 * which is an animated loader image.  You can customize this to be text instead of an image by not using the image tags.   
<span class='line'>4731</span> 	 * @type String  */</span><span class="WHIT">
<span class='line'>4732</span> </span><span class="WHIT">	</span><span class="NAME">statusCellProcessingImg</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">'&lt;img src="style/ajax-loader.gif" width="15" height="15" />'</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4733</span> </span><span class="WHIT">	</span><span class="COMM">/** Status text to display when the plugin is sending data to a remote server.  @type String  */</span><span class="WHIT">
<span class='line'>4734</span> </span><span class="WHIT">	</span><span class="NAME">sendingDataToServer</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"Sending data from #{deviceName} to server..."</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4735</span> </span><span class="WHIT">	</span><span class="COMM">/** Error message to display when there is an error getting the HTTP response back from the HTTP request.  @type String  */</span><span class="WHIT">
<span class='line'>4736</span> </span><span class="WHIT">	</span><span class="NAME">errorHttpResponse</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"Unable to get valid response from HTTP request object.  Ensure that your options are set correctly and try again."</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4737</span> </span><span class="WHIT">	</span><span class="COMM">/** Status text to display when none of the activities from the device meet the filter requirements. @type String  */</span><span class="WHIT">
<span class='line'>4738</span> </span><span class="WHIT">	</span><span class="NAME">noFilteredActivities</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"No new activities found on device."</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4739</span> </span><span class="WHIT">	</span><span class="NAME">noActivitiesOnDevice</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"No activities found on selected device."</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4740</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4741</span> </span><span class="WHIT">	</span><span class="COMM">/**
<span class='line'>4742</span> 	 * The content to be displayed as the label for a Health (Weight/Monitoring) file
<span class='line'>4743</span> 	 */</span><span class="WHIT">
<span class='line'>4744</span> </span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4745</span> </span><span class="WHIT">	</span><span class="NAME">health_data_label</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"Your health data"</span><span class="WHIT">
<span class='line'>4746</span> </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>4747</span> 
<span class='line'>4748</span> 
<span class='line'>4749</span> </span><span class="COMM">/*
<span class='line'>4750</span>  * DisplayBootstrap - not sure what form this should take: class or global var 
<span class='line'>4751</span>  * It should probably be in the Garmin namesapce.
<span class='line'>4752</span>  * 
<span class='line'>4753</span>  * Dynamic include of required libraries and check for Prototype
<span class='line'>4754</span>  * Code taken from scriptaculous (http://script.aculo.us/) - thanks guys!
<span class='line'>4755</span>  */</span><span class="WHIT">
<span class='line'>4756</span> </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">GarminDeviceDisplay</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>4757</span> </span><span class="WHIT">	</span><span class="NAME">require</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">libraryName</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>4758</span> </span><span class="WHIT">		</span><span class="COMM">// inserting via DOM fails in Safari 2.0, so brute force approach</span><span class="WHIT">
<span class='line'>4759</span> </span><span class="WHIT">		</span><span class="NAME">document.write</span><span class="PUNC">(</span><span class="STRN">'&lt;script type="text/javascript" src="'</span><span class="PUNC">+</span><span class="NAME">libraryName</span><span class="PUNC">+</span><span class="STRN">'">&lt;/script>'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>4760</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>4761</span> 
<span class='line'>4762</span> </span><span class="WHIT">	</span><span class="NAME">load</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>4763</span> </span><span class="WHIT">		</span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">(</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">Prototype</span><span class="PUNC">==</span><span class="STRN">'undefined'</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="WHIT">
<span class='line'>4764</span> </span><span class="WHIT">			</span><span class="PUNC">(</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">Element</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="STRN">'undefined'</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT"> </span><span class="WHIT">
<span class='line'>4765</span> </span><span class="WHIT">			</span><span class="PUNC">(</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">Element.Methods</span><span class="PUNC">==</span><span class="STRN">'undefined'</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">||</span><span class="WHIT">
<span class='line'>4766</span> </span><span class="WHIT">			</span><span class="NAME">parseFloat</span><span class="PUNC">(</span><span class="NAME">Prototype.Version.split</span><span class="PUNC">(</span><span class="STRN">"."</span><span class="PUNC">)</span><span class="PUNC">[</span><span class="NUMB">0</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT"> </span><span class="STRN">"."</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT">
<span class='line'>4767</span> </span><span class="WHIT">			</span><span class="NAME">Prototype.Version.split</span><span class="PUNC">(</span><span class="STRN">"."</span><span class="PUNC">)</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">&lt;</span><span class="WHIT"> </span><span class="NUMB">1.5</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>4768</span> </span><span class="WHIT">			</span><span class="KEYW">throw</span><span class="PUNC">(</span><span class="STRN">"GarminDeviceDisplay requires the Prototype JavaScript framework >= 1.5.0"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>4769</span> </span><span class="WHIT">		</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>4770</span> 
<span class='line'>4771</span> </span><span class="WHIT">		</span><span class="NAME">$A</span><span class="PUNC">(</span><span class="NAME">document.getElementsByTagName</span><span class="PUNC">(</span><span class="STRN">"script"</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>4772</span> </span><span class="WHIT">		</span><span class="PUNC">.</span><span class="NAME">findAll</span><span class="PUNC">(</span><span class="WHIT">
<span class='line'>4773</span> </span><span class="WHIT">			</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>4774</span> </span><span class="WHIT">				</span><span class="KEYW">return</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">s.src</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">s.src.match</span><span class="PUNC">(</span><span class="REGX">/GarminDeviceDisplay\.js(\?.*)?$/</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>4775</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>4776</span> </span><span class="WHIT">		</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>4777</span> </span><span class="WHIT">		</span><span class="PUNC">.</span><span class="NAME">each</span><span class="PUNC">(</span><span class="WHIT">
<span class='line'>4778</span> </span><span class="WHIT">			</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">s</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>4779</span> </span><span class="WHIT">				</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">path</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">s.src.replace</span><span class="PUNC">(</span><span class="REGX">/GarminDeviceDisplay\.js(\?.*)?$/</span><span class="PUNC">,</span><span class="STRN">'../../'</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>4780</span> </span><span class="WHIT">				</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">includes</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">s.src.match</span><span class="PUNC">(</span><span class="REGX">/\?.*load=([a-z,]*)/</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>4781</span> </span><span class="WHIT">				</span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">dependencies</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">'garmin/device/GarminDeviceControl'</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT">
<span class='line'>4782</span> </span><span class="WHIT">									</span><span class="STRN">',garmin/device/GarminDevicePlugin'</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT">
<span class='line'>4783</span> </span><span class="WHIT">									</span><span class="STRN">',garmin/device/GarminGpsDataStructures'</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT">
<span class='line'>4784</span> </span><span class="WHIT">									</span><span class="STRN">',garmin/device/GoogleMapController'</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT">
<span class='line'>4785</span> </span><span class="WHIT">									</span><span class="STRN">',garmin/device/GarminDevice'</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT">
<span class='line'>4786</span> </span><span class="WHIT">									</span><span class="STRN">',garmin/device/GarminPluginUtils'</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT">
<span class='line'>4787</span> </span><span class="WHIT">									</span><span class="STRN">',garmin/api/GarminRemoteTransfer'</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT">
<span class='line'>4788</span> </span><span class="WHIT">									</span><span class="STRN">',garmin/util/Util-XmlConverter'</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT">
<span class='line'>4789</span> </span><span class="WHIT">									</span><span class="STRN">',garmin/util/Util-Broadcaster'</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT">
<span class='line'>4790</span> </span><span class="WHIT">									</span><span class="STRN">',garmin/util/Util-DateTimeFormat'</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT">
<span class='line'>4791</span> </span><span class="WHIT">									</span><span class="STRN">',garmin/util/Util-BrowserDetect'</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT">
<span class='line'>4792</span> </span><span class="WHIT">									</span><span class="STRN">',garmin/util/Util-PluginDetect'</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT">
<span class='line'>4793</span> </span><span class="WHIT">									</span><span class="STRN">',garmin/device/GarminObjectGenerator'</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT">
<span class='line'>4794</span> </span><span class="WHIT">									</span><span class="STRN">',garmin/activity/GarminMeasurement'</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT">
<span class='line'>4795</span> </span><span class="WHIT">									</span><span class="STRN">',garmin/activity/GarminSample'</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT">
<span class='line'>4796</span> </span><span class="WHIT">									</span><span class="STRN">',garmin/activity/GarminSeries'</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT">
<span class='line'>4797</span> </span><span class="WHIT">									</span><span class="STRN">',garmin/activity/GarminActivity'</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT">
<span class='line'>4798</span> </span><span class="WHIT">									</span><span class="STRN">',garmin/activity/GarminActivityDirectory'</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT">
<span class='line'>4799</span> </span><span class="WHIT">									</span><span class="STRN">',garmin/activity/GarminActivityFilter'</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT">
<span class='line'>4800</span> </span><span class="WHIT">									</span><span class="STRN">',garmin/activity/GarminActivityMatcher'</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT">
<span class='line'>4801</span> </span><span class="WHIT">									</span><span class="STRN">',garmin/activity/TcxActivityFactory'</span><span class="WHIT"> </span><span class="PUNC">+</span><span class="WHIT">									</span><span class="WHIT">
<span class='line'>4802</span> </span><span class="WHIT">									</span><span class="STRN">',garmin/activity/GpxActivityFactory'</span><span class="PUNC">+</span><span class="WHIT">
<span class='line'>4803</span> </span><span class="WHIT">									</span><span class="STRN">',garmin/directory/GarminDirectoryFactory'</span><span class="PUNC">+</span><span class="WHIT">
<span class='line'>4804</span> </span><span class="WHIT">									</span><span class="STRN">',garmin/directory/GarminDirectoryUtils'</span><span class="PUNC">+</span><span class="WHIT">
<span class='line'>4805</span> </span><span class="WHIT">									</span><span class="STRN">',garmin/directory/GarminFile'</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>4806</span> </span><span class="WHIT">			    </span><span class="PUNC">(</span><span class="NAME">includes</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">includes</span><span class="PUNC">[</span><span class="NUMB">1</span><span class="PUNC">]</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">dependencies</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">split</span><span class="PUNC">(</span><span class="STRN">','</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">each</span><span class="PUNC">(</span><span class="WHIT">
<span class='line'>4807</span> </span><span class="WHIT">					</span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">include</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>4808</span> </span><span class="WHIT">						</span><span class="NAME">GarminDeviceDisplay.require</span><span class="PUNC">(</span><span class="NAME">path</span><span class="PUNC">+</span><span class="NAME">include</span><span class="PUNC">+</span><span class="STRN">'.js'</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="WHIT">
<span class='line'>4809</span> </span><span class="WHIT">					</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>4810</span> </span><span class="WHIT">				</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>4811</span> </span><span class="WHIT">			</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>4812</span> </span><span class="WHIT">		</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>4813</span> </span><span class="WHIT">	</span><span class="PUNC">}</span><span class="WHIT">	</span><span class="WHIT">
<span class='line'>4814</span> </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>4815</span> 
<span class='line'>4816</span> </span><span class="NAME">GarminDeviceDisplay.load</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>4817</span> </span></pre></body></html>