<!DOCTYPE html>
<html lang="{{ app.request.locale|slice(0, 2) }}">
    <head>
        <meta charset="UTF-8" />
        <meta content="initial-scale=1, shrink-to-fit=no, width=device-width" name="viewport">

        <link href="https://fonts.googleapis.com/css?family=Play" rel="stylesheet">
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

        {% block stylesheets %}
            <link rel="stylesheet" href="{{ asset('assets/css/style.min.css') }}" />
        {% endblock %}
    </head>
    <body>
        <div class="site">
            <div class="site__inner">
                <nav class="site__inner-sidebar">
                    {% include '_components/sidebar/sidebar.html.twig' %}
                </nav>
                <main class="site__inner-main main">
                    <header class="main__header">
                        {% include '_components/header/header.html.twig' %}
                    </header>
                    <div class="main__content main-content">
                        {% block flash_messages %}
                            <div class="main-content__flash-messages">
                                {% include '_components/flash-messages/flash-messages.html.twig' %}
                            </div>
                        {% endblock %}

                        {% block body %}{% endblock %}
                    </div>
                    {% block main__footer %}
                    <footer class="main__footer">
                        <blockquote class="blockquote">
                            <p class="mb-0">A community driven open source software.</p>
                            <footer class="blockquote-footer"> by Opencaching Deutschland e.V.</footer>
                        </blockquote>
                    </footer>
                    {% endblock %}
                </main>
            </div>
        </div>

        {#{% include '_components/footer/footer.html.twig' %}#}

        {% block javascripts %}
            <script src="{{ asset('assets/js/main.js') }}"></script>

            <script type="text/javascript">
                // Set to the same value as the web property used on the site
                var gaProperty = 'UA-59334952-4';

                // Disable tracking if the opt-out cookie exists.
                var disableStr = 'ga-disable-' + gaProperty;
                if (document.cookie.indexOf(disableStr + '=true') > -1) {
                    window[disableStr] = true;
                }

                // Opt-out function
                function gaOptout() {
                    document.cookie = disableStr + '=true; expires=Thu, 31 Dec 2099 23:59:59 UTC; path=/';
                    window[disableStr] = true;
                    if (document.cookie.indexOf(disableStr + '=true') > -1) {
                        alert('Google Analytics is now deactivated!');
                    }
                }
            </script>
            {% if app.request.server.get('HTTP_DNT') != 1 %}
                <script type="text/plain" data-type="text/javascript" data-name="googleAnalytics">
                    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

                    ga('create', gaProperty, 'auto');
                    ga('set', 'anonymizeIp', true);
                    ga('send', 'pageview');
                </script>
            {% endif %}
        {% endblock %}
    </body>
</html>
