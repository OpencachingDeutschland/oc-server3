{% extends 'backend/base.html.twig' %}

{% block page_content %}

    <div>
        <h3>Cachedatenbank</h3>
        {% if cachesForm is defined %}
            {{ form_start(cachesForm) }}
            {{ form_widget(cachesForm) }}
            {{ form_end(cachesForm) }}
        {% endif %}

        {% if caches_by_searchfield is defined and caches_by_searchfield != 0 %}
            <br/>
            <div> Gefunden: {{ caches_by_searchfield|length }} Cache(s)</div>
            <br/>
            {% if caches_by_searchfield %}
                <table class="table table-striped table-hover">
                    <thead class="thead-dark">
                    <tr>
                        <th scope="col" class="asc">Cache-ID</th>
                        <th scope="col" class="asc">Name</th>
                        <th scope="col" class="asc">Owner</th>
                        <th scope="col">Infos</th>
                        <th scope="col">&nbsp;</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for cache in caches_by_searchfield %}
                        <tr>
                            <td>{{ cache.wp_oc }}</td>
                            <td>{{ cache.name }}</td>
                            <td>{{ cache.username }}</td>
                            <td>&nbsp;</td>
                            <td>
                                <a class="btn btn-primary" href="/backend/cache/{{ cache.wp_oc }}">Details</a>
                            </td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
            {% else %}
                <br/><br/>
                <span>Leider keinen Cache mit dem eingegebenen Text gefunden.. :-(</span>
            {% endif %}
        {% endif %}


    </div>

    <hr>

    <div>
        <h3><br/>Datenbankabfrage mittels Wegpunkt-ID in der URL:</h3>
        Aufruf:<br/>
        http://try.docker.team-opencaching.de/backend/cache/$WP_OC<br/>
        <small>
            <small>oder</small>
        </small>
        <br/>
        http://try.docker.team-opencaching.de/backend/cache/$WP_GC<br/>
        <small>
            <small>oder</small>
        </small>
        <br/>
        http://try.docker.team-opencaching.de/backend/cache/$WP_NC<br/>
        <br/>

        {% if cache_by_id is defined %}
            <div style="background-color: lightgrey;">
                <br/>
                Diese Abfrage wurde durchgeführt mittels WP_OC/WP_GC/WP_NC ID in der URL. Hier ist das Ergebnis:<br/>
                {% if cache_by_id %}
                    <table class="table table-bordered">
                        <thead>
                        <tr>
                            <th scope="col">&nbsp;</th>
                            {# <th scope="col">Cache ID</th> #}
                            <th scope="col">OC</th>
                            <th scope="col">Titel</th>
                            <th scope="col">Cachegröße</th>
                            <th scope="col">D/T</th>
                            <th scope="col">Owner</th>
                            <th scope="col">Position</th>
                            <th scope="col">GC</th>
                            <th scope="col">NC</th>
                            <th scope="col">Status</th>
                            <th scope="col">mit Logpasswort?</th>
                            <th scope="col">veröffentlicht</th>
                            <th scope="col">Versteckdatum</th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for cache in cache_by_id %}
                            <tr>
                                <th scope="row"><img src="{{ cache.cache_type_picture }}" alt="Cachetyp"/></th>
                                {# <td>{{ cache.cache_id }}</td> #}
                                <td>{{ cache.wp_oc }}</td>
                                <td>{{ cache.name }}</td>
                                <td>{{ cache.cache_size_name }}</td>
                                <td>D{{ cache.difficulty / 2 }}/T{{ cache.terrain / 2 }}</td>
                                <td>{{ cache.username }}</td>
                                <td>N{{ cache.latitude }} E{{ cache.longitude }}</td>
                                <td>{{ cache.wp_gc }}</td>
                                <td>{{ cache.wp_nc }}</td>
                                <td>{{ cache.cache_status_name }}</td>
                                <td>{% if cache.logpw == 1 %}
                                        <i class="fas fa-key"><i class="fas fa-check"></i></i>
                                    {% else %}
                                        <i class="fas fa-times"></i>
                                    {% endif %}</td>
                                <td>{% if cache.is_publishdate == 1 %}
                                        <i class="fas fa-check"></i>
                                    {% else %}
                                        <i class="fas fa-times"></i>
                                    {% endif %}</td>
                                <td>{{ cache.date_hidden }}</td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                {% else %}
                    <br/><br/>
                    <span>Leider keinen Cache mit dem angegebenen WP_OC gefunden.. :-(</span>
                {% endif %}
            </div>
        {% endif %}

    </div>

    <hr>

    <div>

        <script>
            function switchImage() {
                if (document.getElementById("safariDisclaimer").hidden) {
                    document.getElementById("safariSwitch").src = "https://www.opencaching.de/resource2/ocstyle/images/attributes/safari.png";
                    document.getElementById("safariDisclaimer").hidden = false;
                } else {
                    document.getElementById("safariSwitch").src = "https://www.opencaching.de/resource2/ocstyle/images/attributes/safari-disabled.png";
                    document.getElementById("safariDisclaimer").hidden = true;
                }
            }

        </script>
        <br/>
        <h3>Safari Ein- und Ausklappdingsbums:</h3>
        Klick mich:
        <img src="https://www.opencaching.de/resource2/ocstyle/images/attributes/safari-disabled.png" id="safariSwitch"
             onclick="switchImage()" alt="aus"> <br/>


        <br/>
        <div style="border:solid 2px #5f90bb;background:#dbe6f1;color:#000000;padding:5px;text-align:justify;"
             id="safariDisclaimer" hidden>
            Bitte die in der Logbedingung geforderten Koordinaten im Format "N/S DD° MM.MMM E/W DDD° MM.MMM" (z.B.
            "N48° 00.000 E008° 00.000") ins Log eintragen, damit die Positionen von der
            <a href="http://www.flopp.net/safari/">Safari-Cache-Karte</a>
            korrekt erkannt und angezeigt werden können!<br/>
            Der Cache und seine Logs werden
            <a href="http://www.flopp.net/safari/OC1001" target="_blank">hier</a>
            angezeigt.
        </div>
        <br/>
    </div>

    <hr>

    <div>
    </div>

{% endblock %}







